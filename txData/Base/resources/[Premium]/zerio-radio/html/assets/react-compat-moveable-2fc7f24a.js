import{a as di,d as pi,b as gi,C as qe}from"./@egjs-8ad550bb.js";import{p as hi,r as Jt,a as Ue,b as mi,w as xi}from"./framework-utils-6dbb37c6.js";import{f as Mr,p as mt,q as dt,t as st,u as ce,a as gr,v as Si,c as Dt,o as _t,w as je,x as Ke,y as ct,d as tr,l as Qr,z as Kt,m as bi,i as fr,A as hr,B as Di,b as Ei,C as ve,D as Ze,e as Ci,s as de,g as Pa,T as At,E as Mi,F as _a,G as pe,H as ge}from"./@daybrush-ae1f0580.js";import{d as Aa,e as $e,p as tt,f as Y,g as Ft,i as Je,h as Nt,c as Rt,j as bt,k as xt,D as Ri,l as lr,n as yi,o as Sa,q as Rr,u as Xr,v as Qe,w as Or,E as zi,x as ka,y as Oi}from"./@scena-e1e05698.js";import{p as Fa,a as or,t as Sr,c as Bi}from"./css-to-mat-2227cd45.js";import{g as cr,f as he,a as Ti,b as Gi,i as Ii,c as wi}from"./overlap-area-02b6251d.js";import{c as Xt,P as tn}from"./react-simple-compat-7a65e6b5.js";import{G as Pi}from"./gesto-e071d06a.js";import{s as rn}from"./react-compat-css-styled-deb89af7.js";var ba=function(t,r){return ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])},ba(t,r)};function Br(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");ba(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}var M=function(){return M=Object.assign||function(r){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},M.apply(this,arguments)};function _i(t,r){var a={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.indexOf(e)<0&&(a[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(t);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(t,e[n])&&(a[e[n]]=t[e[n]]);return a}function Ai(t,r,a,e){var n=arguments.length,i=n<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,a):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,r,a,e);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(n<3?o(i):n>3?o(r,a,i):o(r,a))||i);return n>3&&i&&Object.defineProperty(r,a,i),i}function U(t,r,a){if(a||arguments.length===2)for(var e=0,n=r.length,i;e<n;e++)(i||!(e in r))&&(i||(i=Array.prototype.slice.call(r,0,e)),i[e]=r[e]);return t.concat(i||Array.prototype.slice.call(r))}function Tr(t,r){var a;return M({events:{},props:(a={},a[t]=Boolean,a),name:t},r)}function ki(t,r){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(r,'deg);transform-origin: 16px 16px"></path></svg>')}function Fi(t){var r=ki(1,t),a=Math.round(t/45)*45%180,e="ns-resize";return a===135?e="nwse-resize":a===45?e="nesw-resize":a===90&&(e="ew-resize"),"cursor:".concat(e,";cursor: url('").concat(r,"') 16 16, ").concat(e,";")}var qr=di(),an=qr.browser.webkit,en=an&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,r=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return r?parseFloat(r[1])<605:!1}(),Ni=qr.browser.name==="firefox",Wi=parseInt(qr.browser.webkitVersion,10)>=612||parseInt(qr.browser.version,10)>=15,Na="moveable-",Hi=`
{
	position: absolute;
	width: 1px;
	height: 1px;
	left: 0;
	top: 0;
    z-index: 3000;
    --moveable-color: #4af;
    --zoom: 1;
    --zoompx: 1px;
    will-change: transform;
    outline: 1px solid transparent;
}
.control-box {
    z-index: 0;
}
.line, .control {
    position: absolute;
	left: 0;
    top: 0;
    will-change: transform;
}
.control {
	width: 14px;
	height: 14px;
	border-radius: 50%;
	border: 2px solid #fff;
	box-sizing: border-box;
    background: #4af;
    background: var(--moveable-color);
	margin-top: -7px;
    margin-left: -7px;
    border: 2px solid #fff;
    z-index: 10;
}
.padding {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
    transform-origin: 0 0;
}
.line {
	width: 1px;
    height: 1px;
    background: #4af;
    background: var(--moveable-color);
	transform-origin: 0px 50%;
}
.line.edge {
    z-index: 1;
    background: transparent;
}
.line.dashed {
    box-sizing: border-box;
    background: transparent;
}
.line.dashed.horizontal {
    border-top: 1px dashed #4af;
    border-top-color: #4af;
    border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
    border-left: 1px dashed #4af;
    border-left-color: #4af;
    border-left-color: var(--moveable-color);
}
.line.vertical {
    transform: translateX(-50%);
}
.line.horizontal {
    transform: translateY(-50%);
}
.line.vertical.bold {
    width: 2px;
}
.line.horizontal.bold {
    height: 2px;
}

.control.origin {
	border-color: #f55;
	background: #fff;
	width: 12px;
	height: 12px;
	margin-top: -6px;
    margin-left: -6px;
	pointer-events: none;
}
`.concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
	`).concat(Fi(t),`
}
`)}).join(`
`),`
.group {
    z-index: -1;
}
.area {
    position: absolute;
}
.area-pieces {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}
.area.avoid, .area.pass {
    pointer-events: none;
}
.area.avoid+.area-pieces {
    display: block;
}
.area-piece {
    position: absolute;
}

`).concat(en?`:global svg *:before {
	content:"";
	transform-origin: inherit;
}`:"",`
`),Li=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Da=1e-4,yt=1e-7,Pr=1e-9,Ea=Math.pow(10,10),me=-Ea,Vi=["n","w","s","e"],Wa=["n","w","s","e","nw","ne","sw","se"],Yi={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Ha={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},nn={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Xi=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag"];function Gr(t,r,a,e,n,i){var o,s;i===void 0&&(i="draggable");var u=(s=(o=r.gestos[i])===null||o===void 0?void 0:o.move(a,t.inputEvent))!==null&&s!==void 0?s:{},f=u.originalDatas||u.datas,v=f[i]||(f[i]={});return M(M({},n?On(r,u):u),{isPinch:!!e,parentEvent:!0,datas:v,originalDatas:t.originalDatas})}var vr=function(){function t(a){var e;a===void 0&&(a="draggable"),this.ableName=a,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(e={},e[a]={},e)}var r=t.prototype;return r.dragStart=function(a,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),M(M({},this.move(a,e.inputEvent)),{type:"dragstart"})},r.drag=function(a,e){return this.move([a[0]-this.prevX,a[1]-this.prevY],e)},r.move=function(a,e){var n,i,o=!1;if(!this.isFlag)this.prevX=a[0],this.prevY=a[1],this.startX=a[0],this.startY=a[1],n=a[0],i=a[1],this.isFlag=!0;else{var s=this.isDrag;n=this.prevX+a[0],i=this.prevY+a[1],(a[0]||a[1])&&(this.isDrag=!0),!s&&this.isDrag&&(o=!0)}return this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:e,isFirstDrag:o,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:a[0],deltaY:a[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function on(t,r){var a=r.clientX,e=r.clientY,n=r.datas,i=t.state,o=i.moveableClientRect,s=i.rootMatrix,u=i.is3d,f=i.pos1,v=o.left,c=o.top,l=u?4:3,d=Y(Qt(s,[a-v,e-c],l),f),p=d[0],g=d[1],h=Pt({datas:n,distX:p,distY:g}),m=h[0],x=h[1];return[m,x]}function er(t,r){var a=r.datas,e=t.state,n=e.allMatrix,i=e.beforeMatrix,o=e.is3d,s=e.left,u=e.top,f=e.origin,v=e.offsetMatrix,c=e.targetMatrix,l=e.transformOrigin,d=o?4:3;a.is3d=o,a.matrix=n,a.targetMatrix=c,a.beforeMatrix=i,a.offsetMatrix=v,a.transformOrigin=l,a.inverseMatrix=Nt(n,d),a.inverseBeforeMatrix=Nt(i,d),a.absoluteOrigin=lr(tt([s,u],f),d),a.startDragBeforeDist=Rt(a.inverseBeforeMatrix,a.absoluteOrigin,d),a.startDragDist=Rt(a.inverseMatrix,a.absoluteOrigin,d)}function qi(t){return ur(t.datas.beforeTransform,[50,50],100,100).direction}function ta(t,r){var a=t.datas,e=t.originalDatas.beforeRenderable,n=a.transformIndex,i=e.nextTransforms,o=i.length,s=e.nextTransformAppendedIndexes,u=0;n===-1?(r==="translate"?u=0:r==="rotate"&&(u=Mr(i,function(l){return l.match(/scale\(/g)})),u===-1&&(u=i.length),a.transformIndex=u):Qr(s,function(l){return l.index===n&&l.functionName===r})?u=n:u=n+s.filter(function(l){return l.index<n}).length;var f=So(i,u),v=f.targetFunction,c=r==="rotate"?"rotateZ":r;a.beforeFunctionTexts=f.beforeFunctionTexts,a.afterFunctionTexts=f.afterFunctionTexts,a.beforeTransform=f.beforeFunctionMatrix,a.beforeTransform2=f.beforeFunctionMatrix2,a.targetTansform=f.targetFunctionMatrix,a.afterTransform=f.afterFunctionMatrix,a.afterTransform2=f.afterFunctionMatrix2,a.targetAllTransform=f.allFunctionMatrix,v.functionName===c?(a.afterFunctionTexts.splice(0,1),a.isAppendTransform=!1):o>u&&(a.isAppendTransform=!0,e.nextTransformAppendedIndexes=U(U([],s,!0),[{functionName:r,index:u,isAppend:!0}],!1))}function ra(t,r,a){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?a:r," ").concat(t.afterFunctionTexts.join(" "))}function Ui(t){var r=t.datas,a=t.distX,e=t.distY,n=un({datas:r,distX:a,distY:e}),i=n[0],o=n[1],s=sn(r,yi([i,o],4));return Rt(s,lr([0,0,0],4),4)}function sn(t,r,a){var e=t.beforeTransform,n=t.afterTransform,i=t.beforeTransform2,o=t.afterTransform2,s=t.targetAllTransform,u=a?xt(s,r,4):xt(r,s,4),f=xt(Nt(a?i:e,4),u,4),v=xt(f,Nt(a?o:n,4),4);return v}function un(t){var r=t.datas,a=t.distX,e=t.distY,n=r.inverseBeforeMatrix,i=r.is3d,o=r.startDragBeforeDist,s=r.absoluteOrigin,u=i?4:3;return Y(Rt(n,tt(s,[a,e]),u),o)}function Pt(t,r){var a=t.datas,e=t.distX,n=t.distY,i=a.inverseBeforeMatrix,o=a.inverseMatrix,s=a.is3d,u=a.startDragBeforeDist,f=a.startDragDist,v=a.absoluteOrigin,c=s?4:3;return Y(Rt(r?i:o,tt(v,[e,n]),c),r?u:f)}function ji(t,r){var a=t.datas,e=t.distX,n=t.distY,i=a.beforeMatrix,o=a.matrix,s=a.is3d,u=a.startDragBeforeDist,f=a.startDragDist,v=a.absoluteOrigin,c=s?4:3;return Y(Rt(r?i:o,tt(r?u:f,[e,n]),c),v)}function Ki(t,r,a,e,n,i){return e===void 0&&(e=r),n===void 0&&(n=a),i===void 0&&(i=[0,0]),t?t.map(function(o,s){var u=Pa(o),f=u.value,v=u.unit,c=s?n:e,l=s?a:r;if(o==="%"||isNaN(f)){var d=c?i[s]/c:0;return l*d}else if(v!=="%")return f;return l*f/100}):i}function fn(t){var r=[];return t[1]>=0&&(t[0]>=0&&r.push(3),t[0]<=0&&r.push(2)),t[1]<=0&&(t[0]>=0&&r.push(1),t[0]<=0&&r.push(0)),r}function Zi(t,r){return fn(r).map(function(a){return t[a]})}function vt(t,r){var a=(r[0]+1)/2,e=(r[1]+1)/2,n=[Kt(t[0][0],t[1][0],a,1-a),Kt(t[0][1],t[1][1],a,1-a)],i=[Kt(t[2][0],t[3][0],a,1-a),Kt(t[2][1],t[3][1],a,1-a)];return[Kt(n[0],i[0],e,1-e),Kt(n[1],i[1],e,1-e)]}function $i(t,r,a,e,n,i){var o=qt(r,a,e,n),s=vt(o,i),u=t[0]-s[0],f=t[1]-s[1];return[u,f]}function Ir(t,r,a,e){return xt(t,Ur(r,e,a),e)}function Ji(t,r,a){var e=t.transformOrigin,n=t.offsetMatrix,i=t.is3d,o=r.beforeTransform,s=r.afterTransform,u=i?4:3,f=Fa([a]);return Ir(n,Ft(xt(xt(o,f,4),s,4),4,u),e,u)}function Qi(t,r){var a=t.transformOrigin,e=t.offsetMatrix,n=t.is3d,i=t.targetMatrix,o=n?4:3;return Ir(e,xt(i,ka(r,o),o),a,o)}function aa(t){var r=mr(t);return{setTransform:function(a,e){e===void 0&&(e=-1),r.startTransforms=Dt(a)?a:tr(a),Ca(t,e)},setTransformIndex:function(a){Ca(t,a)}}}function ea(t,r){var a=mr(t),e=a.startTransforms;Ca(t,Mr(e,function(n){return n.indexOf("".concat(r,"("))===0}))}function Ca(t,r){var a=mr(t),e=t.datas;if(e.transformIndex=r,r!==-1){var n=a.startTransforms[r];if(n){var i=or([n]);e.startValue=i[0].functionValue}}}function La(t,r){var a=mr(t);a.nextTransforms=tr(r)}function mr(t){return t.originalDatas.beforeRenderable}function ln(t){var r=t.originalDatas.beforeRenderable;return r.nextTransforms}function _r(t){return ln(t).join(" ")}function Ar(t){return mr(t).nextStyle}function cn(t,r,a,e,n){La(n,r);var i=Ct.drag(t,Gr(n,t.state,a,e,!1)),o=i?i.transform:r;return M(M({transform:r,drag:i},Mt({transform:o},n)),{afterTransform:o})}function vn(t,r,a,e,n){var i=t.state,o=i.left,s=i.top,u=t.props.groupable,f=Ji(t.state,n,r),v=u?o:0,c=u?s:0,l=pn(t,a,f),d=Y(e,l);return Y(d,[v,c])}function to(t,r,a,e,n){var i=vn(t,"scale(".concat(r.join(", "),")"),a,e,n);return i}function dn(t,r,a){return[-1+t[0]/(r/2),-1+t[1]/(a/2)]}function pn(t,r,a){a===void 0&&(a=t.state.allMatrix);var e=t.state,n=e.width,i=e.height,o=e.is3d,s=o?4:3,u=[n/2*(1+r[0]),i/2*(1+r[1])];return ht(a,u,s)}function ro(t,r,a){var e=a.fixedDirection,n=a.fixedPosition;return vn(t,"rotate(".concat(r,"deg)"),e,n,a)}function ao(t,r,a,e,n,i){var o=t.props.groupable,s=t.state,u=s.transformOrigin,f=s.offsetMatrix,v=s.is3d,c=s.width,l=s.height,d=s.left,p=s.top,g=i.fixedDirection,h=i.nextTargetMatrix||s.targetMatrix,m=v?4:3,x=Ki(n,r,a,c,l,u),b=o?d:0,D=o?p:0,C=Ir(f,h,x,m),S=$i(e,C,r,a,m,g);return Y(S,[b,D])}function gn(t,r){return vt(Ot(t.state),r)}function eo(t,r){var a=t.targetGesto,e=t.controlGesto,n;return a!=null&&a.isFlag()&&(n=a.getEventData()[r]),!n&&(e!=null&&e.isFlag())&&(n=e.getEventData()[r]),n||{}}function no(t,r){return[t[0]*r[0],t[1]*r[1]]}function X(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return hi.apply(void 0,U([Na],t,!1))}function hn(t){t()}function io(t){return!t||t==="none"?[1,0,0,1,0,0]:fr(t)?t:Fa(t)}function Ur(t,r,a){return Sa(r,Rr(a,r),t,Rr(a.map(function(e){return-e}),r))}function oo(t,r,a){if(r==="%"){var e=Va(t.ownerSVGElement);return e[a?"width":"height"]/100}return 1}function so(t){var r=jr(Wt(t,":before"));return r.map(function(a,e){var n=Pa(a),i=n.value,o=n.unit;return i*oo(t,o,e===0)})}function jr(t){var r=t.transformOrigin;return r?r.split(" "):["0","0"]}function mn(t,r){r===void 0&&(r=Wt(t));var a=r.transform;if(a&&a!=="none")return r.transform;if("transform"in t){var e=t.transform,n=e.baseVal;if(!n)return"";var i=n.length;if(!i)return"";for(var o=[],s=function(f){var v=n[f].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(c){return v[c]}).join(", "),")"))},u=0;u<i;++u)s(u);return o.join(" ")}return""}function yr(t,r,a,e,n){var i,o,s,u=t&&t.ownerDocument?t.ownerDocument:document,f=u.documentElement||u.body,v=!1,c,l;if(!t||a)c=t;else{var d=(i=t==null?void 0:t.assignedSlot)===null||i===void 0?void 0:i.parentElement,p=t.parentElement;d?(v=!0,l=p,c=d):c=p}for(var g=!1,h=t===r||c===r,m="relative",x=1,b=parseFloat((o=n)===null||o===void 0?void 0:o.zoom)||1,D=n==null?void 0:n.position;c&&c!==f;){r===c&&(h=!0);var C=Wt(c),S=c.tagName.toLowerCase(),E=mn(c,C),O=C.willChange,R=parseFloat(C.zoom)||1;if(m=C.position,e&&R!==1){x=R;break}if(!a&&e&&b!==1&&D&&D!=="absolute"||S==="svg"||m!=="static"||E&&E!=="none"||O==="transform")break;var z=(s=t==null?void 0:t.assignedSlot)===null||s===void 0?void 0:s.parentNode,B=c.parentNode;z&&(v=!0,l=B);var y=z||B;if(y&&y.nodeType===11){c=y.host,g=!0;break}c=y,m="relative"}return{offsetZoom:x,hasSlot:v,parentSlotElement:l,isCustomElement:g,isStatic:m==="static",isEnd:h||!c||c===f,offsetParent:c||f}}function uo(t,r,a){var e,n=t.tagName.toLowerCase(),i=t.offsetLeft,o=t.offsetTop,s=_a(i),u=!s,f,v;return!u&&n!=="svg"?(f=en?so(t):jr(a).map(function(c){return parseFloat(c)}),v=f.slice(),u=!0,e=co(t,f,t===r&&r.tagName.toLowerCase()==="g"),i=e[0],o=e[1],f[0]=e[2],f[1]=e[3]):(f=jr(a).map(function(c){return parseFloat(c)}),v=f.slice()),{tagName:n,isSVG:s,hasOffset:u,offset:[i||0,o||0],origin:f,targetOrigin:v}}function xn(t,r,a){a===void 0&&(a=Wt(t));var e=Wt(document.body),n=e.position;if(!r&&(!n||n==="static"))return[0,0];var i=parseInt(e.marginLeft,10),o=parseInt(e.marginTop,10);return a.position==="absolute"&&((a.top!=="auto"||a.bottom!=="auto")&&(o=0),(a.left!=="auto"||a.right!=="auto")&&(i=0)),[i,o]}function Ma(t){t.forEach(function(r){var a=r.matrix;a&&(r.matrix=Ft(a,3,4))})}function fo(t){for(var r=t.parentElement,a=!1;r;){var e=Wt(r).transform;if(e&&e!=="none"){a=!0;break}if(r===document.body)break;r=r.parentElement}return{fixedContainer:r||document.body,hasTransform:a}}function na(t,r){return r===void 0&&(r=t.length>9),"".concat(r?"matrix3d":"matrix","(").concat($e(t,!r).join(","),")")}function Va(t){var r=t.clientWidth,a=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:r,clientHeight:a};var e=t.viewBox,n=e&&e.baseVal||{x:0,y:0,width:0,height:0};return{x:n.x,y:n.y,width:n.width||r,height:n.height||a,clientWidth:r,clientHeight:a}}function lo(t,r){var a=Va(t),e=a.width,n=a.height,i=a.clientWidth,o=a.clientHeight,s=i/e,u=o/n,f=t.preserveAspectRatio.baseVal,v=f.align,c=f.meetOrSlice,l=[0,0],d=[s,u],p=[0,0];if(v!==1){var g=(v-2)%3,h=Math.floor((v-2)/3);l[0]=e*g/2,l[1]=n*h/2;var m=c===2?Math.max(u,s):Math.min(s,u);d[0]=m,d[1]=m,p[0]=(i-e)/2*g,p[1]=(o-n)/2*h}var x=ka(d,r);return x[r*(r-1)]=p[0],x[r*(r-1)+1]=p[1],Ur(x,r,l)}function co(t,r,a){if(!t.getBBox||!a&&t.tagName.toLowerCase()==="g")return[0,0,0,0];var e=t.getBBox(),n=Va(t.ownerSVGElement),i=e.x-n.x,o=e.y-n.y;return[i,o,r[0]-i,r[1]-o]}function ht(t,r,a){return Rt(t,lr(r,a),a)}function qt(t,r,a,e){return[[0,0],[r,0],[0,a],[r,a]].map(function(n){return ht(t,n,e)})}function Tt(t){var r=t.map(function(f){return f[0]}),a=t.map(function(f){return f[1]}),e=Math.min.apply(Math,r),n=Math.min.apply(Math,a),i=Math.max.apply(Math,r),o=Math.max.apply(Math,a),s=i-e,u=o-n;return{left:e,top:n,right:i,bottom:o,width:s,height:u}}function xe(t,r,a,e){var n=qt(t,r,a,e);return Tt(n)}function vo(t,r,a,e,n){var i,o=t.target,s=t.origin,u=r.matrix,f=bn(o),v=f.offsetWidth,c=f.offsetHeight,l=a.getBoundingClientRect(),d=[0,0];a===document.body&&(d=xn(o,!0));for(var p=o.getBoundingClientRect(),g=p.left-l.left+a.scrollLeft-(a.clientLeft||0)+d[0],h=p.top-l.top+a.scrollTop-(a.clientTop||0)+d[1],m=p.width,x=p.height,b=Sa(e,n,u),D=xe(b,v,c,e),C=D.left,S=D.top,E=D.width,O=D.height,R=ht(b,s,e),z=Y(R,[C,S]),B=[g+z[0]*m/E,h+z[1]*x/O],y=[0,0],T=0;++T<10;){var G=Nt(n,e);i=Y(ht(G,B,e),ht(G,R,e)),y[0]=i[0],y[1]=i[1];var w=Sa(e,n,Rr(y,e),u),P=xe(w,v,c,e),F=P.left,_=P.top,A=F-g,I=_-h;if(Math.abs(A)<2&&Math.abs(I)<2)break;B[0]-=A,B[1]-=I}return y.map(function(k){return Math.round(k)})}function po(t,r,a){var e=t.length===16,n=e?4:3,i=r.map(function(u){return ht(t,u,n)}),o=a.left,s=a.top;return i.map(function(u){return[u[0]+o,u[1]+s]})}function ur(t,r,a,e){var n=t.length===16,i=n?4:3,o=qt(t,a,e,i),s=o[0],u=s[0],f=s[1],v=o[1],c=v[0],l=v[1],d=o[2],p=d[0],g=d[1],h=o[3],m=h[0],x=h[1],b=ht(t,r,i),D=b[0],C=b[1],S=Math.min(u,c,p,m),E=Math.min(f,l,g,x),O=Math.max(u,c,p,m),R=Math.max(f,l,g,x);u=u-S||0,c=c-S||0,p=p-S||0,m=m-S||0,f=f-E||0,l=l-E||0,g=g-E||0,x=x-E||0,D=D-S||0,C=C-E||0;var z=bi(qt(t,100,100,i));return{left:S,top:E,right:O,bottom:R,origin:[D,C],pos1:[u,f],pos2:[c,l],pos3:[p,g],pos4:[m,x],direction:z}}function It(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Sn(t,r){return It([r[0]-t[0],r[1]-t[1]])}function br(t,r,a,e){a===void 0&&(a=1),e===void 0&&(e=dt(t,r));var n=Sn(t,r);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(e,"rad) scaleY(").concat(a,")"),width:"".concat(n,"px")}}function Ya(t,r){for(var a=[],e=2;e<arguments.length;e++)a[e-2]=arguments[e];var n=a.length,i=a.reduce(function(s,u){return s+u[0]},0)/n,o=a.reduce(function(s,u){return s+u[1]},0)/n;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(r,")")}}function rr(t,r){var a=t[r];return fr(a)?M(M({},t),a):t}function bn(t,r){r===void 0&&(r=t?Wt(t):null);var a=t&&!_a(t.offsetWidth),e=0,n=0,i=0,o=0,s=0,u=0,f=0,v=0,c=0,l=0,d=0,p=0,g=1/0,h=1/0,m=1/0,x=1/0,b=0,D=0,C=!1;if(t)if(!a&&t.tagName.toLowerCase()!=="svg"){var S=t.getBBox();C=!0,e=S.width,n=S.height,s=e,u=n,f=e,v=n,i=e,o=n}else{var E=t.style,O=r.boxSizing==="border-box",R=parseFloat(r.borderLeftWidth)||0,z=parseFloat(r.borderRightWidth)||0,B=parseFloat(r.borderTopWidth)||0,y=parseFloat(r.borderBottomWidth)||0,T=parseFloat(r.paddingLeft)||0,G=parseFloat(r.paddingRight)||0,w=parseFloat(r.paddingTop)||0,P=parseFloat(r.paddingBottom)||0,F=T+G,_=w+P,A=R+z,I=B+y,k=F+A,j=_+I,K=r.position,q=0,N=0;if("clientLeft"in t){var H=null;if(K==="absolute"){var Z=yr(t,document.body);H=Z.offsetParent}else H=t.parentElement;if(H){var J=Wt(H);q=parseFloat(J.width),N=parseFloat(J.height)}}c=Math.max(F,ct(r.minWidth,q)||0),l=Math.max(_,ct(r.minHeight,N)||0),g=ct(r.maxWidth,q),h=ct(r.maxHeight,N),isNaN(g)&&(g=1/0),isNaN(h)&&(h=1/0),b=ct(E.width,0)||0,D=ct(E.height,0)||0,s=parseFloat(r.width)||0,u=parseFloat(r.height)||0,f=Math.abs(s-b)<1?ge(c,b||s,g):s,v=Math.abs(u-D)<1?ge(l,D||u,h):u,e=f,n=v,i=f,o=v,O?(m=g,x=h,d=c,p=l,f=e-k,v=n-j):(m=g+k,x=h+j,d=c+k,p=l+j,e=f+k,n=v+j),i=f+F,o=v+_}return{svg:C,offsetWidth:e,offsetHeight:n,clientWidth:i,clientHeight:o,contentWidth:f,contentHeight:v,inlineCSSWidth:b,inlineCSSHeight:D,cssWidth:s,cssHeight:u,minWidth:c,minHeight:l,maxWidth:g,maxHeight:h,minOffsetWidth:d,minOffsetHeight:p,maxOffsetWidth:m,maxOffsetHeight:x}}function Dn(t,r){return dt(r>0?t[0]:t[1],r>0?t[1]:t[0])}function kr(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function En(t,r){var a=t===document.body||t===document.documentElement,e={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return a&&(e.clientHeight=Math.max(r.height,e.clientHeight),e.scrollHeight=Math.max(r.height,e.scrollHeight)),e.overflow=Wt(t).overflow!=="visible",M(M({},r),e)}function da(t,r,a,e){var n=t.left,i=t.right,o=t.top,s=t.bottom,u=r.top,f=r.left,v={left:f+n,top:u+o,right:f+i,bottom:u+s,width:i-n,height:s-o};return a&&e?En(a,v):v}function Dr(t,r){var a=0,e=0,n=0,i=0;if(t){var o=t.getBoundingClientRect();a=o.left,e=o.top,n=o.width,i=o.height}var s={left:a,top:e,width:n,height:i,right:a+n,bottom:e+i};return t&&r?En(t,s):s}function Cn(t,r,a,e){var n;if(t)n=t;else if(r)n=[0,0];else{var i=a.target;n=Mn(i,e)}return n}function Mn(t,r){if(t){var a=t.getAttribute("data-rotation")||"",e=t.getAttribute("data-direction");if(r.deg=a,!!e){var n=[0,0];return e.indexOf("w")>-1&&(n[0]=-1),e.indexOf("e")>-1&&(n[0]=1),e.indexOf("n")>-1&&(n[1]=-1),e.indexOf("s")>-1&&(n[1]=1),n}}}function Xa(t,r){return[tt(r,t[0]),tt(r,t[1]),tt(r,t[2]),tt(r,t[3])]}function Ot(t){var r=t.left,a=t.top,e=t.pos1,n=t.pos2,i=t.pos3,o=t.pos4;return Xa([e,n,i,o],[r,a])}function go(t){return Math.round(t%1===-.5?t-1:t)}function sr(t,r){var a;(a=t[r])===null||a===void 0||a.unset(),t[r]=null}function Mt(t,r){if(r){var a=mr(r);a.nextStyle=M(M({},a.nextStyle),t)}return{style:t,cssText:hr(t).map(function(e){return"".concat(Di(e,"-"),": ").concat(t[e],";")}).join("")}}function Rn(t,r,a){var e=r.afterTransform||r.transform;return M(M({},Mt(M(M(M({},t.style),r.style),{transform:e}),a)),{afterTransform:e,transform:t.transform})}function $(t,r,a,e){var n=r.datas;n.datas||(n.datas={});var i=M(M({},a),{target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,moveable:t,datas:n.datas,isFirstDrag:!!r.isFirstDrag,stopAble:function(){n.isEventStart=!1},stopDrag:function(){var o;(o=r.stop)===null||o===void 0||o.call(r)}});return n.isStartEvent?e||(n.lastEvent=i):n.isStartEvent=!0,i}function Bt(t,r,a){var e=r.datas,n="isDrag"in a?a.isDrag:r.isDrag;return e.datas||(e.datas={}),M(M({isDrag:n},a),{moveable:t,target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,lastEvent:e.lastEvent,isDouble:r.isDouble,datas:e.datas,isFirstDrag:!!r.isFirstDrag})}function ia(t,r,a){t._emitter.on(r,a)}function W(t,r,a,e){return t.triggerEvent(r,a,e)}function Wt(t,r){return window.getComputedStyle(t,r)}function Fr(t,r,a){var e={},n={};return t.filter(function(i){var o=i.name;if(e[o]||!r.some(function(s){return i[s]}))return!1;if(!a&&i.ableGroup){if(n[i.ableGroup])return!1;n[i.ableGroup]=!0}return e[o]=!0,!0})}function Ra(t,r){return t===r||t==null&&r==null}function ho(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var a=t.length-1,e=0;e<a;++e){var n=t[e];if(!_a(n))return n}return t[a]}function yn(t,r){var a=[],e=[];return t.forEach(function(n,i){var o=r(n,i,t),s=e.indexOf(o),u=a[s]||[];s===-1&&(e.push(o),a.push(u)),u.push(n)}),a}function mo(t,r){var a=[],e={};return t.forEach(function(n,i){var o=r(n,i,t),s=e[o];s||(s=[],e[o]=s,a.push(s)),s.push(n)}),a}function zn(t){return t.reduce(function(r,a){return r.concat(a)},[])}function dr(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.sort(function(a,e){return Math.abs(e)-Math.abs(a)}),t[0]}function Qt(t,r,a){return Rt(Nt(t,a),lr(r,a),a)}function On(t,r){var a,e=t.is3d,n=t.rootMatrix,i=e?4:3;return a=Qt(n,[r.distX,r.distY],i),r.distX=a[0],r.distY=a[1],r}function Nr(t,r,a,e,n){return Y(ht(t,tt(a,r),n),e)}function Gt(t,r,a){return a?"".concat(t/r*100,"%"):"".concat(t,"px")}function Kr(t){return Math.abs(t)<=yt?0:t}function qa(t){return function(r){if(!r.isDragging(t))return"";var a=eo(r,t),e=a.deg;return e?X("view-control-rotation".concat(e)):""}}function Ua(t,r){return r===void 0&&(r=[t]),function(a,e){if(e.isRequest)return r.some(function(i){return e.requestAble===i})?e.parentDirection:!1;var n=e.inputEvent.target;return mt(n,X("direction"))&&(!t||mt(n,X(t)))}}function xo(t){var r={};for(var a in t)r[t[a]]=a;return r}function So(t,r){var a=t.slice(0,r<0?void 0:r),e=t.slice(0,r<0?void 0:r+1),n=t[r]||"",i=r<0?[]:t.slice(r),o=r<0?[]:t.slice(r+1),s=or(a),u=or(e),f=or([n]),v=or(i),c=or(o),l=Sr(s),d=Sr(u),p=Sr(v),g=Sr(c),h=xt(l,p,4);return{transforms:t,beforeFunctionMatrix:l,beforeFunctionMatrix2:d,targetFunctionMatrix:Sr(f),afterFunctionMatrix:p,afterFunctionMatrix2:g,allFunctionMatrix:h,beforeFunctions:s,beforeFunctions2:u,targetFunction:f[0],afterFunctions:v,afterFunctions2:c,beforeFunctionTexts:a,beforeFunctionTexts2:e,targetFunctionText:n,afterFunctionTexts:i,afterFunctionTexts2:o}}function bo(t){return!t||!fr(t)||t instanceof Element?!1:Dt(t)||"length"in t}function ar(t,r){return t?t instanceof Element?t:gr(t)?r?document.querySelector(t):t:Ei(t)?t():"current"in t?t.current:t:null}function ja(t,r){if(!t)return[];var a=bo(t)?[].slice.call(t):[t];return a.reduce(function(e,n){return gr(n)&&r?U(U([],e,!0),[].slice.call(document.querySelectorAll(n)),!0):(Dt(n)?e.push(ja(n,r)):e.push(ar(n,r)),e)},[])}function Do(t,r,a){var e=dt(t,r)/Math.PI*180;return e=a>=0?e:180-e,e=e>=0?e:360+e,e}function Se(t,r){var a=t.rootMatrix,e=t.is3d,n=e?4:3,i=Nt(a,n);return e||(i=Ft(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Bi(i,r)}function Bn(t,r,a,e,n){var i=t[0],o=t[1],s=0,u=0;if(n&&i&&o){var f=dt([0,0],r),v=dt([0,0],e),c=It(r),l=Math.cos(f-v)*c;if(!e[0])u=l,s=u*a;else if(!e[1])s=l,u=s/a;else{var d=e[0]*2*i,p=e[1]*2*o,g=It([d+r[0],p+r[1]])-It([d,p]),h=dt([0,0],[a,1]);s=Math.cos(h)*g,u=Math.sin(h)*g}}else s=e[0]*r[0],u=e[1]*r[1];return[s,u]}function Tn(t,r,a,e){var n,i=a.ratio,o=a.startOffsetWidth,s=a.startOffsetHeight,u=0,f=0,v=e.distX,c=e.distY,l=e.parentDistance,d=e.parentDist,p=e.parentScale,g=a.fixedDirection,h=[0,1].map(function(S){return Math.abs(t[S]-g[S])}),m=[0,1].map(function(S){var E=h[S];return E!==0&&(E=2/E),E});if(d)u=d[0],f=d[1],r&&(u?f||(f=u/i):u=f*i);else if(p)u=(p[0]-1)*o,f=(p[1]-1)*s;else if(l){var x=o*h[0],b=s*h[1],D=It([x,b]);u=l/D*x*m[0],f=l/D*b*m[1]}else{var C=Pt({datas:a,distX:v,distY:c});C=m.map(function(S,E){return C[E]*S}),n=Bn([o,s],C,i,t,r),u=n[0],f=n[1]}return{distWidth:u,distHeight:f}}function ya(t,r){if(r){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var a=t.split(" "),e=a[0],n=a[1],i=ya(e||""),o=ya(n||""),s=M(M({},i),o),u={x:"50%",y:"50%"};return s.x&&(u.x=s.x),s.y&&(u.y=s.y),s.value&&(s.x&&!s.y&&(u.y=s.value),!s.x&&s.y&&(u.x=s.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function Eo(t,r,a){var e=ya(t,!0),n=e.x,i=e.y;return[ct(n,r)||0,ct(i,a)||0]}function Co(t,r,a){var e=t.map(function(i){return Y(i,r)}),n=e.map(function(i){return Or(i,a)});return{prev:e,next:n,result:n.map(function(i){return tt(i,r)})}}function Gn(t,r){return t.length===r.length&&t.every(function(a,e){var n=r[e],i=Dt(a),o=Dt(n);return i&&o?Gn(a,n):!i&&!o?a===n:!1})}var Mo=Tr("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,r){var a=r.datas,e=r.targets,n=r.angle,i=r.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var f="onPinch".concat(e?"Group":"","Start"),v="drag".concat(e?"Group":"","ControlStart"),c=(s===!0?t.controlAbles:u.filter(function(g){return s.indexOf(g.name)>-1})).filter(function(g){return g.canPinch&&g[v]}),l=$(t,r,{});e&&(l.targets=e);var d=W(t,f,l);a.isPinch=d!==!1,a.ables=c;var p=a.isPinch;return p?(c.forEach(function(g){if(i[g.name]=i[g.name]||{},!!g[v]){var h=M(M({},r),{datas:i[g.name],parentRotate:n,isPinch:!0});g[v](t,h)}}),t.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},p):!1},pinch:function(t,r){var a=r.datas,e=r.scale,n=r.distance,i=r.originalDatas,o=r.inputEvent,s=r.targets,u=r.angle;if(a.isPinch){var f=n*(1-1/e),v=$(t,r,{});s&&(v.targets=s);var c="onPinch".concat(s?"Group":"");W(t,c,v);var l=a.ables,d="drag".concat(s?"Group":"","Control");return l.forEach(function(p){p[d]&&p[d](t,M(M({},r),{datas:i[p.name],inputEvent:o,parentDistance:f,parentRotate:u,isPinch:!0}))}),v}},pinchEnd:function(t,r){var a=r.datas,e=r.isPinch,n=r.inputEvent,i=r.targets,o=r.originalDatas;if(a.isPinch){var s="onPinch".concat(i?"Group":"","End"),u=Bt(t,r,{isDrag:e});i&&(u.targets=i),W(t,s,u);var f=a.ables,v="drag".concat(i?"Group":"","ControlEnd");return f.forEach(function(c){c[v]&&c[v](t,M(M({},r),{isDrag:e,datas:o[c.name],inputEvent:n,isPinch:!0}))}),e}},pinchGroupStart:function(t,r){return this.pinchStart(t,M(M({},r),{targets:t.props.targets}))},pinchGroup:function(t,r){return this.pinch(t,M(M({},r),{targets:t.props.targets}))},pinchGroupEnd:function(t,r){return this.pinchEnd(t,M(M({},r),{targets:t.props.targets}))}});function wt(t,r,a){var e=a.originalDatas;e.groupable=e.groupable||{};var n=e.groupable;n.childDatas=n.childDatas||[];var i=n.childDatas;return t.moveables.map(function(o,s){return i[s]=i[s]||{},i[s][r]=i[s][r]||{},M(M({},a),{datas:i[s][r],originalDatas:i[s]})})}function pa(t,r,a,e,n,i,o){var s=!!a.match(/Start$/g),u=!!a.match(/End$/g),f=n.isPinch,v=n.datas,c=wt(t,r.name,n),l=t.moveables,d=c.map(function(p,g){var h=l[g],m=h.state,x=m.gestos,b=p;if(s)b=new vr(o).dragStart(e,p);else{if(x[o]||(x[o]=v.childGestos[g]),!x[o])return;b=Gr(p,m,e,f,i,o)}var D=r[a](h,M(M({},b),{parentFlag:!0}));return u&&(x[o]=null),D});return s&&(v.childGestos=l.map(function(p){return p.state.gestos[o]})),d}function kt(t,r,a,e,n,i){n===void 0&&(n=function(v,c){return c});var o=!!a.match(/End$/g),s=wt(t,r.name,e),u=t.moveables,f=s.map(function(v,c){var l=u[c],d=v;d=n(l,v);var p=r[a](l,M(M({},d),{parentFlag:!0}));return p&&i&&i(l,v,p,c),o&&(l.state.gestos={}),p});return f}var Ro=["left","right","center"],yo=["top","bottom","middle"],Ut={start:"left",end:"right",center:"center"},jt={start:"top",end:"bottom",center:"middle"};function xr(t,r){var a=t.props,e=a.snappable,n=a.bounds,i=a.innerBounds,o=a.verticalGuidelines,s=a.horizontalGuidelines,u=a.snapGridWidth,f=a.snapGridHeight,v=t.state,c=v.guidelines,l=v.enableSnap;return!e||!l||r&&e!==!0&&e.indexOf(r)<0?!1:!!(u||f||n||i||c&&c.length||o&&o.length||s&&s.length)}function Ka(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function zo(t,r){var a=Ka(t),e={};for(var n in a)n in r&&a[n]&&(e[n]=r[n]);return e}function Za(t,r){var a=zo(t,r),e=yo.filter(function(i){return i in a}),n=Ro.filter(function(i){return i in a});return{horizontal:e.map(function(i){return a[i]}),vertical:n.map(function(i){return a[i]})}}function Oo(t,r,a){var e=ht(t,[r.clientLeft,r.clientTop],a);return[r.left+e[0],r.top+e[1]]}function Bo(t){var r=t[0],a=t[1],e=a[0]-r[0],n=a[1]-r[1];Math.abs(e)<At&&(e=0),Math.abs(n)<At&&(n=0);var i=0,o=0,s=0;return e?n?(i=-n/e,o=1,s=i*r[0]-r[1]):(o=1,s=-r[1]):(i=-1,s=r[0]),[i,o,s].map(function(u){return st(u,At)})}function oa(t,r,a,e){var n=t.props,i=ho(e,n.snapThreshold,5);return In(t.state.guidelines,r,a,i)}function In(t,r,a,e){return{vertical:De(t,"vertical",r,e),horizontal:De(t,"horizontal",a,e)}}function To(t,r,a){var e=a[0],n=a[1],i=r[0],o=r[1],s=Y(a,r),u=s[0],f=s[1],v=f>0,c=u>0;u=Kr(u),f=Kr(f);var l={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(u===0&&f===0)return{vertical:l,horizontal:d};var p=oa(t,u?[e]:[],f?[n]:[]),g=p.vertical,h=p.horizontal;g.posInfos.filter(function(G){var w=G.pos;return c?w>=i:w<=i}),h.posInfos.filter(function(G){var w=G.pos;return v?w>=o:w<=o}),g.isSnap=g.posInfos.length>0,h.isSnap=h.posInfos.length>0;var m=za(g),x=m.isSnap,b=m.guideline,D=za(h),C=D.isSnap,S=D.guideline,E=C?S.pos[1]:0,O=x?b.pos[0]:0;if(u===0)C&&(d.isSnap=!0,d.pos=S.pos[1],d.offset=n-d.pos);else if(f===0)x&&(l.isSnap=!0,l.pos=O,l.offset=e-O);else{var R=f/u,z=a[1]-R*e,B=0,y=0,T=!1;x?(y=O,B=R*y+z,T=!0):C&&(B=E,y=(B-z)/R,T=!0),T&&(l.isSnap=!0,l.pos=y,l.offset=e-y,d.isSnap=!0,d.pos=B,d.offset=n-B)}return{vertical:l,horizontal:d}}function be(t,r,a){var e=Za(t.props.snapDirections,r);return oa(t,e.vertical,e.horizontal,a)}function za(t){var r=t.isSnap;if(!r)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var a=t.posInfos[0],e=a.guidelineInfos[0],n=e.offset,i=e.dist,o=e.guideline;return{isSnap:r,offset:n,dist:i,pos:a.pos,guideline:o}}function De(t,r,a,e){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var n=r==="vertical",i=n?0:1,o=a.map(function(u,f){var v=t.map(function(c){var l=c.pos,d=u-l[i];return{offset:d,dist:Math.abs(d),guideline:c}}).filter(function(c){var l=c.guideline,d=c.dist,p=l.type;return!(p!==r||d>e)}).sort(function(c,l){return c.dist-l.dist});return{pos:u,index:f,guidelineInfos:v}}).filter(function(u){return u.guidelineInfos.length>0}).sort(function(u,f){return u.guidelineInfos[0].dist-f.guidelineInfos[0].dist}),s=o.length>0;return{isSnap:s,index:s?o[0].index:-1,posInfos:o}}function Go(t,r,a,e){e===void 0&&(e=1);var n=[];if(a[0]&&a[1])n=[a,[-a[0],a[1]],[a[0],-a[1]]].map(function(s){return vt(r,s)});else if(!a[0]&&!a[1])for(var i=[r[0],r[1],r[3],r[2],r[0]],o=0;o<4;++o)n.push(i[o]),n.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);else t.props.keepRatio?n=[[-1,-1],[-1,1],[1,-1],[1,1],a].map(function(s){return vt(r,s)}):(n=Zi(r,a),n.length>1&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]));return oa(t,n.map(function(s){return s[0]}),n.map(function(s){return s[1]}),e)}function wn(t,r){var a=Math.abs(t.offset),e=Math.abs(r.offset);return t.isBound&&r.isBound?e-a:t.isBound?-1:r.isBound?1:t.isSnap&&r.isSnap?e-a:t.isSnap?-1:r.isSnap||a<yt?1:e<yt?-1:a-e}function Zr(t,r){return t.slice().sort(function(a,e){var n=a.sign[r],i=e.sign[r],o=a.offset[r],s=e.offset[r];if(n){if(!i)return-1}else return 1;return wn({isBound:a.isBound,isSnap:a.isSnap,offset:o},{isBound:e.isBound,isSnap:e.isSnap,offset:s})})[0]}function Io(t,r,a){var e=[];if(a)Math.abs(r[0])!==1||Math.abs(r[1])!==1?e.push([r,[-1,-1]],[r,[-1,1]],[r,[1,-1]],[r,[1,1]]):e.push([r,[t[0],-t[1]]],[r,[-t[0],t[1]]]),e.push([r,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var n=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var u=[o*n[0],s*n[1]];r[0]===u[0]&&r[1]===u[1]||e.push([r,u])})})}else if(t[0]){var i=Math.abs(r[0])===1?[1]:[1,-1];i.forEach(function(o){e.push([[r[0],-1],[o*t[0],-1]],[[r[0],0],[o*t[0],0]],[[r[0],1],[o*t[0],1]])})}else if(t[1]){var i=Math.abs(r[1])===1?[1]:[1,-1];i.forEach(function(s){e.push([[-1,r[1]],[-1,s*t[1]]],[[0,r[1]],[0,s*t[1]]],[[1,r[1]],[1,s*t[1]]])})}return e}function Pn(t,r){var a=pe([r[0][0],r[1][0]]),e=pe([r[0][1],r[1][1]]);return{vertical:a<=t[0],horizontal:e<=t[1]}}function $a(t,r){var a=r[0],e=r[1],n=e[0]-a[0],i=e[1]-a[1];Math.abs(n)<yt&&(n=0),Math.abs(i)<yt&&(i=0);var o,s;if(!n)o=a[0],s=t[0];else if(!i)o=a[1],s=t[1];else{var u=i/n;o=u*(t[0]-a[0])+a[1],s=t[1]}return o-s}function _n(t,r,a,e){return e===void 0&&(e=yt),t.every(function(n){var i=$a(n,r),o=i<=0;return o===a||Math.abs(i)<=e})}function Ee(t,r,a,e,n){return n===void 0&&(n=0),e&&r-n<=t||!e&&t<=a+n?{isBound:!0,offset:e?r-t:a-t}:{isBound:!1,offset:0}}function wo(t,r){var a=r.line,e=r.centerSign,n=r.verticalSign,i=r.horizontalSign,o=r.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,f=s.top,v=s.width,c=s.height,l=[[u,f],[u,f+c]],d=[[u,f],[u+v,f]],p=[[u+v,f],[u+v,f+c]],g=[[u,f+c],[u+v,f+c]];if(_n([[u,f],[u+v,f],[u,f+c],[u+v,f+c]],a,e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var h=Yt(a,o,d,n),m=Yt(a,o,g,n),x=Yt(a,o,l,i),b=Yt(a,o,p,i),D=h.isBound&&m.isBound,C=h.isBound||m.isBound,S=x.isBound&&b.isBound,E=x.isBound||b.isBound,O=dr(h.offset,m.offset),R=dr(x.offset,b.offset),z=[0,0],B=!1,y=!1;return Math.abs(R)<Math.abs(O)?(z=[O,0],B=C,y=D):(z=[0,R],B=E,y=S),{isAllBound:y,isVerticalBound:C,isHorizontalBound:E,isBound:B,offset:z}}function Yt(t,r,a,e,n,i){var o=r[0],s=r[1],u=t[0],f=a[0],v=a[1],c=Kr(v[1]-f[1]),l=Kr(v[0]-f[0]),d=s,p=o,g=-o/s;if(l){if(!c){if(i&&!d)return{isBound:!1,offset:0};if(p){var b=(f[1]-u[1])/g+u[0];return Ee(b,f[0],v[0],e,n)}else{var m=f[1]-u[1],x=Math.abs(m)<=(n||0);return{isBound:x,offset:x?m:0}}}}else{if(i&&!p)return{isBound:!1,offset:0};if(d){var h=g*(f[0]-u[0])+u[1];return Ee(h,f[1],v[1],e,n)}else{var m=f[0]-u[0],x=Math.abs(m)<=(n||0);return{isBound:x,offset:x?m:0}}}return{isBound:!1,offset:0}}function An(t,r,a){return r.map(function(e){var n=wo(t,e),i=n.isBound,o=n.offset,s=n.isVerticalBound,u=n.isHorizontalBound,f=e.multiple,v=Pt({datas:a,distX:o[0],distY:o[1]}).map(function(c,l){return c*(f[l]?2/f[l]:0)});return{sign:f,isBound:i,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:v}})}function Po(t,r,a){var e,n=Ja(t,r,[0,0],!1).map(function(l){return M(M({},l),{multiple:l.multiple.map(function(d){return Math.abs(d)*2})})}),i=An(t,n,a),o=Zr(i,0),s=Zr(i,1),u=0,f=0,v=o.isVerticalBound||s.isVerticalBound,c=o.isHorizontalBound||s.isHorizontalBound;return(v||c)&&(e=ji({datas:a,distX:-o.offset[0],distY:-s.offset[1]}),u=e[0],f=e[1]),{vertical:{isBound:v,offset:u},horizontal:{isBound:c,offset:f}}}function _o(t,r){var a=[],e=t[0],n=t[1];return e&&n?a.push([[0,n*2],t,[-e,n]],[[e*2,0],t,[e,-n]]):e?(a.push([[e*2,0],[e,1],[e,-1]]),r&&a.push([[0,-1],[e,-1],[-e,-1]],[[0,1],[e,1],[-e,1]])):n?(a.push([[0,n*2],[1,n],[-1,n]]),r&&a.push([[-1,0],[-1,n],[-1,-n]],[[1,0],[1,n],[1,-n]])):a.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),a}function Ja(t,r,a,e){var n=t.state,i=n.allMatrix,o=n.is3d,s=qt(i,100,100,o?4:3),u=vt(s,[0,0]);return _o(a,e).map(function(f){var v=f[0],c=f[1],l=f[2],d=[vt(s,c),vt(s,l)],p=Bo(d),g=Pn(u,d),h=g.vertical,m=g.horizontal,x=$a(u,d)<=0;return{multiple:v,centerSign:x,verticalSign:h,horizontalSign:m,lineConstants:p,line:[vt(r,c),vt(r,l)]}})}function Ce(t,r,a,e){var n=e?t.map(function(i){return Or(i,e)}):t;return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].some(function(i){var o=$a(a,i)<=0;return!_n(r,i,o)})}function Ao(t){var r=t[0],a=t[1],e=a[0]-r[0],n=a[1]-r[1];if(!e)return Math.abs(r[0]);if(!n)return Math.abs(r[1]);var i=n/e;return Math.abs((-i*r[0]+r[1])/Math.sqrt(Math.pow(i,2)+1))}function ko(t){var r=t[0],a=t[1],e=a[0]-r[0],n=a[1]-r[1];if(!e)return[r[0],0];if(!n)return[0,r[1]];var i=n/e,o=-i*r[0]+r[1];return[-o/(i+1/i),o/(i*i+1)]}function Fo(t,r,a,e,n){var i=t.props.innerBounds,o=n*Math.PI/180;if(!i)return[];var s=i.left,u=i.top,f=i.width,v=i.height,c=s-e[0],l=s+f-e[0],d=u-e[1],p=u+v-e[1],g=[[c,d],[l,d],[c,p],[l,p]],h=vt(a,[0,0]);if(!Ce(a,g,h,0))return[];var m=[],x=g.map(function(b){return[It(b),dt([0,0],b)]});return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].forEach(function(b){var D=dt([0,0],ko(b)),C=Ao(b);m.push.apply(m,x.filter(function(S){var E=S[0];return E&&C<=E}).map(function(S){var E=S[0],O=S[1],R=Math.acos(E?C/E:0),z=O+R,B=O-R;return[o+z-D,o+B-D]}).reduce(function(S,E){return S.push.apply(S,E),S},[]).filter(function(S){return!Ce(r,g,h,S)}).map(function(S){return st(S*180/Math.PI,yt)}))}),m}function No(t){var r=t.props.innerBounds;if(!r)return{vertical:[],horizontal:[]};var a=t.getRect(),e=a.pos1,n=a.pos2,i=a.pos3,o=a.pos4,s=[e,n,i,o],u=vt(s,[0,0]),f=r.left,v=r.top,c=r.width,l=r.height,d=[[f,v],[f,v+l]],p=[[f,v],[f+c,v]],g=[[f+c,v],[f+c,v+l]],h=[[f,v+l],[f+c,v+l]],m=Ja(t,s,[0,0],!1),x=[],b=[],D={top:!1,bottom:!1,left:!1,right:!1};return m.forEach(function(C){var S=C.line,E=C.lineConstants,O=Pn(u,S),R=O.horizontal,z=O.vertical,B=Yt(S,E,p,z,1,!0),y=Yt(S,E,h,z,1,!0),T=Yt(S,E,d,R,1,!0),G=Yt(S,E,g,R,1,!0);B.isBound&&!D.top&&(x.push(v),D.top=!0),y.isBound&&!D.bottom&&(x.push(v+l),D.bottom=!0),T.isBound&&!D.left&&(b.push(f),D.left=!0),G.isBound&&!D.right&&(b.push(f+c),D.right=!0)}),{horizontal:x,vertical:b}}function Qa(t,r,a){var e=t||{},n=e.position,i=n===void 0?"client":n,o=e.left,s=o===void 0?-1/0:o,u=e.top,f=u===void 0?-1/0:u,v=e.right,c=v===void 0?1/0:v,l=e.bottom,d=l===void 0?1/0:l,p={position:i,left:s,top:f,right:c,bottom:d};return{vertical:Me(p,r,!0),horizontal:Me(p,a,!1)}}function sa(t,r){var a=t.state,e=a.containerClientRect,n=e.clientHeight,i=e.clientWidth,o=e.clientLeft,s=e.clientTop,u=a.snapOffset,f=u.left,v=u.top,c=u.right,l=u.bottom,d=r||t.props.bounds||{},p=d.position||"client",g=p==="css",h=d.left,m=h===void 0?-1/0:h,x=d.top,b=x===void 0?-1/0:x,D=d.right,C=D===void 0?g?-1/0:1/0:D,S=d.bottom,E=S===void 0?g?-1/0:1/0:S;return g&&(C=i+c-f-C,E=n+l-v-E),{left:m+f-o,right:C+f-o,top:b+v-s,bottom:E+v-s}}function Wo(t,r,a){var e=sa(t),n=e.left,i=e.top,o=e.right,s=e.bottom,u=a[0],f=a[1],v=Y(a,r),c=v[0],l=v[1];Math.abs(c)<yt&&(c=0),Math.abs(l)<yt&&(l=0);var d=l>0,p=c>0,g={isBound:!1,offset:0,pos:0},h={isBound:!1,offset:0,pos:0};if(c===0&&l===0)return{vertical:g,horizontal:h};if(c===0)d?s<f&&(h.pos=s,h.offset=f-s):i>f&&(h.pos=i,h.offset=f-i);else if(l===0)p?o<u&&(g.pos=o,g.offset=u-o):n>u&&(g.pos=n,g.offset=u-n);else{var m=l/c,x=a[1]-m*u,b=0,D=0,C=!1;p&&o<=u?(b=m*o+x,D=o,C=!0):!p&&u<=n&&(b=m*n+x,D=n,C=!0),C&&(b<i||b>s)&&(C=!1),C||(d&&s<=f?(b=s,D=(b-x)/m,C=!0):!d&&f<=i&&(b=i,D=(b-x)/m,C=!0)),C&&(g.isBound=!0,g.pos=D,g.offset=u-D,h.isBound=!0,h.pos=b,h.offset=f-b)}return{vertical:g,horizontal:h}}function Me(t,r,a){var e=t[a?"left":"top"],n=t[a?"right":"bottom"],i=Math.min.apply(Math,r),o=Math.max.apply(Math,r),s=[];return e+1>i&&s.push({isBound:!0,offset:i-e,pos:e}),n-1<o&&s.push({isBound:!0,offset:o-n,pos:n}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(u,f){return Math.abs(f.offset)-Math.abs(u.offset)})}function Re(t,r,a){var e=a?t.map(function(n){return Or(n,a)}):t;return e.some(function(n){return n[0]<r.left&&Math.abs(n[0]-r.left)>.1||n[0]>r.right&&Math.abs(n[0]-r.right)>.1||n[1]<r.top&&Math.abs(n[1]-r.top)>.1||n[1]>r.bottom&&Math.abs(n[1]-r.bottom)>.1})}function Ho(t,r,a){var e=It(t),n=Math.sqrt(e*e-r*r)||0;return[n,-n].sort(function(i,o){return Math.abs(i-t[a?0:1])-Math.abs(o-t[a?0:1])}).map(function(i){return dt([0,0],a?[i,r]:[r,i])})}function Lo(t,r,a,e,n){if(!t.props.bounds)return[];var i=n*Math.PI/180,o=sa(t),s=o.left,u=o.top,f=o.right,v=o.bottom,c=s-e[0],l=f-e[0],d=u-e[1],p=v-e[1],g={left:c,top:d,right:l,bottom:p};if(!Re(a,g,0))return[];var h=[];return[[c,0],[l,0],[d,1],[p,1]].forEach(function(m){var x=m[0],b=m[1];a.forEach(function(D){var C=dt([0,0],D);h.push.apply(h,Ho(D,x,b).map(function(S){return i+S-C}).filter(function(S){return!Re(r,g,S)}).map(function(S){return st(S*180/Math.PI,yt)}))})}),h}function Vo(t,r){var a,e=t.direction,n=t.classNames,i=t.size,o=t.pos,s=t.zoom,u=t.key,f=e==="horizontal",v=f?"Y":"X";return r.createElement("div",{key:u,className:n.join(" "),style:(a={},a[f?"width":"height"]="".concat(i),a.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(v,"(-50%) scale").concat(v,"(").concat(s,")"),a)})}function te(t,r){return Vo(M(M({},t),{classNames:U([X("line","guideline",t.direction)],t.classNames,!0).filter(function(a){return a}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(a){return"".concat(st(a,.1),"px")})}),r)}function ye(t,r,a,e,n,i,o,s){var u=t.props.zoom;return a.map(function(f,v){var c=f.type,l=f.pos,d=[0,0];return d[o]=e,d[o?0:1]=-n+l,te({key:"".concat(r,"TargetGuideline").concat(v),classNames:[X("target","bold",c)],posValue:d,sizeValue:i,zoom:u,direction:r},s)})}function ze(t,r,a,e,n,i){var o=t.props,s=o.zoom,u=o.isDisplayInnerSnapDigit,f=r==="horizontal"?Ut:jt,v=n[f.start],c=n[f.end];return a.filter(function(l){var d=l.hide,p=l.elementRect;if(d)return!1;if(u&&p){var g=p.rect;if(g[f.start]<=v&&c<=g[f.end])return!1}return!0}).map(function(l,d){var p=l.pos,g=l.size,h=l.element,m=l.className,x=[-e[0]+p[0],-e[1]+p[1]];return te({key:"".concat(r,"-default-guideline-").concat(d),classNames:h?[X("bold"),m]:[X("normal"),m],direction:r,posValue:x,sizeValue:g,zoom:s},i)})}function Er(t,r,a,e,n,i,o,s){var u,f=t.props,v=f.snapDigit,c=v===void 0?0:v,l=f.isDisplaySnapDigit,d=l===void 0?!0:l,p=f.snapDistFormat,g=p===void 0?function(C,S){return C}:p,h=f.zoom,m=r==="horizontal"?"X":"Y",x=r==="vertical"?"height":"width",b=Math.abs(n),D=d?parseFloat(b.toFixed(c)):0;return s.createElement("div",{key:"".concat(r,"-").concat(a,"-guideline-").concat(e),className:X("guideline-group",r),style:(u={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},u[x]="".concat(b,"px"),u)},te({direction:r,classNames:[X(a),o],size:"100%",posValue:[0,0],sizeValue:b,zoom:h},s),s.createElement("div",{className:X("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(h,")")}},D>0?g(D,r):""))}function Yo(t,r,a,e){var n=t==="vertical"?0:1,i=t==="vertical"?1:0,o=n?Ut:jt,s=a[o.start],u=a[o.end];return yn(r,function(f){return f.pos[n]}).map(function(f){var v=[],c=[],l=[];return f.forEach(function(d){var p,g,h=d.element,m=d.elementRect.rect;if(m[o.end]<s)v.push(d);else if(u<m[o.start])c.push(d);else if(m[o.start]<=s&&u<=m[o.end]&&e){var x=d.pos,b={element:h,rect:M(M({},m),(p={},p[o.end]=m[o.start],p))},D={element:h,rect:M(M({},m),(g={},g[o.start]=m[o.end],g))},C=[0,0],S=[0,0];C[n]=x[n],C[i]=x[i],S[n]=x[n],S[i]=x[i]+d.size,v.push({type:t,pos:C,size:0,elementRect:b}),c.push({type:t,pos:S,size:0,elementRect:D})}}),v.sort(function(d,p){return p.pos[i]-d.pos[i]}),c.sort(function(d,p){return d.pos[i]-p.pos[i]}),{total:f,start:v,end:c,inner:l}})}function Xo(t,r,a,e,n){var i=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var u=r.filter(function(h){return h.type===s}),f=s==="vertical"?1:0,v=f?0:1,c=Yo(s,u,e,i),l=f?jt:Ut,d=f?Ut:jt,p=e[l.start],g=e[l.end];c.forEach(function(h){var m=h.total,x=h.start,b=h.end,D=h.inner,C=a[v]+m[0].pos[v]-e[d.start],S=e;x.forEach(function(E){var O=E.elementRect.rect,R=S[l.start]-O[l.end];if(R>0){var z=[0,0];z[f]=a[f]+S[l.start]-p-R,z[v]=C,o.push(Er(t,s,"dashed",o.length,R,z,E.className,n))}S=O}),S=e,b.forEach(function(E){var O=E.elementRect.rect,R=O[l.start]-S[l.end];if(R>0){var z=[0,0];z[f]=a[f]+S[l.end]-p,z[v]=C,o.push(Er(t,s,"dashed",o.length,R,z,E.className,n))}S=O}),D.forEach(function(E){var O=E.elementRect.rect,R=p-O[l.start],z=O[l.end]-g,B=[0,0],y=[0,0];B[f]=a[f]-R,B[v]=C,y[f]=a[f]+g-p,y[v]=C,o.push(Er(t,s,"dashed",o.length,R,B,E.className,n)),o.push(Er(t,s,"dashed",o.length,z,y,E.className,n))})})}),o}function qo(t,r,a,e,n){var i=[];return["horizontal","vertical"].forEach(function(o){var s=r.filter(function(h){return h.type===o}).slice(0,1),u=o==="vertical"?0:1,f=u?0:1,v=u?jt:Ut,c=u?Ut:jt,l=e[v.start],d=e[v.end],p=e[c.start],g=e[c.end];s.forEach(function(h){var m=h.gap,x=h.gapRects,b=Math.max.apply(Math,U([p],x.map(function(S){var E=S.rect;return E[c.start]}),!1)),D=Math.min.apply(Math,U([g],x.map(function(S){var E=S.rect;return E[c.end]}),!1)),C=(b+D)/2;b===D||C===(p+g)/2||x.forEach(function(S){var E=S.rect,O=S.className,R=[a[0],a[1]];if(E[v.end]<l)R[u]+=E[v.end]-l;else if(d<E[v.start])R[u]+=E[v.start]-l-m;else return;R[f]+=C-p,i.push(Er(t,u?"vertical":"horizontal","gap",i.length,m,R,O,n))})})}),i}function Uo(t,r,a,e){var n=r[0]-t[0],i=r[1]-t[1];if(Math.abs(n)<At&&(n=0),Math.abs(i)<At&&(i=0),!n)return e?[0,0]:[0,a];if(!i)return e?[a,0]:[0,0];var o=i/n,s=t[1]-o*t[0];if(e){var u=o*(r[0]+a)+s;return[a,u-r[1]]}else{var f=(r[1]+a-s)/o;return[f-r[0],a]}}function Oa(t,r,a,e,n){var i=Uo(t,r,a,e);if(!i)return{isOutside:!1,offset:[0,0]};var o=_t(t,r),s=_t(i,t),u=_t(i,r),f=s>o||u>o,v=Pt({datas:n,distX:i[0],distY:i[1]}),c=v[0],l=v[1];return{offset:[c,l],isOutside:f}}function $r(t,r){return t.isBound?t.offset:r.isSnap?za(r).offset:0}function jo(t,r,a,e,n){var i=r[0],o=r[1],s=a[0],u=a[1],f=e[0],v=e[1],c=n[0],l=n[1],d=-c,p=-l;if(t&&i&&o){d=0,p=0;var g=[];if(s&&u?g.push([0,l],[c,0]):s?g.push([c,0]):u?g.push([0,l]):f&&v?g.push([0,l],[c,0]):f?g.push([c,0]):v&&g.push([0,l]),g.length){g.sort(function(b,D){return It(Y([i,o],b))-It(Y([i,o],D))});var h=g[0];if(h[0]&&Math.abs(i)>At)d=-h[0],p=o*Math.abs(i+d)/Math.abs(i)-o;else if(h[1]&&Math.abs(o)>At){var m=o;p=-h[1],d=i*Math.abs(o+p)/Math.abs(m)-i}if(t&&u&&s)if(Math.abs(d)>At&&Math.abs(d)<Math.abs(c)){var x=Math.abs(c)/Math.abs(d);d*=x,p*=x}else if(Math.abs(p)>At&&Math.abs(p)<Math.abs(l)){var x=Math.abs(l)/Math.abs(p);d*=x,p*=x}else d=dr(-c,d),p=dr(-l,p)}}else d=i||s?-c:0,p=o||u?-l:0;return[d,p]}function Ko(t,r,a,e,n,i){if(!xr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=Xa(i.absolutePoses,[r,a]),s=Tt(o),u=s.left,f=s.right,v=s.top,c=s.bottom,l={horizontal:o.map(function(G){return G[1]}),vertical:o.map(function(G){return G[0]})},d=Ka(t.props.snapDirections),p=Za(d,{left:u,right:f,top:v,bottom:c,center:(u+f)/2,middle:(v+c)/2}),g=ua(t,n,p,l),h=g.vertical,m=g.horizontal,x=Po(t,o,i),b=x.vertical,D=x.horizontal,C=h.isSnap,S=m.isSnap,E=h.isBound||b.isBound,O=m.isBound||D.isBound,R=dr(h.offset,b.offset),z=dr(m.offset,D.offset),B=jo(e,[r,a],[E,O],[C,S],[R,z]),y=B[0],T=B[1];return[{isBound:E,isSnap:C,offset:y},{isBound:O,isSnap:S,offset:T}]}function ua(t,r,a,e){e===void 0&&(e=a);var n=Qa(sa(t),e.vertical,e.horizontal),i=n.horizontal,o=n.vertical,s=r?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:oa(t,a.vertical,a.horizontal),u=s.horizontal,f=s.vertical,v=$r(i[0],u),c=$r(o[0],f),l=Math.abs(v),d=Math.abs(c);return{horizontal:{isBound:i[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:v,dist:l,bounds:i,snap:u},vertical:{isBound:o[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:c,dist:d,bounds:o,snap:f}}}function Oe(t,r,a,e,n){var i=Qa(r,a,e),o=i.horizontal,s=i.vertical,u=In(t,a,e,n),f=u.horizontal,v=u.vertical,c=$r(o[0],f),l=$r(s[0],v),d=Math.abs(c),p=Math.abs(l);return{horizontal:{isBound:o[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:c,dist:d,bounds:o,snap:f},vertical:{isBound:s[0].isBound,isSnap:v.isSnap,snapIndex:v.index,offset:l,dist:p,bounds:s,snap:v}}}function Zo(t,r,a,e){var n=dt(t,r)/Math.PI*180,i=a.vertical,o=i.isBound,s=i.isSnap,u=i.dist,f=a.horizontal,v=f.isBound,c=f.isSnap,l=f.dist,d=n%180,p=d<3||d>177,g=d>87&&d<93;return l<u&&(o||s&&!g&&(!e||!p))?"vertical":v||c&&!p&&(!e||!g)?"horizontal":""}function $o(t,r,a,e,n,i){return a.map(function(o){var s=o[0],u=o[1],f=vt(r,s),v=vt(r,u),c=e?Jo(t,f,v,n):ua(t,n,{vertical:[v[0]],horizontal:[v[1]]}),l=c.horizontal,d=l.offset,p=l.isBound,g=l.isSnap,h=c.vertical,m=h.offset,x=h.isBound,b=h.isSnap,D=Y(u,s);if(!m&&!d)return{isBound:x||p,isSnap:b||g,sign:D,offset:[0,0]};var C=Zo(f,v,c,e);if(!C)return{sign:D,isBound:!1,isSnap:!1,offset:[0,0]};var S=C==="vertical",E=[0,0];return!e&&Math.abs(u[0])===1&&Math.abs(u[1])===1&&s[0]!==u[0]&&s[1]!==u[1]?E=Pt({datas:i,distX:-m,distY:-d}):E=Oa(f,v,-(S?m:d),S,i).offset,E=E.map(function(O,R){return O*(D[R]?2/D[R]:0)}),{sign:D,isBound:S?x:p,isSnap:S?b:g,offset:E}})}function Be(t,r){return t.isBound?t.offset:r.isSnap?r.offset:0}function Jo(t,r,a,e){var n=Wo(t,r,a),i=n.horizontal,o=n.vertical,s=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:To(t,r,a),u=s.horizontal,f=s.vertical,v=Be(i,u),c=Be(o,f),l=Math.abs(v),d=Math.abs(c);return{horizontal:{isBound:i.isBound,isSnap:u.isSnap,offset:v,dist:l},vertical:{isBound:o.isBound,isSnap:f.isSnap,offset:c,dist:d}}}function Qo(t,r,a,e,n){var i=[-a[0],-a[1]],o=t.state,s=o.width,u=o.height,f=t.props.bounds,v=1/0,c=1/0;if(f){var l=[[a[0],-a[1]],[-a[0],a[1]]],d=f.left,p=d===void 0?-1/0:d,g=f.top,h=g===void 0?-1/0:g,m=f.right,x=m===void 0?1/0:m,b=f.bottom,D=b===void 0?1/0:b;l.forEach(function(C){var S=C[0]!==i[0],E=C[1]!==i[1],O=vt(r,C),R=dt(e,O)*360/Math.PI;if(E){var z=O.slice();(Math.abs(R-360)<2||Math.abs(R-180)<2)&&(z[1]=e[1]);var B=Oa(e,z,(e[1]<O[1]?D:h)-O[1],!1,n),y=B.offset,T=y[1],G=B.isOutside;isNaN(T)||(c=u+(G?1:-1)*Math.abs(T))}if(S){var z=O.slice();(Math.abs(R-90)<2||Math.abs(R-270)<2)&&(z[0]=e[0]);var w=Oa(e,z,(e[0]<O[0]?x:p)-O[0],!0,n),P=w.offset[0],F=w.isOutside;isNaN(P)||(v=s+(F?1:-1)*Math.abs(P))}})}return{maxWidth:v,maxHeight:c}}function Ba(t){var r=t.state,a=r.containerClientRect,e=r.hasFixed,n=a.overflow,i=a.scrollHeight,o=a.scrollWidth,s=a.clientHeight,u=a.clientWidth,f=a.clientLeft,v=a.clientTop,c=t.props,l=c.snapGap,d=l===void 0?!0:l,p=c.verticalGuidelines,g=c.horizontalGuidelines,h=c.snapThreshold,m=h===void 0?5:h,x=c.snapGridWidth,b=x===void 0?0:x,D=c.snapGridHeight,C=D===void 0?0:D,S=c.maxSnapElementGuidelineDistance,E=S===void 0?1/0:S,O=Tt(Ot(t.state)),R=O.top,z=O.left,B=O.bottom,y=O.right,T={top:R,left:z,bottom:B,right:y,center:(z+y)/2,middle:(R+B)/2},G=as(t),w=U([],G,!0);d&&w.push.apply(w,ts(t,T,m)),w.push.apply(w,rs(b,C,n?o:u,n?i:s,f,v));var P=M({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(e){var F=a.left,_=a.top;P.left+=F,P.top+=_,P.right+=F,P.bottom+=_}return w.push.apply(w,Fn(g||!1,p||!1,n?o:u,n?i:s,f,v,P)),w=w.filter(function(A){var I=A.element,k=A.elementRect,j=A.type;if(!I||!k)return!0;var K=k.rect;return kn(T,K,j,E)}),w}function ts(t,r,a){var e=t.props,n=e.maxSnapElementGuidelineDistance,i=n===void 0?1/0:n,o=e.maxSnapElementGapDistance,s=o===void 0?1/0:o,u=t.state.elementRects,f=[];return[["vertical",Ut,jt],["horizontal",jt,Ut]].forEach(function(v){var c=v[0],l=v[1],d=v[2],p=r[l.start],g=r[l.end],h=r[l.center],m=r[d.start],x=r[d.end];function b(S){var E=S.rect;return E[l.end]<p+a?p-E[l.end]:g-a<E[l.start]?E[l.start]-g:-1}var D=u.filter(function(S){var E=S.rect;return E[d.start]>x||E[d.end]<m?!1:b(S)>0}).sort(function(S,E){return b(S)-b(E)}),C=[];D.forEach(function(S){D.forEach(function(E){if(S!==E){var O=S.rect,R=E.rect,z=O[d.start],B=O[d.end],y=R[d.start],T=R[d.end];z>T||y>B||C.push([S,E])}})}),C.forEach(function(S){var E=S[0],O=S[1],R=E.rect,z=O.rect,B=R[l.start],y=R[l.end],T=z[l.start],G=z[l.end],w=0,P=0,F=!1,_=!1,A=!1;if(y<=p&&g<=T){if(_=!0,w=(T-y-(g-p))/2,P=y+w+(g-p)/2,Math.abs(P-h)>a)return}else if(y<T&&G<p+a){if(F=!0,w=T-y,P=G+w,Math.abs(P-p)>a)return}else if(y<T&&g-a<B){if(A=!0,w=T-y,P=B-w,Math.abs(P-g)>a)return}else return;w&&kn(r,z,c,i)&&(w>s||f.push({type:c,pos:c==="vertical"?[P,0]:[0,P],element:O.element,size:0,className:O.className,isStart:F,isCenter:_,isEnd:A,gap:w,hide:!0,gapRects:[E,O]}))})}),f}function rs(t,r,a,e,n,i){n===void 0&&(n=0),i===void 0&&(i=0);var o=[];if(r)for(var s=0;s<=e;s+=r)o.push({type:"horizontal",pos:[0,st(s-i,.1)],size:a,hide:!0});if(t)for(var s=0;s<=a;s+=t)o.push({type:"vertical",pos:[st(s-n,.1),0],size:e,hide:!0});return o}function kn(t,r,a,e){return a==="horizontal"?Math.abs(t.right-r.left)<=e||Math.abs(t.left-r.right)<=e||t.left<=r.right&&r.left<=t.right:a==="vertical"?Math.abs(t.bottom-r.top)<=e||Math.abs(t.top-r.bottom)<=e||t.top<=r.bottom&&r.top<=t.bottom:!0}function as(t){var r=t.state,a=t.props.elementGuidelines,e=a===void 0?[]:a;if(!e.length)return r.elementRects=[],[];var n=(r.elementRects||[]).filter(function(l){return!l.refresh}),i=e.map(function(l){return fr(l)&&"element"in l?M(M({},l),{element:ar(l.element,!0)}):{element:ar(l,!0)}}).filter(function(l){return l.element}),o=pi(n.map(function(l){return l.element}),i.map(function(l){return l.element})),s=o.maintained,u=o.added,f=[];s.forEach(function(l){var d=l[0],p=l[1];f[p]=n[d]}),es(t,u.map(function(l){return i[l]})).map(function(l,d){f[u[d]]=l}),r.elementRects=f;var v=Ka(t.props.elementSnapDirections),c=[];return f.forEach(function(l){var d=l.element,p=l.top,g=p===void 0?v.top:p,h=l.left,m=h===void 0?v.left:h,x=l.right,b=x===void 0?v.right:x,D=l.bottom,C=D===void 0?v.bottom:D,S=l.center,E=S===void 0?v.center:S,O=l.middle,R=O===void 0?v.middle:O,z=l.className,B=l.rect,y=Za({top:g,right:b,left:m,bottom:C,center:E,middle:R},B),T=y.horizontal,G=y.vertical,w=B.top,P=B.left,F=B.right-P,_=B.bottom-w,A=[F,_];G.forEach(function(I){c.push({type:"vertical",element:d,pos:[st(I,.1),w],size:_,sizes:A,className:z,elementRect:l})}),T.forEach(function(I){c.push({type:"horizontal",element:d,pos:[P,st(I,.1)],size:F,sizes:A,className:z,elementRect:l})})}),c}function Fn(t,r,a,e,n,i,o){n===void 0&&(n=0),i===void 0&&(i=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var s=[],u=o.left,f=o.top,v=o.bottom,c=o.right,l=a+c-u,d=e+v-f;return t&&t.forEach(function(p){var g=fr(p)?p:{pos:p};s.push({type:"horizontal",pos:[u,st(g.pos-i+f,.1)],size:l,className:g.className})}),r&&r.forEach(function(p){var g=fr(p)?p:{pos:p};s.push({type:"vertical",pos:[st(g.pos-n+u,.1),f],size:d,className:g.className})}),s}function es(t,r){if(!r.length)return[];var a=t.state,e=a.containerClientRect,n=a.targetClientRect,i=n.top,o=n.left,s=a.rootMatrix,u=a.is3d,f=u?4:3,v=Oo(s,e,f),c=v[0],l=v[1],d=Ot(a),p=cr(d),g=p.minX,h=p.minY,m=Y([g,h],Qt(s,[o-c,i-l],f)).map(function(D){return go(D)}),x=m[0],b=m[1];return r.map(function(D){var C=D.element.getBoundingClientRect(),S=C.left-c,E=C.top-l,O=E+C.height,R=S+C.width,z=Qt(s,[S,E],f),B=z[0],y=z[1],T=Qt(s,[R,O],f),G=T[0],w=T[1];return M(M({},D),{rect:{left:B+x,right:G+x,top:y+b,bottom:w+b,center:(B+G)/2+x,middle:(y+w)/2+b}})})}function Wr(t){var r=t.state,a=r.container,e=t.props.snapContainer||a;if(r.snapContainer===e&&r.guidelines&&r.guidelines.length)return!1;var n=r.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(a!==e){var o=ar(e,!0);if(o){var s=Dr(o),u=Se(r,[s.left-n.left,s.top-n.top]),f=Se(r,[s.right-n.right,s.bottom-n.bottom]);i.left=st(u[0],1e-5),i.top=st(u[1],1e-5),i.right=st(f[0],1e-5),i.bottom=st(f[1],1e-5)}}return r.snapContainer=e,r.snapOffset=i,r.guidelines=Ba(t),r.enableSnap=!0,!0}function Nn(t,r,a,e,n,i){var o=qt(t,r,a,i?4:3),s=vt(o,e);return Xa(o,Y(n,s))}function ns(t,r,a,e,n,i){var o=i.fixedDirection,s=Io(a,o,e),u=Ja(t,r,a,e),f=U(U([],$o(t,r,s,e,n,i),!0),An(t,u,i),!0),v=Zr(f,0),c=Zr(f,1);return{width:{isBound:v.isBound,offset:v.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function is(t,r,a,e,n,i,o,s,u){var f=vt(r,o),v=ua(t,s,{vertical:[f[0]],horizontal:[f[1]]}),c=v.horizontal.offset,l=v.vertical.offset;if(st(l,Da)||st(c,Da)){var d=Pt({datas:u,distX:-l,distY:-c}),p=d[0],g=d[1],h=Math.min(n||1/0,a+o[0]*p),m=Math.min(i||1/0,e+o[1]*g);return[h-a,m-e]}return[0,0]}function Wn(t,r,a,e,n,i,o,s){for(var u=Ot(t.state),f=t.props.keepRatio,v=0,c=0,l=0;l<2;++l){var d=r(v,c),p=ns(t,d,n,f,o,s),g=p.width,h=p.height,m=g.isBound,x=h.isBound,b=g.offset,D=h.offset;if(l===1&&(m||(b=0),x||(D=0)),l===0&&o&&!m&&!x)return[0,0];if(f){var C=Math.abs(b)*(a?1/a:1),S=Math.abs(D)*(e?1/e:1),E=m&&x?C<S:x||!m&&C<S;E?b=a*D/e:D=e*b/a}v+=b,c+=D}if(n[0]&&n[1]){var O=Qo(t,u,n,i,s),R=O.maxWidth,z=O.maxHeight,B=is(t,r(v,c).map(function(G){return G.map(function(w){return st(w,Da)})}),a+v,e+c,R,z,n,o,s),b=B[0],D=B[1];v+=b,c+=D}return[v,c]}function os(t,r,a){if(!xr(t,"rotatable"))return{isSnap:!1,rotation:a};var e=r.pos1,n=r.pos2,i=r.pos3,o=r.pos4,s=r.origin,u=a*Math.PI/180,f=[e,n,i,o].map(function(d){return Y(d,s)}),v=f.map(function(d){return Or(d,u)}),c=U(U([],Lo(t,f,v,s,a),!0),Fo(t,f,v,s,a),!0);c.sort(function(d,p){return Math.abs(d-a)-Math.abs(p-a)});var l=c.length>0;return{isSnap:l,rotation:l?c[0]:a}}function ss(t,r,a,e,n,i,o){if(!xr(t,"resizable"))return[0,0];var s=o.fixedDirection,u=o.nextAllMatrix,f=t.state,v=f.allMatrix,c=f.is3d;return Wn(t,function(l,d){return Nn(u||v,r+l,a+d,s,n,c)},r,a,e,n,i,o)}function us(t,r,a,e,n){if(!xr(t,"scalable"))return[0,0];var i=n.startOffsetWidth,o=n.startOffsetHeight,s=n.fixedPosition,u=n.fixedDirection,f=n.is3d,v=Wn(t,function(c,l){return Nn(Qi(n,tt(r,[c/i,l/o])),i,o,u,s,f)},i,o,a,s,e,n);return[v[0]/i,v[1]/o]}function fs(t,r){r.absolutePoses=Ot(t.state)}function Te(t){var r=[];return t.forEach(function(a){a.guidelineInfos.forEach(function(e){var n=e.guideline;r.indexOf(n)>-1||r.push(n)})}),r}function Ge(t,r,a,e,n,i){var o=Qa(sa(t,i),r,a),s=o.vertical,u=o.horizontal;s.forEach(function(l){l.isBound&&e.push({type:"bounds",pos:l.pos})}),u.forEach(function(l){l.isBound&&n.push({type:"bounds",pos:l.pos})});var f=No(t),v=f.vertical,c=f.horizontal;v.forEach(function(l){Mr(e,function(d){var p=d.type,g=d.pos;return p==="bounds"&&g===l})>=0||e.push({type:"bounds",pos:l})}),c.forEach(function(l){Mr(n,function(d){var p=d.type,g=d.pos;return p==="bounds"&&g===l})>=0||n.push({type:"bounds",pos:l})})}var ls=Ua("",["resizable","scalable"]),cs={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,snapRenderThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[`:host {
    --bounds-color: #d66;
}
.guideline {
    pointer-events: none;
    z-index: 2;
}
.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}
.guideline-group {
    position: absolute;
    top: 0;
    left: 0;
}
.guideline-group .size-value {
    position: absolute;
    color: #f55;
    font-size: 12px;
    font-weight: bold;
}
.guideline-group.horizontal .size-value {
    transform-origin: 50% 100%;
    transform: translateX(-50%);
    left: 50%;
    bottom: 5px;
}
.guideline-group.vertical .size-value {
    transform-origin: 0% 50%;
    top: 50%;
    transform: translateY(-50%);
    left: 5px;
}
.guideline.gap {
    background: #f55;
}
.size-value.gap {
    color: #f55;
}
`],render:function(t,r){var a=t.state,e=a.top,n=a.left,i=a.pos1,o=a.pos2,s=a.pos3,u=a.pos4,f=a.snapRenderInfo,v=t.props.snapRenderThreshold,c=v===void 0?1:v;if(!f||!f.render||!xr(t,""))return[];a.guidelines=Ba(t);var l=Math.min(i[0],o[0],s[0],u[0]),d=Math.min(i[1],o[1],s[1],u[1]),p=f.externalPoses||[],g=Ot(t.state),h=[],m=[],x=[],b=[],D=[],C=Tt(g),S=C.width,E=C.height,O=C.top,R=C.left,z=C.bottom,B=C.right,y={left:R,right:B,top:O,bottom:z,center:(R+B)/2,middle:(O+z)/2},T=p.length>0,G=T?Tt(p):{};if(!f.request){if(f.direction&&D.push(Go(t,g,f.direction,c)),f.snap){var w=Tt(g);f.center&&(w.middle=(w.top+w.bottom)/2,w.center=(w.left+w.right)/2),D.push(be(t,w,c))}T&&(f.center&&(G.middle=(G.top+G.bottom)/2,G.center=(G.left+G.right)/2),D.push(be(t,G,c))),D.forEach(function(A){var I=A.vertical.posInfos,k=A.horizontal.posInfos;h.push.apply(h,I.filter(function(j){var K=j.guidelineInfos;return K.some(function(q){var N=q.guideline;return!N.hide})}).map(function(j){return{type:"snap",pos:j.pos}})),m.push.apply(m,k.filter(function(j){var K=j.guidelineInfos;return K.some(function(q){var N=q.guideline;return!N.hide})}).map(function(j){return{type:"snap",pos:j.pos}})),x.push.apply(x,Te(I)),b.push.apply(b,Te(k))})}Ge(t,[R,B],[O,z],h,m),T&&Ge(t,[G.left,G.right],[G.top,G.bottom],h,m,f.externalBounds);var P=U(U([],x,!0),b,!0),F=P.filter(function(A){return A.element&&!A.gapRects}),_=P.filter(function(A){return A.gapRects}).sort(function(A,I){return A.gap-I.gap});return W(t,"onSnap",{guidelines:P.filter(function(A){var I=A.element;return!I}),elements:F,gaps:_},!0),U(U(U(U(U(U([],Xo(t,F,[l,d],y,r),!0),qo(t,_,[l,d],y,r),!0),ze(t,"horizontal",b,[n,e],y,r),!0),ze(t,"vertical",x,[n,e],y,r),!0),ye(t,"horizontal",m,l,e,S,0,r),!0),ye(t,"vertical",h,d,n,E,1,r),!0)},dragStart:function(t,r){t.state.snapRenderInfo={request:r.isRequest,snap:!0,center:!0},Wr(t)},drag:function(t){var r=t.state;Wr(t)||(r.guidelines=Ba(t)),r.snapRenderInfo&&(r.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,r){if(ls(t,r)||Ga(t,r))return!0;if(!r.isRequest&&r.inputEvent)return mt(r.inputEvent.target,X("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Wr(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,r){this.dragStart(t,r)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Wr(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var r=t.state;r.enableSnap=!1,r.guidelines=[],r.snapRenderInfo=null,r.elementRects=[]}};function Hn(t,r,a,e){var n=t.getState(),i=n.renderPoses,o=n.rotation,s=n.direction,u=rr(t.props,r).zoom,f=s>0?1:-1,v=o/Math.PI*180,c={},l=t.renderState;l.renderDirectionMap||(l.renderDirectionMap={});var d=l.renderDirectionMap;return a.forEach(function(p){var g=p.dir;c[g]=!0}),a.map(function(p){var g=p.data,h=p.classNames,m=p.dir,x=Ha[m];if(!x||!c[m])return null;d[m]=!0;var b=(st(v,15)+f*nn[m]+720)%180,D={};return hr(g).forEach(function(C){D["data-".concat(C)]=g[C]}),e.createElement("div",M({className:X.apply(void 0,U(["control","direction",m,r],h,!1)),"data-rotation":b,"data-direction":m},D,{key:"direction-".concat(m),style:Ya.apply(void 0,U([o,u],x.map(function(C){return i[C]}),!1))}))})}function Ln(t,r,a,e){var n=rr(t.props,a).renderDirections,i=n===void 0?r:n;if(!i)return[];var o=i===!0?Wa:i;return Hn(t,a,o.map(function(s){return{data:{},classNames:[],dir:s}}),e)}function vs(t,r){var a=t.renderState;a.renderDirectionMap||(a.renderDirectionMap={});var e=t.getState(),n=e.renderPoses,i=e.rotation,o=e.direction,s=a.renderDirectionMap,u=t.props.zoom,f=o>0?1:-1,v=i/Math.PI*180;return hr(s).map(function(c){var l=Ha[c];if(!l)return null;var d=(st(v,15)+f*nn[c]+720)%180;return r.createElement("div",{className:X("around-control"),"data-rotation":d,"data-direction":c,key:"direction-around-".concat(c),style:Ya.apply(void 0,U([i,u],l.map(function(p){return n[p]}),!1))})})}function zr(t,r,a,e,n,i){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var u=dt(a,e),f=r?st(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(i),className:X.apply(void 0,U(["line","direction",r?"edge":"",r],o,!1)),"data-rotation":f,"data-line-key":i,"data-direction":r,style:br(a,e,n,u)})}function Vn(t,r,a,e,n){var i=a===!0?Vi:a;return i.map(function(o,s){var u=Ha[o],f=u[0],v=u[1];if(v!=null)return zr(t,o,e[f],e[v],n,"".concat(r,"Edge").concat(s),r)}).filter(Boolean)}function Yn(t){return function(r,a){var e=rr(r.props,t).edge;return e&&(e===!0||e.length)?U(U([],Vn(a,t,e,r.getState().renderPoses,r.props.zoom),!0),ds(r,t,a),!0):Xn(r,t,a)}}function Xn(t,r,a){return Ln(t,Wa,r,a)}function ds(t,r,a){return Ln(t,["nw","ne","sw","se"],r,a)}var Ct={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},requestStyle:function(){return["left","top","right","bottom"]},render:function(t,r){var a=t.props,e=a.throttleDragRotate,n=a.zoom,i=t.getState(),o=i.dragInfo,s=i.beforeOrigin;if(!e||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var f=It(u),v=dt(u,[0,0]);return[r.createElement("div",{className:X("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(s[0],"px, ").concat(s[1],"px) rotate(").concat(v,"rad) scaleY(").concat(n,")")}})]},dragStart:function(t,r){var a=r.datas,e=r.parentEvent,n=r.parentGesto,i=t.state,o=i.gestos,s=i.style;if(o.draggable)return!1;o.draggable=n||t.targetGesto,a.datas={},a.left=parseFloat(s.left||"")||0,a.top=parseFloat(s.top||"")||0,a.bottom=parseFloat(s.bottom||"")||0,a.right=parseFloat(s.right||"")||0,a.startValue=[0,0],er(t,r),ea(r,"translate"),fs(t,a),a.prevDist=[0,0],a.prevBeforeDist=[0,0],a.isDrag=!1,a.deltaOffset=[0,0];var u=$(t,r,M({set:function(v){a.startValue=v}},aa(r))),f=e||W(t,"onDragStart",u);return f!==!1?(a.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,a.isPinch=!1),a.isDrag?u:!1},drag:function(t,r){if(r){ta(r,"translate");var a=r.datas,e=r.parentEvent,n=r.parentFlag,i=r.isPinch,o=r.isRequest,s=r.deltaOffset,u=r.distX,f=r.distY,v=a.isDrag,c=a.prevDist,l=a.prevBeforeDist,d=a.startValue;if(v){s&&(u+=s[0],f+=s[1]);var p=t.props,g=p.parentMoveable,h=e?0:p.throttleDrag||0,m=e?0:p.throttleDragRotate||0,x=0,b=!1,D=!1,C=!1,S=!1;if(!e&&m>0&&(u||f)){var E=p.startDragRotate||0,O=st(E+dt([0,0],[u,f])*180/Math.PI,m)-E,R=f*Math.abs(Math.cos((O-90)/180*Math.PI)),z=u*Math.abs(Math.cos(O/180*Math.PI)),B=It([z,R]);x=O*Math.PI/180,u=B*Math.cos(x),f=B*Math.sin(x)}if(!i&&!e&&!n){var y=Ko(t,u,f,m,o||s,a),T=y[0],G=y[1];b=T.isSnap,D=T.isBound,C=G.isSnap,S=G.isBound;var w=T.offset,P=G.offset;u+=w,f+=P}var F=tt(un({datas:a,distX:u,distY:f}),d),_=tt(Ui({datas:a,distX:u,distY:f}),d);ce(_,yt),ce(F,yt),m||(!b&&!D&&(_[0]=st(_[0],h),F[0]=st(F[0],h)),!C&&!S&&(_[1]=st(_[1],h),F[1]=st(F[1],h)));var A=Y(F,d),I=Y(_,d),k=Y(I,c),j=Y(A,l);a.prevDist=I,a.prevBeforeDist=A,a.passDelta=k,a.passDist=I;var K=a.left+A[0],q=a.top+A[1],N=a.right-A[0],H=a.bottom-A[1],Z=ra(a,"translate(".concat(_[0],"px, ").concat(_[1],"px)"),"translate(".concat(I[0],"px, ").concat(I[1],"px)"));if(La(r,Z),t.state.dragInfo.dist=e?[0,0]:I,!(!e&&!g&&k.every(function(et){return!et})&&j.some(function(et){return!et}))){var J=t.state,at=J.width,L=J.height,V=$(t,r,M({transform:Z,dist:I,delta:k,translate:_,beforeDist:A,beforeDelta:j,beforeTranslate:F,left:K,top:q,right:N,bottom:H,width:at,height:L,isPinch:i},Mt({transform:Z},r)));return!e&&W(t,"onDrag",V),V}}}},dragAfter:function(t,r){var a=r.datas,e=a.deltaOffset;return e[0]||e[1]?(a.deltaOffset=[0,0],this.drag(t,M(M({},r),{deltaOffset:e}))):!1},dragEnd:function(t,r){var a=r.parentEvent,e=r.datas;if(t.state.dragInfo=null,!!e.isDrag){e.isDrag=!1;var n=Bt(t,r,{});return!a&&W(t,"onDragEnd",n),n}},dragGroupStart:function(t,r){var a=r.datas,e=r.clientX,n=r.clientY,i=this.dragStart(t,r);if(!i)return!1;var o=pa(t,this,"dragStart",[e||0,n||0],r,!1,"draggable"),s=M(M({},i),{targets:t.props.targets,events:o}),u=W(t,"onDragGroupStart",s);return a.isDrag=u!==!1,a.isDrag?i:!1},dragGroup:function(t,r){var a=r.datas;if(a.isDrag){var e=this.drag(t,r),n=r.datas.passDelta,i=pa(t,this,"drag",n,r,!1,"draggable");if(e){var o=M({targets:t.props.targets,events:i},e);return W(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,r){var a=r.isDrag,e=r.datas;if(e.isDrag){this.dragEnd(t,r);var n=pa(t,this,"dragEnd",[0,0],r,!1,"draggable");return W(t,"onDragGroupEnd",Bt(t,r,{targets:t.props.targets,events:n})),a}},request:function(t){var r={},a=t.getRect(),e=0,n=0;return{isControl:!1,requestStart:function(){return{datas:r}},request:function(i){return"x"in i?e=i.x-a.left:"deltaX"in i&&(e+=i.deltaX),"y"in i?n=i.y-a.top:"deltaY"in i&&(n+=i.deltaY),{datas:r,distX:e,distY:n}},requestEnd:function(){return{datas:r,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},Ie=Ua("resizable"),Ta={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean,checkResizableError:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:Yn("resizable"),dragControlCondition:Ie,viewClassName:qa("resizable"),dragControlStart:function(t,r){var a,e=r.inputEvent,n=r.isPinch,i=r.isGroup,o=r.parentDirection,s=r.parentGesto,u=r.datas,f=r.parentFixedDirection,v=r.parentEvent,c=Cn(o,n,e,u),l=t.state,d=l.target,p=l.width,g=l.height,h=l.gestos;if(!c||!d||h.resizable)return!1;h.resizable=s||t.controlGesto,!n&&er(t,r),u.datas={},u.direction=c,u.startOffsetWidth=p,u.startOffsetHeight=g,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=l.inlineCSSWidth||l.cssWidth,u.startHeight=l.inlineCSSHeight||l.cssHeight,u.maxSize=[1/0,1/0],i||(u.minSize=[l.minOffsetWidth,l.minOffsetHeight],u.maxSize=[l.maxOffsetWidth,l.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";u.transformOrigin=m&&gr(m)?m.split(" "):m,u.startOffsetMatrix=l.offsetMatrix,u.startTransformOrigin=l.transformOrigin,u.isWidth=(a=r==null?void 0:r.parentIsWidth)!==null&&a!==void 0?a:!c[0]&&!c[1]||c[0]||!c[1];function x(R){u.ratio=R&&isFinite(R)?R:0}u.startPositions=Ot(t.state);function b(R){u.fixedDirection=R,u.fixedPosition=vt(u.startPositions,R)}function D(R){var z=t.state,B=z.width,y=z.height;u.fixedPosition=R,u.fixedDirection=dn(R,B,y)}function C(R){u.minSize=[ct("".concat(R[0]),0)||0,ct("".concat(R[1]),0)||0]}function S(R){var z=[R[0]||1/0,R[1]||1/0];(!ve(z[0])||isFinite(z[0]))&&(z[0]=ct("".concat(z[0]),0)||1/0),(!ve(z[1])||isFinite(z[1]))&&(z[1]=ct("".concat(z[1]),0)||1/0),u.maxSize=z}x(p/g),b(f||[-c[0],-c[1]]),u.setFixedDirection=b,u.setFixedPosition=D,u.setMin=C,u.setMax=S;var E=$(t,r,{direction:c,startRatio:u.ratio,set:function(R){var z=R[0],B=R[1];u.startWidth=z,u.startHeight=B},setMin:C,setMax:S,setRatio:x,setFixedDirection:b,setFixedPosition:D,setOrigin:function(R){u.transformOrigin=R},dragStart:Ct.dragStart(t,new vr().dragStart([0,0],r))}),O=v||W(t,"onResizeStart",E);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,O!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:r.isRequest,direction:c}),u.isResize?E:!1},dragControl:function(t,r){var a,e=r.datas,n=r.parentFlag,i=r.isPinch,o=r.parentKeepRatio,s=r.dragClient,u=r.parentDist,f=r.isRequest,v=r.isGroup,c=r.parentEvent,l=r.resolveMatrix,d=e.isResize,p=e.transformOrigin,g=e.startWidth,h=e.startHeight,m=e.prevWidth,x=e.prevHeight,b=e.minSize,D=e.maxSize,C=e.ratio,S=e.startOffsetWidth,E=e.startOffsetHeight,O=e.isWidth;if(!d)return;if(l){var R=t.state.is3d,z=e.startOffsetMatrix,B=e.startTransformOrigin,y=R?4:3,T=Fa(ln(r)),G=Math.sqrt(T.length);y!==G&&(T=Ft(T,G,y));var w=Ir(z,T,B,y),P=qt(w,S,E,y);e.startPositions=P,e.nextTargetMatrix=T,e.nextAllMatrix=w}var F=rr(t.props,"resizable"),_=F.resizeFormat,A=F.throttleResize,I=A===void 0?n?0:1:A,k=F.parentMoveable,j=F.keepRatioFinally,K=e.direction,q=K,N=0,H=0;!K[0]&&!K[1]&&(q=[1,1]);var Z=C&&(o??F.keepRatio)||!1;function J(){var gt=e.fixedDirection,St=Tn(q,Z,e,r);N=St.distWidth,H=St.distHeight;var Lt=q[0]-gt[0]||Z?Math.max(S+N,yt):S,nr=q[1]-gt[1]||Z?Math.max(E+H,yt):E;return Z&&S&&E&&(O?nr=Lt/C:Lt=nr*C),[Lt,nr]}var at=J(),L=at[0],V=at[1];c||(e.setFixedDirection(e.fixedDirection),W(t,"onBeforeResize",$(t,r,{startFixedDirection:e.startFixedDirection,startFixedPosition:e.startFixedPosition,setFixedDirection:function(gt){var St;return e.setFixedDirection(gt),St=J(),L=St[0],V=St[1],[L,V]},setFixedPosition:function(gt){var St;return e.setFixedPosition(gt),St=J(),L=St[0],V=St[1],[L,V]},boundingWidth:L,boundingHeight:V,setSize:function(gt){L=gt[0],V=gt[1]}},!0)));var et=s;s||(!n&&i?et=gn(t,[0,0]):et=e.fixedPosition);var rt=[0,0];i||(rt=ss(t,L,V,K,et,f,e)),u&&(!u[0]&&(rt[0]=0),!u[1]&&(rt[1]=0));function pt(){var gt;_&&(gt=_([L,V]),L=gt[0],V=gt[1]),L=st(L,I),V=st(V,I)}if(Z){q[0]&&q[1]&&rt[0]&&rt[1]&&(Math.abs(rt[0])>Math.abs(rt[1])?rt[1]=0:rt[0]=0);var ut=!rt[0]&&!rt[1];ut&&pt(),q[0]&&!q[1]||rt[0]&&!rt[1]||ut&&O?(L+=rt[0],V=L/C):(!q[0]&&q[1]||!rt[0]&&rt[1]||ut&&!O)&&(V+=rt[1],L=V*C)}else L+=rt[0],V+=rt[1],L=Math.max(0,L),V=Math.max(0,V);a=Si([L,V],b,D,Z?C:!1),L=a[0],V=a[1],pt(),Z&&(v||j)&&(O?V=L/C:L=V*C),N=L-S,H=V-E;var nt=[N-m,H-x];e.prevWidth=N,e.prevHeight=H;var lt=ao(t,L,V,et,p,e);if(!(!k&&nt.every(function(gt){return!gt})&&lt.every(function(gt){return!gt}))){var Q=Ct.drag(t,Gr(r,t.state,lt,!!i,!1,"draggable")),it=Q.transform,ot=g+N,zt=h+H,Ht=$(t,r,M({width:ot,height:zt,offsetWidth:Math.round(L),offsetHeight:Math.round(V),startRatio:C,boundingWidth:L,boundingHeight:V,direction:K,dist:[N,H],delta:nt,isPinch:!!i,drag:Q},Rn({style:{width:"".concat(ot,"px"),height:"".concat(zt,"px")},transform:it},Q,r)));return!c&&W(t,"onResize",Ht),Ht}},dragControlAfter:function(t,r){var a=r.datas,e=a.isResize,n=a.startOffsetWidth,i=a.startOffsetHeight,o=a.prevWidth,s=a.prevHeight;if(!(!e||t.props.checkResizableError===!1)){var u=t.state,f=u.width,v=u.height,c=f-(n+o),l=v-(i+s),d=Math.abs(c)>3,p=Math.abs(l)>3;if(d&&(a.startWidth+=c,a.startOffsetWidth+=c,a.prevWidth+=c),p&&(a.startHeight+=l,a.startOffsetHeight+=l,a.prevHeight+=l),d||p)return this.dragControl(t,r)}},dragControlEnd:function(t,r){var a=r.datas,e=r.parentEvent;if(a.isResize){a.isResize=!1;var n=Bt(t,r,{});return!e&&W(t,"onResizeEnd",n),n}},dragGroupControlCondition:Ie,dragGroupControlStart:function(t,r){var a=r.datas,e=this.dragControlStart(t,M(M({},r),{isGroup:!0}));if(!e)return!1;var n=wt(t,"resizable",r);function i(p,g){var h=a.fixedDirection,m=a.fixedPosition,x=g.datas.startPositions||Ot(p.state),b=vt(x,h),D=Rt(Xr(-t.rotation/180*Math.PI,3),[b[0]-m[0],b[1]-m[1],1],3),C=D[0],S=D[1];return g.datas.originalX=C,g.datas.originalY=S,g}var o=a.startOffsetWidth,s=a.startOffsetHeight;function u(){var p=a.minSize;n.forEach(function(g){var h=g.datas,m=h.minSize,x=h.startOffsetWidth,b=h.startOffsetHeight,D=o*(x?m[0]/x:0),C=s*(b?m[1]/b:0);p[0]=Math.max(p[0],D),p[1]=Math.max(p[1],C)})}function f(){var p=a.maxSize;n.forEach(function(g){var h=g.datas,m=h.maxSize,x=h.startOffsetWidth,b=h.startOffsetHeight,D=o*(x?m[0]/x:0),C=s*(b?m[1]/b:0);p[0]=Math.min(p[0],D),p[1]=Math.min(p[1],C)})}var v=kt(t,this,"dragControlStart",r,function(p,g){return i(p,g)});u(),f();var c=function(p){e.setFixedDirection(p),v.forEach(function(g,h){g.setFixedDirection(p),i(g.moveable,n[h])})};a.setFixedDirection=c;var l=M(M({},e),{targets:t.props.targets,events:v.map(function(p){return M(M({},p),{setMin:function(g){p.setMin(g),u()},setMax:function(g){p.setMax(g),f()}})}),setFixedDirection:c,setMin:function(p){e.setMin(p),u()},setMax:function(p){e.setMax(p),f()}}),d=W(t,"onResizeGroupStart",l);return a.isResize=d!==!1,a.isResize?e:!1},dragGroupControl:function(t,r){var a=r.datas;if(a.isResize){var e=rr(t.props,"resizable");ia(t,"onBeforeResize",function(d){W(t,"onBeforeResizeGroup",$(t,r,M(M({},d),{targets:e.targets}),!0))});var n=this.dragControl(t,M(M({},r),{isGroup:!0}));if(n){var i=n.boundingWidth,o=n.boundingHeight,s=n.dist,u=e.keepRatio,f=[i/(i-s[0]),o/(o-s[1])],v=a.fixedPosition,c=kt(t,this,"dragControl",r,function(d,p){var g=Rt(Xr(t.rotation/180*Math.PI,3),[p.datas.originalX*f[0],p.datas.originalY*f[1],1],3),h=g[0],m=g[1];return M(M({},p),{parentDist:null,parentScale:f,dragClient:tt(v,[h,m]),parentKeepRatio:u})}),l=M({targets:e.targets,events:c},n);return W(t,"onResizeGroup",l),l}}},dragGroupControlEnd:function(t,r){var a=r.isDrag,e=r.datas;if(e.isResize){this.dragControlEnd(t,r);var n=kt(t,this,"dragControlEnd",r),i=Bt(t,r,{targets:t.props.targets,events:n});return W(t,"onResizeGroupEnd",i),a}},request:function(t){var r={},a=0,e=0,n=t.getRect();return{isControl:!0,requestStart:function(i){var o;return{datas:r,parentDirection:i.direction||[1,1],parentIsWidth:(o=i==null?void 0:i.horizontal)!==null&&o!==void 0?o:!0}},request:function(i){return"offsetWidth"in i?a=i.offsetWidth-n.offsetWidth:"deltaWidth"in i&&(a+=i.deltaWidth),"offsetHeight"in i?e=i.offsetHeight-n.offsetHeight:"deltaHeight"in i&&(e+=i.deltaHeight),{datas:r,parentDist:[a,e],parentKeepRatio:i.keepRatio}},requestEnd:function(){return{datas:r,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function ga(t,r,a,e,n){var i=t.props.groupable,o=t.state,s=o.is3d?4:3,u=r.origin,f=ht(t.state.rootMatrix,Y([u[0],u[1]],i?[0,0]:[o.left,o.top]),s),v=tt([n.left,n.top],f);r.startAbsoluteOrigin=v,r.prevDeg=dt(v,[a,e])/Math.PI*180,r.defaultDeg=r.prevDeg,r.prevSnapDeg=0,r.loop=0,r.startDist=_t(v,[a,e])}function Yr(t,r,a){var e=a.defaultDeg,n=a.prevDeg,i=n%360,o=Math.floor(n/360);i<0&&(i+=360),i>t&&i>270&&t<90?++o:i<t&&i<90&&t>270&&--o;var s=r*(o*360+t-e);return a.prevDeg=e+s,s}function ha(t,r,a,e){return Yr(dt(e.startAbsoluteOrigin,[t,r])/Math.PI*180,a,e)}function ma(t,r,a,e,n,i){var o=t.props.throttleRotate,s=o===void 0?0:o,u=a.prevSnapDeg,f=0,v=!1;if(i){var c=os(t,r,e);v=c.isSnap,f=n+c.rotation}v||(f=st(n+e,s));var l=f-n;return a.prevSnapDeg=l,[l-u,l,f]}function qn(t,r,a){var e=r[0],n=r[1],i=r[2],o=r[3];if(t==="none")return[];if(Dt(t))return t.map(function(g){return qn(g,[e,n,i,o],a)[0]});var s=(t||"top").split("-"),u=s[0],f=s[1],v=[e,n];u==="left"?v=[i,e]:u==="right"?v=[n,o]:u==="bottom"&&(v=[o,i]);var c=[(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2],l=Dn(v,a);if(f){var d=f==="top"||f==="left",p=u==="bottom"||u==="left";c=v[d&&!p||!d&&p?0:1]}return[[c,l]]}function Ga(t,r){if(r.isRequest)return r.requestAble==="rotatable";var a=r.inputEvent.target;if(mt(a,X("rotation-control"))||mt(a,X("around-control"))||mt(a,X("control"))&&mt(a,X("rotatable")))return!0;var e=t.props.rotationTarget;return e?ja(e,!0).some(function(n){return n?a===n||a.contains(n):!1}):!1}var ps=Wa.map(function(t){var r="",a="",e="center",n="center";return t.indexOf("n")>-1&&(r="top: -20px;",n="bottom"),t.indexOf("s")>-1&&(r="top: 0px;",n="top"),t.indexOf("w")>-1&&(a="left: -20px;",e="right"),t.indexOf("e")>-1&&(a="left: 0px;",e="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(a).concat(r,`
        transform-origin: `).concat(e," ").concat(n,`;
    }`)}).join(`
`),gs=`.rotation {
    position: absolute;
    height: 40px;
    width: 1px;
    transform-origin: 50% 100%;
    height: calc(40px * var(--zoom));
    top: auto;
    left: 0;
    bottom: 100%;
    will-change: transform;
}
.rotation .rotation-line {
    display: block;
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
}
.rotation .rotation-control {
    border-color: #4af;
    border-color: var(--moveable-color);
    background:#fff;
    cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
    cursor: alias;
}
.around-control {
    position: absolute;
    will-change: transform;
    width: 20px;
    height: 20px;
    left: -10px;
    top: -10px;
    box-sizing: border-box;
    background: transparent;
    z-index: 8;
    cursor: alias;
    transform-origin: center center;
}
.rotatable.direction.control.move {
    cursor: move;
}
`.concat(ps,`
`),hs={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[gs],viewClassName:function(t){return t.isDragging("rotatable")?X("view-rotation-dragging"):""},render:function(t,r){var a=rr(t.props,"rotatable"),e=a.rotatable,n=a.rotationPosition,i=a.zoom,o=a.renderDirections,s=a.rotateAroundControls,u=a.resolveAblesWithRotatable,f=t.getState(),v=f.renderPoses,c=f.direction;if(!e)return null;var l=qn(n,v,c),d=[];if(l.forEach(function(m,x){var b=m[0],D=m[1];d.push(r.createElement("div",{key:"rotation".concat(x),className:X("rotation"),style:{transform:"translate(-50%) translate(".concat(b[0],"px, ").concat(b[1],"px) rotate(").concat(D,"rad)")}},r.createElement("div",{className:X("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),r.createElement("div",{className:X("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}),o){var p=hr(u||{}),g={};p.forEach(function(m){u[m].forEach(function(x){g[x]=m})});var h=[];Dt(o)&&(h=o.map(function(m){var x=g[m];return{data:x?{resolve:x}:{},classNames:x?["move"]:[],dir:m}})),d.push.apply(d,Hn(t,"rotatable",h,r))}return s&&d.push.apply(d,vs(t,r)),d},dragControlCondition:Ga,dragControlStart:function(t,r){var a,e,n=r.datas,i=r.clientX,o=r.clientY,s=r.parentRotate,u=r.parentFlag,f=r.isPinch,v=r.isRequest,c=t.state,l=c.target,d=c.left,p=c.top,g=c.direction,h=c.beforeDirection,m=c.targetTransform,x=c.moveableClientRect,b=c.offsetMatrix,D=c.targetMatrix,C=c.allMatrix,S=c.width,E=c.height;if(!v&&!l)return!1;var O=t.getRect();n.rect=O,n.transform=m,n.left=d,n.top=p;var R=function(N){var H=t.state,Z=H.allMatrix,J=H.is3d,at=H.width,L=H.height,V=dn(N,at,L);n.fixedDirection=V,n.fixedPosition=ht(Z,N,J?4:3),k&&k.setFixedPosition(N)},z=function(N){n.fixedDirection=N,n.fixedPosition=pn(t,N),k&&k.setFixedDirection(N)},B=i,y=o;if(v||f||u){var T=s||0;n.beforeInfo={origin:O.beforeOrigin,prevDeg:T,defaultDeg:T,prevSnapDeg:0,startDist:0},n.afterInfo=M(M({},n.beforeInfo),{origin:O.origin}),n.absoluteInfo=M(M({},n.beforeInfo),{origin:O.origin,startValue:T})}else{var G=(e=r.inputEvent)===null||e===void 0?void 0:e.target;if(G){var w=G.getAttribute("data-direction")||"",P=Yi[w];if(P){n.isControl=!0,n.isAroundControl=mt(G,X("around-control")),n.controlDirection=P;var F=G.getAttribute("data-resolve");F&&(n.resolveAble=F);var _=po(c.rootMatrix,c.renderPoses,x);a=vt(_,P),B=a[0],y=a[1]}}n.beforeInfo={origin:O.beforeOrigin},n.afterInfo={origin:O.origin},n.absoluteInfo={origin:O.origin,startValue:O.rotation};var A=R;R=function(N){var H=c.is3d?4:3,Z=tt(Qe(D,H),N),J=Z[0],at=Z[1],L=Rt(b,lr([J,at],H)),V=Rt(C,lr([N[0],N[1]],H));A(N);var et=c.posDelta;n.beforeInfo.origin=Y(L,et),n.afterInfo.origin=Y(V,et),n.absoluteInfo.origin=Y(V,et),ga(t,n.beforeInfo,B,y,x),ga(t,n.afterInfo,B,y,x),ga(t,n.absoluteInfo,B,y,x)},z=function(N){var H=vt([[0,0],[S,0],[0,E],[S,E]],N);R(H)}}n.startClientX=B,n.startClientY=y,n.direction=g,n.beforeDirection=h,n.startValue=0,n.datas={},ea(r,"rotate");var I=!1,k=!1;if(n.isControl&&n.resolveAble){var j=n.resolveAble;j==="resizable"&&(k=Ta.dragControlStart(t,M(M({},new vr("resizable").dragStart([0,0],r)),{parentPosition:n.controlPosition,parentFixedPosition:n.fixedPosition})))}k||(I=Ct.dragStart(t,new vr().dragStart([0,0],r))),R(c.transformOrigin);var K=$(t,r,M(M({set:function(N){n.startValue=N*Math.PI/180},setFixedDirection:z,setFixedPosition:R},aa(r)),{dragStart:I,resizeStart:k})),q=W(t,"onRotateStart",K);return n.isRotate=q!==!1,c.snapRenderInfo={request:r.isRequest},n.isRotate?K:!1},dragControl:function(t,r){var a,e,n,i=r.datas,o=r.clientDistX,s=r.clientDistY,u=r.parentRotate,f=r.parentFlag,v=r.isPinch,c=r.groupDelta,l=i.beforeDirection,d=i.beforeInfo,p=i.afterInfo,g=i.absoluteInfo,h=i.isRotate,m=i.startValue,x=i.rect,b=i.startClientX,D=i.startClientY;if(h){ta(r,"rotate");var C=qi(r),S=l*C,E=t.props.parentMoveable,O=0,R,z,B=0,y,T,G=0,w,P,F=180/Math.PI*m,_=g.startValue,A=!1,I=b+o,k=D+s;if(!f&&"parentDist"in r){var j=r.parentDist;R=j,y=j,w=j}else v||f?(R=Yr(u,l,d),y=Yr(u,S,p),w=Yr(u,S,g)):(R=ha(I,k,l,d),y=ha(I,k,S,p),w=ha(I,k,S,g),A=!0);if(z=F+R,T=F+y,P=_+w,W(t,"onBeforeRotate",$(t,r,{beforeRotation:z,rotation:T,absoluteRotation:P,setRotation:function(et){y=et-F,R=y,w=y}},!0)),a=ma(t,x,d,R,F,A),O=a[0],R=a[1],z=a[2],e=ma(t,x,p,y,F,A),B=e[0],y=e[1],T=e[2],n=ma(t,x,g,w,_,A),G=n[0],w=n[1],P=n[2],!(!G&&!B&&!O&&!E)){var K=ra(i,"rotate(".concat(T,"deg)"),"rotate(".concat(y,"deg)")),q=ro(t,y,i),N=Y(tt(c||[0,0],q),i.prevInverseDist||[0,0]);i.prevInverseDist=q,i.requestValue=null;var H=cn(t,K,N,v,r),Z=H,J=_t([I,k],g.startAbsoluteOrigin)-g.startDist,at=void 0;if(i.resolveAble==="resizable"){var L=Ta.dragControl(t,M(M({},Gr(r,t.state,[r.deltaX,r.deltaY],!!v,!1,"resizable")),{resolveMatrix:!0,parentDistance:J}));L&&(at=L,Z=Rn(Z,L,r))}var V=$(t,r,M(M({delta:B,dist:y,rotate:T,rotation:T,beforeDist:R,beforeDelta:O,beforeRotate:z,beforeRotation:z,absoluteDist:w,absoluteDelta:G,absoluteRotate:P,absoluteRotation:P,isPinch:!!v,resize:at},H),Z));return W(t,"onRotate",V),V}}},dragControlEnd:function(t,r){var a=r.datas;if(a.isRotate){a.isRotate=!1;var e=Bt(t,r,{});return W(t,"onRotateEnd",e),e}},dragGroupControlCondition:Ga,dragGroupControlStart:function(t,r){var a=r.datas,e=t.state,n=e.left,i=e.top,o=e.beforeOrigin,s=this.dragControlStart(t,r);if(!s)return!1;s.set(a.beforeDirection*t.rotation);var u=kt(t,this,"dragControlStart",r,function(c,l){var d=c.state,p=d.left,g=d.top,h=d.beforeOrigin,m=tt(Y([p,g],[n,i]),Y(h,o));return l.datas.startGroupClient=m,l.datas.groupClient=m,M(M({},l),{parentRotate:0})}),f=M(M({},s),{targets:t.props.targets,events:u}),v=W(t,"onRotateGroupStart",f);return a.isRotate=v!==!1,a.isRotate?s:!1},dragGroupControl:function(t,r){var a=r.datas;if(a.isRotate){ia(t,"onBeforeRotate",function(f){W(t,"onBeforeRotateGroup",$(t,r,M(M({},f),{targets:t.props.targets}),!0))});var e=this.dragControl(t,r);if(e){var n=a.beforeDirection,i=e.beforeDist,o=i/180*Math.PI,s=kt(t,this,"dragControl",r,function(f,v){var c=v.datas.startGroupClient,l=v.datas.groupClient,d=l[0],p=l[1],g=Or(c,o*n),h=g[0],m=g[1],x=[h-d,m-p];return v.datas.groupClient=[h,m],M(M({},v),{parentRotate:i,groupDelta:x})});t.rotation=n*e.beforeRotation;var u=M({targets:t.props.targets,events:s,set:function(f){t.rotation=f},setGroupRotation:function(f){t.rotation=f}},e);return W(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,r){var a=r.isDrag,e=r.datas;if(e.isRotate){this.dragControlEnd(t,r);var n=kt(t,this,"dragControlEnd",r),i=Bt(t,r,{targets:t.props.targets,events:n});return W(t,"onRotateGroupEnd",i),a}},request:function(t){var r={},a=0,e=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:r}},request:function(n){return"deltaRotate"in n?a+=n.deltaRotate:"rotate"in n&&(a=n.rotate-e),{datas:r,parentDist:a}},requestEnd:function(){return{datas:r,isDrag:!0}}}}},we=Ua("scalable"),ms={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:Yn("scalable"),dragControlCondition:we,viewClassName:qa("scalable"),dragControlStart:function(t,r){var a=r.datas,e=r.isPinch,n=r.inputEvent,i=r.parentDirection,o=Cn(i,e,n,a),s=t.state,u=s.width,f=s.height,v=s.targetTransform,c=s.target,l=s.pos1,d=s.pos2,p=s.pos4;if(!o||!c)return!1;e||er(t,r),a.datas={},a.transform=v,a.prevDist=[1,1],a.direction=o,a.startOffsetWidth=u,a.startOffsetHeight=f,a.startValue=[1,1];var g=_t(l,d),h=_t(d,p),m=!o[0]&&!o[1]||o[0]||!o[1];a.scaleWidth=g,a.scaleHeight=h,a.scaleXRatio=g/u,a.scaleYRatio=h/f,ea(r,"scale"),a.isWidth=m;function x(S){a.ratio=S&&isFinite(S)?S:0}a.startPositions=Ot(t.state);function b(S){a.fixedDirection=S,a.fixedPosition=vt(a.startPositions,S)}a.setFixedDirection=b,x(_t(l,d)/_t(d,p)),b([-o[0],-o[1]]);var D=$(t,r,M(M({direction:o,set:function(S){a.startValue=S},setRatio:x,setFixedDirection:b},aa(r)),{dragStart:Ct.dragStart(t,new vr().dragStart([0,0],r))})),C=W(t,"onScaleStart",D);return a.startFixedDirection=a.fixedDirection,C!==!1&&(a.isScale=!0,t.state.snapRenderInfo={request:r.isRequest,direction:o}),a.isScale?D:!1},dragControl:function(t,r){ta(r,"scale");var a=r.datas,e=r.parentKeepRatio,n=r.parentFlag,i=r.isPinch,o=r.dragClient,s=r.isRequest,u=a.prevDist,f=a.direction,v=a.startOffsetWidth,c=a.startOffsetHeight,l=a.isScale,d=a.startValue,p=a.isWidth,g=a.ratio;if(!l)return!1;var h=t.props,m=h.throttleScale,x=h.parentMoveable,b=f;!f[0]&&!f[1]&&(b=[1,1]);var D=g&&(e??h.keepRatio)||!1,C=t.state;function S(){var k=Tn(b,D,a,r),j=k.distWidth,K=k.distHeight,q=v?(v+j)/v:1,N=c?(c+K)/c:1;return q=b[0]||D?q*d[0]:d[0],N=b[1]||D?N*d[1]:d[1],q===0&&(q=(u[0]>0?1:-1)*Pr),N===0&&(N=(u[1]>0?1:-1)*Pr),[q,N]}var E=S();if(!i&&t.props.groupable){var O=C.snapRenderInfo||{},R=O.direction;Dt(R)&&(R[0]||R[1])&&(C.snapRenderInfo={direction:f,request:r.isRequest})}W(t,"onBeforeScale",$(t,r,{scale:E,setFixedDirection:function(k){return a.setFixedDirection(k),E=S(),E},startFixedDirection:a.startFixedDirection,setScale:function(k){E=k}},!0));var z=[E[0]/d[0],E[1]/d[1]],B=o,y=[0,0];if(o||(!n&&i?B=gn(t,[0,0]):B=a.fixedPosition),i||(y=us(t,z,f,s,a)),D){b[0]&&b[1]&&y[0]&&y[1]&&(Math.abs(y[0]*v)>Math.abs(y[1]*c)?y[1]=0:y[0]=0);var T=!y[0]&&!y[1];if(T&&(p?z[0]=st(z[0]*d[0],m)/d[0]:z[1]=st(z[1]*d[1],m)/d[1]),b[0]&&!b[1]||y[0]&&!y[1]||T&&p){z[0]+=y[0];var G=v*z[0]*d[0]/g;z[1]=G/c/d[1]}else if(!b[0]&&b[1]||!y[0]&&y[1]||T&&!p){z[1]+=y[1];var w=c*z[1]*d[1]*g;z[0]=w/v/d[0]}}else z[0]+=y[0],z[1]+=y[1],y[0]||(z[0]=st(z[0]*d[0],m)/d[0]),y[1]||(z[1]=st(z[1]*d[1],m)/d[1]);z[0]===0&&(z[0]=(u[0]>0?1:-1)*Pr),z[1]===0&&(z[1]=(u[1]>0?1:-1)*Pr);var P=[z[0]/u[0],z[1]/u[1]];E=no(z,d);var F=to(t,z,a.fixedDirection,B,a),_=Y(F,a.prevInverseDist||[0,0]);if(a.prevDist=z,a.prevInverseDist=F,E[0]===u[0]&&E[1]===u[1]&&_.every(function(k){return!k})&&!x)return!1;var A=ra(a,"scale(".concat(E.join(", "),")"),"scale(".concat(z.join(", "),")")),I=$(t,r,M({offsetWidth:v,offsetHeight:c,direction:f,scale:E,dist:z,delta:P,isPinch:!!i},cn(t,A,_,i,r)));return W(t,"onScale",I),I},dragControlEnd:function(t,r){var a=r.datas;if(!a.isScale)return!1;a.isScale=!1;var e=Bt(t,r,{});return W(t,"onScaleEnd",e),e},dragGroupControlCondition:we,dragGroupControlStart:function(t,r){var a=r.datas,e=this.dragControlStart(t,r);if(!e)return!1;var n=wt(t,"resizable",r);function i(v,c){var l=a.fixedDirection,d=a.fixedPosition,p=c.datas.startPositions||Ot(v.state),g=vt(p,l),h=Rt(Xr(-t.rotation/180*Math.PI,3),[g[0]-d[0],g[1]-d[1],1],3),m=h[0],x=h[1];return c.datas.originalX=m,c.datas.originalY=x,c}a.moveableScale=t.scale;var o=kt(t,this,"dragControlStart",r,function(v,c){return i(v,c)}),s=function(v){e.setFixedDirection(v),o.forEach(function(c,l){c.setFixedDirection(v),i(c.moveable,n[l])})};a.setFixedDirection=s;var u=M(M({},e),{targets:t.props.targets,events:o,setFixedDirection:s}),f=W(t,"onScaleGroupStart",u);return a.isScale=f!==!1,a.isScale?u:!1},dragGroupControl:function(t,r){var a=r.datas;if(a.isScale){ia(t,"onBeforeScale",function(c){W(t,"onBeforeScaleGroup",$(t,r,M(M({},c),{targets:t.props.targets}),!0))});var e=this.dragControl(t,r);if(e){var n=a.moveableScale;t.scale=[e.scale[0]*n[0],e.scale[1]*n[1]];var i=t.props.keepRatio,o=e.dist,s=e.scale,u=a.fixedPosition,f=kt(t,this,"dragControl",r,function(c,l){var d=Rt(Xr(t.rotation/180*Math.PI,3),[l.datas.originalX*o[0],l.datas.originalY*o[1],1],3),p=d[0],g=d[1];return M(M({},l),{parentDist:null,parentScale:s,parentKeepRatio:i,dragClient:tt(u,[p,g])})}),v=M({targets:t.props.targets,events:f},e);return W(t,"onScaleGroup",v),v}}},dragGroupControlEnd:function(t,r){var a=r.isDrag,e=r.datas;if(e.isScale){this.dragControlEnd(t,r);var n=kt(t,this,"dragControlEnd",r),i=Bt(t,r,{targets:t.props.targets,events:n});return W(t,"onScaleGroupEnd",i),a}},request:function(){var t={},r=0,a=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(e){return r+=e.deltaWidth,a+=e.deltaHeight,{datas:t,parentDist:[r,a],parentKeepRatio:e.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Vt(t,r){return t.map(function(a,e){return Kt(a,r[e],1,2)})}function Pe(t,r,a){var e=dt(t,r),n=dt(t,a),i=n-e;return i>=0?i:i+2*Math.PI}function xs(t,r){var a=Pe(t[0],t[1],t[2]),e=Pe(r[0],r[1],r[2]),n=Math.PI;return!(a>=n&&e<=n||a<=n&&e>=n)}var Ss={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:qa("warpable"),render:function(t,r){var a=t.props,e=a.resizable,n=a.scalable,i=a.warpable,o=a.zoom;if(e||n||!i)return[];var s=t.state,u=s.pos1,f=s.pos2,v=s.pos3,c=s.pos4,l=Vt(u,f),d=Vt(f,u),p=Vt(u,v),g=Vt(v,u),h=Vt(v,c),m=Vt(c,v),x=Vt(f,c),b=Vt(c,f);return U([r.createElement("div",{className:X("line"),key:"middeLine1",style:br(l,h,o)}),r.createElement("div",{className:X("line"),key:"middeLine2",style:br(d,m,o)}),r.createElement("div",{className:X("line"),key:"middeLine3",style:br(p,x,o)}),r.createElement("div",{className:X("line"),key:"middeLine4",style:br(g,b,o)})],Xn(t,"warpable",r),!0)},dragControlCondition:function(t,r){if(r.isRequest)return!1;var a=r.inputEvent.target;return mt(a,X("direction"))&&mt(a,X("warpable"))},dragControlStart:function(t,r){var a=r.datas,e=r.inputEvent,n=t.props.target,i=e.target,o=Mn(i,a);if(!o||!n)return!1;var s=t.state,u=s.transformOrigin,f=s.is3d,v=s.targetTransform,c=s.targetMatrix,l=s.width,d=s.height,p=s.left,g=s.top;a.datas={},a.targetTransform=v,a.warpTargetMatrix=f?c:Ft(c,3,4),a.targetInverseMatrix=Je(Nt(a.warpTargetMatrix,4),3,4),a.direction=o,a.left=p,a.top=g,a.poses=[[0,0],[l,0],[0,d],[l,d]].map(function(x){return Y(x,u)}),a.nextPoses=a.poses.map(function(x){var b=x[0],D=x[1];return Rt(a.warpTargetMatrix,[b,D,0,1],4)}),a.startValue=bt(4),a.prevMatrix=bt(4),a.absolutePoses=Ot(s),a.posIndexes=fn(o),er(t,r),ea(r,"matrix3d"),s.snapRenderInfo={request:r.isRequest,direction:o};var h=$(t,r,M({set:function(x){a.startValue=x}},aa(r))),m=W(t,"onWarpStart",h);return m!==!1&&(a.isWarp=!0),a.isWarp},dragControl:function(t,r){var a=r.datas,e=r.isRequest,n=r.distX,i=r.distY,o=a.targetInverseMatrix,s=a.prevMatrix,u=a.isWarp,f=a.startValue,v=a.poses,c=a.posIndexes,l=a.absolutePoses;if(!u)return!1;if(ta(r,"matrix3d"),xr(t,"warpable")){var d=c.map(function(R){return l[R]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=ua(t,e,{horizontal:d.map(function(R){return R[1]+i}),vertical:d.map(function(R){return R[0]+n})}),g=p.horizontal,h=p.vertical;i-=g.offset,n-=h.offset}var m=Pt({datas:a,distX:n,distY:i},!0),x=a.nextPoses.slice();if(c.forEach(function(R){x[R]=tt(x[R],m)}),!Li.every(function(R){return xs(R.map(function(z){return v[z]}),R.map(function(z){return x[z]}))}))return!1;var b=Aa(v[0],v[2],v[1],v[3],x[0],x[2],x[1],x[3]);if(!b.length)return!1;var D=xt(o,b,4),C=sn(a,D,!0),S=xt(Nt(s,4),C,4);a.prevMatrix=C;var E=xt(f,C,4),O=ra(a,"matrix3d(".concat(E.join(", "),")"),"matrix3d(".concat(C.join(", "),")"));return La(r,O),W(t,"onWarp",$(t,r,M({delta:S,matrix:E,dist:C,multiply:xt,transform:O},Mt({transform:O},r)))),!0},dragControlEnd:function(t,r){var a=r.datas,e=r.isDrag;return a.isWarp?(a.isWarp=!1,W(t,"onWarpEnd",Bt(t,r,{})),e):!1}},bs=X("area-pieces"),Hr=X("area-piece"),Un=X("avoid"),Ds=X("view-dragging");function xa(t){var r=t.areaElement;if(r){var a=t.state,e=a.width,n=a.height;Ze(r,Un),r.style.cssText+="left: 0px; top: 0px; width: ".concat(e,"px; height: ").concat(n,"px")}}function _e(t){return t.createElement("div",{key:"area_pieces",className:bs},t.createElement("div",{className:Hr}),t.createElement("div",{className:Hr}),t.createElement("div",{className:Hr}),t.createElement("div",{className:Hr}))}var jn={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,r){var a=t.props,e=a.target,n=a.dragArea,i=a.groupable,o=a.passDragArea,s=t.getState(),u=s.width,f=s.height,v=s.renderPoses,c=o?X("area","pass"):X("area");if(i)return[r.createElement("div",{key:"area",ref:Jt(t,"areaElement"),className:c}),_e(r)];if(!e||!n)return[];var l=Aa([0,0],[u,0],[0,f],[u,f],v[0],v[1],v[2],v[3]),d=l.length?na(l,!0):"none";return[r.createElement("div",{key:"area",ref:Jt(t,"areaElement"),className:c,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(f,"px"),transformOrigin:"0 0",transform:d}}),_e(r)]},dragStart:function(t,r){var a=r.datas,e=r.clientX,n=r.clientY,i=r.inputEvent;if(!i)return!1;a.isDragArea=!1;var o=t.areaElement,s=t.state,u=s.moveableClientRect,f=s.renderPoses,v=s.rootMatrix,c=s.is3d,l=u.left,d=u.top,p=Tt(f),g=p.left,h=p.top,m=p.width,x=p.height,b=c?4:3,D=Qt(v,[e-l,n-d],b),C=D[0],S=D[1];C-=g,S-=h;var E=[{left:g,top:h,width:m,height:S-10},{left:g,top:h,width:C-10,height:x},{left:g,top:h+S+10,width:m,height:x-S-10},{left:g+C+10,top:h,width:m-C-10,height:x}],O=[].slice.call(o.nextElementSibling.children);E.forEach(function(R,z){O[z].style.cssText="left: ".concat(R.left,"px;top: ").concat(R.top,"px; width: ").concat(R.width,"px; height: ").concat(R.height,"px;")}),je(o,Un),s.disableNativeEvent=!0},drag:function(t,r){var a=r.datas,e=r.inputEvent;if(this.enableNativeEvent(t),!e)return!1;a.isDragArea||(a.isDragArea=!0,xa(t))},dragEnd:function(t,r){this.enableNativeEvent(t);var a=r.inputEvent,e=r.datas;if(!a)return!1;e.isDragArea||xa(t)},dragGroupStart:function(t,r){return this.dragStart(t,r)},dragGroup:function(t,r){return this.drag(t,r)},dragGroupEnd:function(t,r){return this.dragEnd(t,r)},unset:function(t){xa(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var r=t.state;r.disableNativeEvent&&Ke(function(){r.disableNativeEvent=!1})}},Es=Tr("origin",{render:function(t,r){var a=t.props.zoom,e=t.getState(),n=e.beforeOrigin,i=e.rotation;return[r.createElement("div",{className:X("control","origin"),style:Ya(i,a,n),key:"beforeOrigin"})]}});function Cs(t){var r=t.scrollContainer;return[r.scrollLeft,r.scrollTop]}var Ms={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,scrollThrottleTime:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,r){var a=t.props,e=a.scrollContainer,n=e===void 0?t.getContainer():e,i=new Ri,o=ar(n,!0);r.datas.dragScroll=i;var s=r.isControl?"controlGesto":"targetGesto",u=r.targets;i.on("scroll",function(f){var v=f.container,c=f.direction,l=$(t,r,{scrollContainer:v,direction:c}),d=u?"onScrollGroup":"onScroll";u&&(l.targets=u),W(t,d,l)}).on("move",function(f){var v=f.offsetX,c=f.offsetY,l=f.inputEvent;t[s].scrollBy(v,c,l.inputEvent,!1)}),i.dragStart(r,{container:o})},checkScroll:function(t,r){var a=r.datas.dragScroll;if(a){var e=t.props,n=e.scrollContainer,i=n===void 0?t.getContainer():n,o=e.scrollThreshold,s=o===void 0?0:o,u=e.scrollThrottleTime,f=u===void 0?0:u,v=e.getScrollPosition,c=v===void 0?Cs:v;return a.drag(r,{container:i,threshold:s,throttleTime:f,getScrollPosition:function(l){return c({scrollContainer:l.container,direction:l.direction})}}),!0}},drag:function(t,r){return this.checkScroll(t,r)},dragEnd:function(t,r){r.datas.dragScroll.dragEnd(),r.datas.dragScroll=null},dragControlStart:function(t,r){return this.dragStart(t,M(M({},r),{isControl:!0}))},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupStart:function(t,r){return this.dragStart(t,M(M({},r),{targets:t.props.targets}))},dragGroup:function(t,r){return this.drag(t,M(M({},r),{targets:t.props.targets}))},dragGroupEnd:function(t,r){return this.dragEnd(t,M(M({},r),{targets:t.props.targets}))},dragGroupControlStart:function(t,r){return this.dragStart(t,M(M({},r),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,r){return this.drag(t,M(M({},r),{targets:t.props.targets}))},dragGroupControEnd:function(t,r){return this.dragEnd(t,M(M({},r),{targets:t.props.targets}))}},Kn={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object,persistData:Object,useAccuratePosition:Boolean,firstRenderState:Object},events:{onChangeTargets:"changeTargets"}},Rs=Tr("padding",{render:function(t,r){var a=t.props;if(a.dragArea)return[];var e=a.padding||{},n=e.left,i=n===void 0?0:n,o=e.top,s=o===void 0?0:o,u=e.right,f=u===void 0?0:u,v=e.bottom,c=v===void 0?0:v,l=t.getState(),d=l.renderPoses,p=l.pos1,g=l.pos2,h=l.pos3,m=l.pos4,x=[p,g,h,m],b=[];return i>0&&b.push([0,2]),s>0&&b.push([0,1]),f>0&&b.push([1,3]),c>0&&b.push([2,3]),b.map(function(D,C){var S=D[0],E=D[1],O=x[S],R=x[E],z=d[S],B=d[E],y=Aa([0,0],[100,0],[0,100],[100,100],O,R,z,B);if(y.length)return r.createElement("div",{key:"padding".concat(C),className:X("padding"),style:{transform:na(y,!0)}})})}}),Ae=["nw","ne","se","sw"];function Lr(t,r){var a=t[0]+t[1],e=a>r?r/a:1;return t[0]*=e,t[1]=r-t[1]*e,t}var ys=[1,2,5,6],zs=[0,3,4,7],Zt=[1,-1,-1,1],$t=[1,1,-1,-1];function re(t,r,a,e,n,i,o,s){n===void 0&&(n=0),i===void 0&&(i=0),o===void 0&&(o=a),s===void 0&&(s=e);var u=[],f=!1,v=t.filter(function(l){return!l.virtual}),c=v.map(function(l){var d=l.horizontal,p=l.vertical,g=l.pos;if(p&&!f&&(f=!0,u.push("/")),f){var h=Math.max(0,p===1?g[1]-i:s-g[1]);return u.push(Gt(h,e,r)),h}else{var h=Math.max(0,d===1?g[0]-n:o-g[0]);return u.push(Gt(h,a,r)),h}});return{radiusPoses:v,styles:u,raws:c}}function Zn(t){for(var r=[0,0],a=[0,0],e=t.length,n=0;n<e;++n){var i=t[n];i.sub&&(i.horizontal&&(r[1]===0&&(r[0]=n),r[1]=n-r[0]+1,a[0]=n+1),i.vertical&&(a[1]===0&&(a[0]=n),a[1]=n-a[0]+1))}return{horizontalRange:r,verticalRange:a}}function $n(t,r,a,e,n,i,o){var s,u,f,v;i===void 0&&(i=[0,0]),o===void 0&&(o=!1);var c=t.indexOf("/"),l=(c>-1?t.slice(0,c):t).length,d=t.slice(0,l),p=t.slice(l+1),g=d.length,h=p.length,m=h>0,x=d[0],b=x===void 0?"0px":x,D=d[1],C=D===void 0?b:D,S=d[2],E=S===void 0?b:S,O=d[3],R=O===void 0?C:O,z=p[0],B=z===void 0?b:z,y=p[1],T=y===void 0?m?B:C:y,G=p[2],w=G===void 0?m?B:E:G,P=p[3],F=P===void 0?m?T:R:P,_=[b,C,E,R].map(function(q){return ct(q,r)}),A=[B,T,w,F].map(function(q){return ct(q,a)}),I=_.slice(),k=A.slice();s=Lr([I[0],I[1]],r),I[0]=s[0],I[1]=s[1],u=Lr([I[3],I[2]],r),I[3]=u[0],I[2]=u[1],f=Lr([k[0],k[3]],a),k[0]=f[0],k[3]=f[1],v=Lr([k[1],k[2]],a),k[1]=v[0],k[2]=v[1];var j=o?I:I.slice(0,Math.max(i[0],g)),K=o?k:k.slice(0,Math.max(i[1],h));return U(U([],j.map(function(q,N){var H=Ae[N];return{virtual:N>=g,horizontal:Zt[N],vertical:0,pos:[e+q,n+($t[N]===-1?a:0)],sub:!0,raw:_[N],direction:H}}),!0),K.map(function(q,N){var H=Ae[N];return{virtual:N>=h,horizontal:0,vertical:$t[N],pos:[e+(Zt[N]===-1?r:0),n+q],sub:!0,raw:A[N],direction:H}}),!0)}function Os(t,r,a,e,n){n===void 0&&(n=r.length);var i=Zn(t.slice(e)),o=i.horizontalRange,s=i.verticalRange,u=a-e,f=0;if(u===0)f=n;else if(u>0&&u<o[1])f=o[1]-u;else if(u>=s[0])f=s[0]+s[1]-u;else return;t.splice(a,f),r.splice(a,f)}function Bs(t,r,a,e,n,i,o,s,u,f,v){f===void 0&&(f=0),v===void 0&&(v=0);var c=Zn(t.slice(a)),l=c.horizontalRange,d=c.verticalRange;if(e>-1)for(var p=Zt[e]===1?i-f:s-i,g=l[1];g<=e;++g){var h=$t[g]===1?v:u,m=0;if(e===g?m=i:g===0?m=f+p:Zt[g]===-1&&(m=s-(r[a][0]-f)),t.splice(a+g,0,{horizontal:Zt[g],vertical:0,pos:[m,h]}),r.splice(a+g,0,[m,h]),g===0)break}else if(n>-1){var x=$t[n]===1?o-v:u-o;if(l[1]===0&&d[1]===0){var b=[f+x,v];t.push({horizontal:Zt[0],vertical:0,pos:b}),r.push(b)}for(var D=d[0],g=d[1];g<=n;++g){var m=Zt[g]===1?f:s,h=0;if(n===g?h=o:g===0?h=v+x:$t[g]===1?h=r[a+D][1]:$t[g]===-1&&(h=u-(r[a+D][1]-v)),t.push({horizontal:0,vertical:$t[g],pos:[m,h]}),r.push([m,h]),g===0)break}}}function Ts(t,r){r===void 0&&(r=t.map(function(n){return n.raw}));var a=t.map(function(n,i){return n.horizontal?r[i]:null}).filter(function(n){return n!=null}),e=t.map(function(n,i){return n.vertical?r[i]:null}).filter(function(n){return n!=null});return{horizontals:a,verticals:e}}var Gs=[[0,-1,"n"],[1,0,"e"]],Is=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function ae(t,r,a){var e=t.props.clipRelative,n=t.state,i=n.width,o=n.height,s=r,u=s.type,f=s.poses,v=u==="rect",c=u==="circle";if(u==="polygon")return a.map(function(S){return"".concat(Gt(S[0],i,e)," ").concat(Gt(S[1],o,e))});if(v||u==="inset"){var l=a[1][1],d=a[3][0],p=a[7][0],g=a[5][1];if(v)return[l,d,g,p].map(function(S){return"".concat(S,"px")});var h=[l,i-d,o-g,p].map(function(S,E){return Gt(S,E%2?i:o,e)});if(a.length>8){var m=Y(a[4],a[0]),x=m[0],b=m[1];h.push.apply(h,U(["round"],re(f.slice(8).map(function(S,E){return M(M({},S),{pos:a[E]})}),e,x,b,p,l,d,g).styles,!1))}return h}else if(c||u==="ellipse"){var D=a[0],C=Gt(Math.abs(a[1][1]-D[1]),c?Math.sqrt((i*i+o*o)/2):o,e),h=c?[C]:[Gt(Math.abs(a[2][0]-D[0]),i,e),C];return h.push("at",Gt(D[0],i,e),Gt(D[1],o,e)),h}}function Jr(t,r,a,e){var n=[e,(e+r)/2,r],i=[t,(t+a)/2,a];return Is.map(function(o){var s=o[0],u=o[1],f=o[2],v=n[s+1],c=i[u+1];return{vertical:Math.abs(u),horizontal:Math.abs(s),direction:f,pos:[v,c]}})}function Jn(t){var r=[1/0,-1/0],a=[1/0,-1/0];return t.forEach(function(e){var n=e.pos;r[0]=Math.min(r[0],n[0]),r[1]=Math.max(r[1],n[0]),a[0]=Math.min(a[0],n[1]),a[1]=Math.max(a[1],n[1])}),[Math.abs(r[1]-r[0]),Math.abs(a[1]-a[0])]}function ke(t,r,a,e,n){var i,o,s,u,f,v,c;if(t){var l=n;if(!l){var d=getComputedStyle(t),p=d.clipPath;l=p!=="none"?p:d.clip}if(!((!l||l==="none"||l==="auto")&&(l=e,!l))){var g=Ci(l),h=g.prefix,m=h===void 0?l:h,x=g.value,b=x===void 0?"":x,D=m==="circle",C=" ";if(m==="polygon"){var S=de(b||"0% 0%, 100% 0%, 100% 100%, 0% 100%");C=",";var E=S.map(function(Q){var it=Q.split(" "),ot=it[0],zt=it[1];return{vertical:1,horizontal:1,pos:[ct(ot,r),ct(zt,a)]}}),O=cr(E.map(function(Q){return Q.pos}));return{type:m,clipText:l,poses:E,splitter:C,left:O.minX,right:O.maxX,top:O.minY,bottom:O.maxY}}else if(D||m==="ellipse"){var R="",z="",B=0,y=0,S=tr(b);if(D){var T="";i=S[0],T=i===void 0?"50%":i,o=S[2],R=o===void 0?"50%":o,s=S[3],z=s===void 0?"50%":s,B=ct(T,Math.sqrt((r*r+a*a)/2)),y=B}else{var G="",w="";u=S[0],G=u===void 0?"50%":u,f=S[1],w=f===void 0?"50%":f,v=S[3],R=v===void 0?"50%":v,c=S[4],z=c===void 0?"50%":c,B=ct(G,r),y=ct(w,a)}var P=[ct(R,r),ct(z,a)],E=U([{vertical:1,horizontal:1,pos:P,direction:"nesw"}],Gs.slice(0,D?1:2).map(function(ot){return{vertical:Math.abs(ot[1]),horizontal:ot[0],direction:ot[2],sub:!0,pos:[P[0]+ot[0]*B,P[1]+ot[1]*y]}}),!0);return{type:m,clipText:l,radiusX:B,radiusY:y,left:P[0]-B,top:P[1]-y,right:P[0]+B,bottom:P[1]+y,poses:E,splitter:C}}else if(m==="inset"){var S=tr(b||"0 0 0 0"),F=S.indexOf("round"),_=(F>-1?S.slice(0,F):S).length,A=S.slice(_+1),I=S.slice(0,_),k=I[0],j=I[1],K=j===void 0?k:j,q=I[2],N=q===void 0?k:q,H=I[3],Z=H===void 0?K:H,J=[k,N].map(function(ot){return ct(ot,a)}),at=J[0],L=J[1],V=[Z,K].map(function(ot){return ct(ot,r)}),et=V[0],rt=V[1],pt=r-rt,ut=a-L,nt=$n(A,pt-et,ut-at,et,at),E=U(U([],Jr(at,pt,ut,et),!0),nt,!0);return{type:"inset",clipText:l,poses:E,top:at,left:et,right:pt,bottom:ut,radius:A,splitter:C}}else if(m==="rect"){var S=de(b||"0px, ".concat(r,"px, ").concat(a,"px, 0px"));C=",";var lt=S.map(function(St){var Lt=Pa(St).value;return Lt}),at=lt[0],rt=lt[1],L=lt[2],et=lt[3],E=Jr(at,rt,L,et);return{type:"rect",clipText:l,poses:E,top:at,right:rt,bottom:L,left:et,values:S,splitter:C}}}}}function ws(t,r,a,e,n){var i=t[r],o=i.direction,s=i.sub,u=t.map(function(){return[0,0]}),f=o?o.split(""):[];if(e&&r<8){var v=f.filter(function(T){return T==="w"||T==="e"}),c=f.filter(function(T){return T==="n"||T==="s"}),l=v[0],d=c[0];u[r]=a;var p=Jn(t),g=p[0],h=p[1],m=g&&h?g/h:0;if(m&&n){var x=(r+4)%8,b=t[x].pos,D=[0,0];o.indexOf("w")>-1?D[0]=-1:o.indexOf("e")>-1&&(D[0]=1),o.indexOf("n")>-1?D[1]=-1:o.indexOf("s")>-1&&(D[1]=1);var C=Bn([g,h],a,m,D,!0),S=g+C[0],E=h+C[1],O=b[1],R=b[1],z=b[0],B=b[0];D[0]===-1?z=B-S:D[0]===1?B=z+S:(z=z-S/2,B=B+S/2),D[1]===-1?O=R-E:(D[1]===1||(O=R-E/2),R=O+E);var y=Jr(O,B,R,z);t.forEach(function(T,G){u[G][0]=y[G].pos[0]-T.pos[0],u[G][1]=y[G].pos[1]-T.pos[1]})}else t.forEach(function(T,G){var w=T.direction;w&&(w.indexOf(l)>-1&&(u[G][0]=a[0]),w.indexOf(d)>-1&&(u[G][1]=a[1]))}),l&&(u[1][0]=a[0]/2,u[5][0]=a[0]/2),d&&(u[3][1]=a[1]/2,u[7][1]=a[1]/2)}else o&&!s?f.forEach(function(T){var G=T==="n"||T==="s";t.forEach(function(w,P){var F=w.direction,_=w.horizontal,A=w.vertical;!F||F.indexOf(T)===-1||(u[P]=[G||!_?0:a[0],!G||!A?0:a[1]])})}):u[r]=a;return u}function Ps(t,r){var a=on(t,r),e=a[0],n=a[1],i=r.datas,o=i.clipPath,s=i.clipIndex,u=o,f=u.type,v=u.poses,c=u.splitter,l=v.map(function(x){return x.pos});if(f==="polygon")l.splice(s,0,[e,n]);else if(f==="inset"){var d=ys.indexOf(s),p=zs.indexOf(s),g=v.length;if(Bs(v,l,8,d,p,e,n,l[4][0],l[4][1],l[0][0],l[0][1]),g===v.length)return}else return;var h=ae(t,o,l),m="".concat(f,"(").concat(h.join(c),")");W(t,"onClip",$(t,r,M({clipEventType:"added",clipType:f,poses:l,clipStyles:h,clipStyle:m,distX:0,distY:0},Mt({clipPath:m},r))))}function _s(t,r){var a=r.datas,e=a.clipPath,n=a.clipIndex,i=e,o=i.type,s=i.poses,u=i.splitter,f=s.map(function(d){return d.pos}),v=f.length;if(o==="polygon")s.splice(n,1),f.splice(n,1);else if(o==="inset"){if(n<8||(Os(s,f,n,8,v),v===s.length))return}else return;var c=ae(t,e,f),l="".concat(o,"(").concat(c.join(u),")");W(t,"onClip",$(t,r,M({clipEventType:"removed",clipType:o,poses:f,clipStyles:c,clipStyle:l,distX:0,distY:0},Mt({clipPath:l},r))))}var As={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[`.control.clip-control {
    background: #6d6;
    cursor: pointer;
}
.control.clip-control.clip-radius {
    background: #d66;
}
.line.clip-line {
    background: #6e6;
    cursor: move;
    z-index: 1;
}
.clip-area {
    position: absolute;
    top: 0;
    left: 0;
}
.clip-ellipse {
    position: absolute;
    cursor: move;
    border: 1px solid #6d6;
    border: var(--zoompx) solid #6d6;
    border-radius: 50%;
    transform-origin: 0px 0px;
}`,`:host {
    --bounds-color: #d66;
}`,`.guideline {
    pointer-events: none;
    z-index: 2;
}`,`.line.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}`],render:function(t,r){var a=t.props,e=a.customClipPath,n=a.defaultClipPath,i=a.clipArea,o=a.zoom,s=a.groupable,u=t.getState(),f=u.target,v=u.width,c=u.height,l=u.allMatrix,d=u.is3d,p=u.left,g=u.top,h=u.pos1,m=u.pos2,x=u.pos3,b=u.pos4,D=u.clipPathState,C=u.snapBoundInfos,S=u.rotation;if(!f||s)return[];var E=ke(f,v,c,n||"inset",D||e);if(!E)return[];var O=d?4:3,R=E.type,z=E.poses,B=z.map(function(ut){var nt=ht(l,ut.pos,O);return[nt[0]-p,nt[1]-g]}),y=[],T=[],G=R==="rect",w=R==="inset",P=R==="polygon";if(G||w||P){var F=w?B.slice(0,8):B;T=F.map(function(ut,nt){var lt=nt===0?F[F.length-1]:F[nt-1],Q=dt(lt,ut),it=Sn(lt,ut);return r.createElement("div",{key:"clipLine".concat(nt),className:X("line","clip-line","snap-control"),"data-clip-index":nt,style:{width:"".concat(it,"px"),transform:"translate(".concat(lt[0],"px, ").concat(lt[1],"px) rotate(").concat(Q,"rad) scaleY(").concat(o,")")}})})}if(y=B.map(function(ut,nt){return r.createElement("div",{key:"clipControl".concat(nt),className:X("control","clip-control","snap-control"),"data-clip-index":nt,style:{transform:"translate(".concat(ut[0],"px, ").concat(ut[1],"px) rotate(").concat(S,"rad) scale(").concat(o,")")}})}),w&&y.push.apply(y,B.slice(8).map(function(ut,nt){return r.createElement("div",{key:"clipRadiusControl".concat(nt),className:X("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+nt,style:{transform:"translate(".concat(ut[0],"px, ").concat(ut[1],"px) rotate(").concat(S,"rad) scale(").concat(o,")")}})})),R==="circle"||R==="ellipse"){var _=E.left,A=E.top,I=E.radiusX,k=E.radiusY,j=Y(ht(l,[_,A],O),ht(l,[0,0],O)),K=j[0],q=j[1],N="none";if(!i){for(var H=Math.max(10,I/5,k/5),Z=[],J=0;J<=H;++J){var at=Math.PI*2/H*J;Z.push([I+(I-o)*Math.cos(at),k+(k-o)*Math.sin(at)])}Z.push([I,-2]),Z.push([-2,-2]),Z.push([-2,k*2+2]),Z.push([I*2+2,k*2+2]),Z.push([I*2+2,-2]),Z.push([I,-2]),N="polygon(".concat(Z.map(function(ut){return"".concat(ut[0],"px ").concat(ut[1],"px")}).join(", "),")")}y.push(r.createElement("div",{key:"clipEllipse",className:X("clip-ellipse","snap-control"),style:{width:"".concat(I*2,"px"),height:"".concat(k*2,"px"),clipPath:N,transform:"translate(".concat(-p+K,"px, ").concat(-g+q,"px) ").concat(na(l))}}))}if(i){var L=Tt(U([h,m,x,b],B,!0)),V=L.width,et=L.height,rt=L.left,pt=L.top;if(P||G||w){var Z=w?B.slice(0,8):B;y.push(r.createElement("div",{key:"clipArea",className:X("clip-area","snap-control"),style:{width:"".concat(V,"px"),height:"".concat(et,"px"),transform:"translate(".concat(rt,"px, ").concat(pt,"px)"),clipPath:"polygon(".concat(Z.map(function(nt){return"".concat(nt[0]-rt,"px ").concat(nt[1]-pt,"px")}).join(", "),")")}}))}}return C&&["vertical","horizontal"].forEach(function(ut){var nt=C[ut],lt=ut==="horizontal";nt.isSnap&&T.push.apply(T,nt.snap.posInfos.map(function(Q,it){var ot=Q.pos,zt=Y(ht(l,lt?[0,ot]:[ot,0],O),[p,g]),Ht=Y(ht(l,lt?[v,ot]:[ot,c],O),[p,g]);return zr(r,"",zt,Ht,o,"clip".concat(ut,"snap").concat(it),"guideline")})),nt.isBound&&T.push.apply(T,nt.bounds.map(function(Q,it){var ot=Q.pos,zt=Y(ht(l,lt?[0,ot]:[ot,0],O),[p,g]),Ht=Y(ht(l,lt?[v,ot]:[ot,c],O),[p,g]);return zr(r,"",zt,Ht,o,"clip".concat(ut,"bounds").concat(it),"guideline","bounds","bold")}))}),U(U([],y,!0),T,!0)},dragControlCondition:function(t,r){return r.inputEvent&&(r.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,r){var a=t.props,e=a.dragWithClip,n=e===void 0?!0:e;return n?!1:this.dragControlStart(t,r)},drag:function(t,r){return this.dragControl(t,M(M({},r),{isDragTarget:!0}))},dragEnd:function(t,r){return this.dragControlEnd(t,r)},dragControlStart:function(t,r){var a=t.state,e=t.props,n=e.defaultClipPath,i=e.customClipPath,o=a.target,s=a.width,u=a.height,f=r.inputEvent?r.inputEvent.target:null,v=f&&f.getAttribute("class")||"",c=r.datas,l=ke(o,s,u,n||"inset",i);if(!l)return!1;var d=l.clipText,p=l.type,g=l.poses,h=W(t,"onClipStart",$(t,r,{clipType:p,clipStyle:d,poses:g.map(function(m){return m.pos})}));return h===!1?(c.isClipStart=!1,!1):(c.isControl=v&&v.indexOf("clip-control")>-1,c.isLine=v.indexOf("clip-line")>-1,c.isArea=v.indexOf("clip-area")>-1||v.indexOf("clip-ellipse")>-1,c.clipIndex=f?parseInt(f.getAttribute("data-clip-index"),10):-1,c.clipPath=l,c.isClipStart=!0,a.clipPathState=d,er(t,r),!0)},dragControl:function(t,r){var a,e,n=r.datas,i=r.originalDatas,o=r.isDragTarget;if(!n.isClipStart)return!1;var s=n,u=s.isControl,f=s.isLine,v=s.isArea,c=s.clipIndex,l=s.clipPath;if(!l)return!1;var d=rr(t.props,"clippable"),p=d.keepRatio,g=0,h=0,m=i.draggable,x=Pt(r);o&&m?(a=m.prevBeforeDist,g=a[0],h=a[1]):(g=x[0],h=x[1]);var b=[g,h],D=t.state,C=D.width,S=D.height,E=!v&&!u&&!f,O=l.type,R=l.poses,z=l.splitter,B=R.map(function(ft){return ft.pos});E&&(g=-g,h=-h);var y=!u||R[c].direction==="nesw",T=O==="inset"||O==="rect",G=R.map(function(){return[0,0]});if(u&&!y){var w=R[c],P=w.horizontal,F=w.vertical,_=[g*Math.abs(P),h*Math.abs(F)];G=ws(R,c,_,T,p)}else y&&(G=B.map(function(){return[g,h]}));var A=B.map(function(ft,Et){return tt(ft,G[Et])}),I=U([],A,!0);D.snapBoundInfos=null;var k=l.type==="circle",j=l.type==="ellipse";if(k||j){var K=Tt(A),q=Math.abs(K.bottom-K.top),N=Math.abs(j?K.right-K.left:q),H=A[0][1]+q,Z=A[0][0]-N,J=A[0][0]+N;k&&(I.push([J,K.bottom]),G.push([1,0])),I.push([K.left,H]),G.push([0,1]),I.push([Z,K.bottom]),G.push([1,0])}var at=Fn((d.clipHorizontalGuidelines||[]).map(function(ft){return ct("".concat(ft),S)}),(d.clipVerticalGuidelines||[]).map(function(ft){return ct("".concat(ft),C)}),C,S),L=[],V=[];if(k||j)L=[I[4][0],I[2][0]],V=[I[1][1],I[3][1]];else if(T){var et=[I[0],I[2],I[4],I[6]],rt=[G[0],G[2],G[4],G[6]];L=et.filter(function(ft,Et){return rt[Et][0]}).map(function(ft){return ft[0]}),V=et.filter(function(ft,Et){return rt[Et][1]}).map(function(ft){return ft[1]})}else L=I.filter(function(ft,Et){return G[Et][0]}).map(function(ft){return ft[0]}),V=I.filter(function(ft,Et){return G[Et][1]}).map(function(ft){return ft[1]});var pt=[0,0],ut=Oe(at,d.clipTargetBounds&&{left:0,top:0,right:C,bottom:S},L,V,5),nt=ut.horizontal,lt=ut.vertical,Q=nt.offset,it=lt.offset;if(nt.isBound&&(pt[1]+=Q),lt.isBound&&(pt[0]+=it),(j||k)&&G[0][0]===0&&G[0][1]===0){var K=Tt(A),ot=K.bottom-K.top,zt=j?K.right-K.left:ot,Ht=lt.isBound?Math.abs(it):lt.snapIndex===0?-it:it,gt=nt.isBound?Math.abs(Q):nt.snapIndex===0?-Q:Q;zt-=Ht,ot-=gt,k&&(ot=wn(lt,nt)>0?ot:zt,zt=ot);var St=I[0];I[1][1]=St[1]-ot,I[2][0]=St[0]+zt,I[3][1]=St[1]+ot,I[4][0]=St[0]-zt}else if(T&&p&&u){var Lt=Jn(R),nr=Lt[0],oe=Lt[1],se=nr&&oe?nr/oe:0,si=R[c],wr=si.direction||"",fa=I[1][1],H=I[5][1],Z=I[7][0],J=I[3][0];Q<=it?Q=it/se:it=Q*se,wr.indexOf("w")>-1?Z-=it:wr.indexOf("e")>-1?J-=it:(Z+=it/2,J-=it/2),wr.indexOf("n")>-1?fa-=Q:wr.indexOf("s")>-1?H-=Q:(fa+=Q/2,H-=Q/2);var ui=Jr(fa,J,H,Z);I.forEach(function(le,vi){var va;va=ui[vi].pos,le[0]=va[0],le[1]=va[1]})}else I.forEach(function(ft,Et){var fe=G[Et];fe[0]&&(ft[0]-=it),fe[1]&&(ft[1]-=Q)});var ue=ae(t,l,A),la="".concat(O,"(").concat(ue.join(z),")");if(D.clipPathState=la,k||j)L=[I[4][0],I[2][0]],V=[I[1][1],I[3][1]];else if(T){var et=[I[0],I[2],I[4],I[6]];L=et.map(function(Et){return Et[0]}),V=et.map(function(Et){return Et[1]})}else L=I.map(function(ft){return ft[0]}),V=I.map(function(ft){return ft[1]});if(D.snapBoundInfos=Oe(at,d.clipTargetBounds&&{left:0,top:0,right:C,bottom:S},L,V,1),m){var fi=D.is3d,li=D.allMatrix,ci=fi?4:3,ca=pt;o&&(ca=[b[0]+pt[0]-x[0],b[1]+pt[1]-x[1]]),m.deltaOffset=xt(li,[ca[0],ca[1],0,0],ci)}return W(t,"onClip",$(t,r,M({clipEventType:"changed",clipType:O,poses:A,clipStyle:la,clipStyles:ue,distX:g,distY:h},Mt((e={},e[O==="rect"?"clip":"clipPath"]=la,e),r)))),!0},dragControlEnd:function(t,r){this.unset(t);var a=r.isDrag,e=r.datas,n=r.isDouble,i=e.isLine,o=e.isClipStart,s=e.isControl;return o?(W(t,"onClipEnd",Bt(t,r,{})),n&&(s?_s(t,r):i&&Ps(t,r)),n||a):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},ks={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[`:host[data-able-origindraggable] .control.origin {
    pointer-events: auto;
}`],dragControlCondition:function(t,r){return r.isRequest?r.requestAble==="originDraggable":mt(r.inputEvent.target,X("origin"))},dragControlStart:function(t,r){var a=r.datas;er(t,r);var e=$(t,r,{dragStart:Ct.dragStart(t,new vr().dragStart([0,0],r))}),n=W(t,"onDragOriginStart",e);return a.startOrigin=t.state.transformOrigin,a.startTargetOrigin=t.state.targetOrigin,a.prevOrigin=[0,0],a.isDragOrigin=!0,n===!1?(a.isDragOrigin=!1,!1):e},dragControl:function(t,r){var a=r.datas,e=r.isPinch,n=r.isRequest;if(!a.isDragOrigin)return!1;var i=Pt(r),o=i[0],s=i[1],u=t.state,f=u.width,v=u.height,c=u.offsetMatrix,l=u.targetMatrix,d=u.is3d,p=t.props.originRelative,g=p===void 0?!0:p,h=d?4:3,m=[o,s];if(n){var x=r.distOrigin;(x[0]||x[1])&&(m=x)}var b=tt(a.startOrigin,m),D=tt(a.startTargetOrigin,m),C=Y(m,a.prevOrigin),S=Ir(c,l,b,h),E=t.getRect(),O=Tt(qt(S,f,v,h)),R=[E.left-O.left,E.top-O.top];a.prevOrigin=m;var z=[Gt(D[0],f,g),Gt(D[1],v,g)].join(" "),B=Ct.drag(t,Gr(r,t.state,R,!!e,!1)),y=$(t,r,M(M({width:f,height:v,origin:b,dist:m,delta:C,transformOrigin:z,drag:B},Mt({transformOrigin:z,transform:B.transform},r)),{afterTransform:B.transform}));return W(t,"onDragOrigin",y),y},dragControlEnd:function(t,r){var a=r.datas;return a.isDragOrigin?(W(t,"onDragOriginEnd",Bt(t,r,{})),!0):!1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragGroupControlStart:function(t,r){var a=this.dragControlStart(t,r);return!!a},dragGroupControl:function(t,r){var a=this.dragControl(t,r);return a?(t.transformOrigin=a.transformOrigin,!0):!1},request:function(t){var r={},a=t.getRect(),e=0,n=0,i=a.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:r}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-i[0],o[1]=s.origin[1]-i[1]):("x"in s?e=s.x-a.left:"deltaX"in s&&(e+=s.deltaX),"y"in s?n=s.y-a.top:"deltaY"in s&&(n+=s.deltaY)),{datas:r,distX:e,distY:n,distOrigin:o}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function Fs(t,r,a,e){var n=t.filter(function(u){var f=u.virtual,v=u.horizontal;return v&&!f}).length,i=t.filter(function(u){var f=u.virtual,v=u.vertical;return v&&!f}).length,o=-1;if(r===0&&(n===0?o=0:n===1&&(o=1)),r===2&&(n<=2?o=2:n<=3&&(o=3)),r===3&&(i===0?o=4:i<4&&(o=7)),r===1&&(i<=1?o=5:i<=2&&(o=6)),!(o===-1||!t[o].virtual)){var s=t[o];Ns(t,o),o<4?s.pos[0]=a:s.pos[1]=e}}function Ns(t,r){r<4?t.slice(0,r+1).forEach(function(a){a.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,r+1).forEach(function(a){a.virtual=!1}))}function Ws(t,r){r<4?t.slice(r,4).forEach(function(a){a.virtual=!0}):t.slice(r).forEach(function(a){a.virtual=!0})}function Fe(t,r,a,e,n){e===void 0&&(e=[0,0]);var i=[];return!t||t==="0px"?i=[]:i=tr(t),$n(i,r,a,0,0,e,n)}function Ne(t,r,a,e,n){var i=t.state,o=i.width,s=i.height,u=re(n,t.props.roundRelative,o,s),f=u.raws,v=u.styles,c=u.radiusPoses,l=Ts(c,f),d=l.horizontals,p=l.verticals,g=v.join(" ");i.borderRadiusState=g;var h=$(t,r,M({horizontals:d,verticals:p,borderRadius:g,width:o,height:s,delta:e,dist:a},Mt({borderRadius:g},r)));return W(t,"onRound",h),h}function We(t){var r=t.getState().style,a=r.borderRadius||"";if(!a&&t.props.groupable){var e=t.getTargets()[0];e&&(a=getComputedStyle(e).borderRadius,r.borderRadius=a)}return a}var Hs={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd",onRoundGroupStart:"roundGroupStart",onRoundGroup:"roundGroup",onRoundGroupEnd:"roundGroupEnd"},css:[`.control.border-radius {
    background: #d66;
    cursor: pointer;
    z-index: 3;
}`,`.control.border-radius.vertical {
    background: #d6d;
    z-index: 2;
}`,`.control.border-radius.virtual {
    opacity: 0.5;
    z-index: 1;
}`,`:host.round-line-clickable .line.direction {
    cursor: pointer;
}`],className:function(t){var r=t.props.roundClickable;return r===!0||r==="line"?X("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},render:function(t,r){var a=t.getState(),e=a.target,n=a.width,i=a.height,o=a.allMatrix,s=a.is3d,u=a.left,f=a.top,v=a.borderRadiusState,c=t.props,l=c.minRoundControls,d=l===void 0?[0,0]:l,p=c.maxRoundControls,g=p===void 0?[4,4]:p,h=c.zoom,m=c.roundPadding,x=m===void 0?0:m,b=c.isDisplayShadowRoundControls,D=c.groupable;if(!e)return null;var C=v||We(t),S=s?4:3,E=Fe(C,n,i,d,!0);if(!E)return null;var O=0,R=0,z=D?[0,0]:[u,f];return E.map(function(B,y){var T=B.horizontal,G=B.vertical,w=B.direction||"",P=U([],B.pos,!0);R+=Math.abs(T),O+=Math.abs(G),T&&w.indexOf("n")>-1&&(P[1]-=x),G&&w.indexOf("w")>-1&&(P[0]-=x),T&&w.indexOf("s")>-1&&(P[1]+=x),G&&w.indexOf("e")>-1&&(P[0]+=x);var F=Y(ht(o,P,S),z),_=B.vertical?O<=g[1]&&(b||!B.virtual):R<=g[0]&&(b||!B.virtual);return r.createElement("div",{key:"borderRadiusControl".concat(y),className:X("control","border-radius",B.vertical?"vertical":"",B.virtual?"virtual":""),"data-radius-index":y,style:{display:_?"block":"none",transform:"translate(".concat(F[0],"px, ").concat(F[1],"px) scale(").concat(h,")")}})})},dragControlCondition:function(t,r){if(!r.inputEvent||r.isRequest)return!1;var a=r.inputEvent.target.getAttribute("class")||"";return a.indexOf("border-radius")>-1||a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragControlStart:function(t,r){var a=r.inputEvent,e=r.datas,n=a.target,i=n.getAttribute("class")||"",o=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,u=o?parseInt(n.getAttribute("data-radius-index"),10):-1,f=-1;if(s){var v=n.getAttribute("data-line-key")||"";v&&(f=parseInt(v.replace(/render-line-/g,""),10),isNaN(f)&&(f=-1))}if(!o&&!s)return!1;var c=$(t,r,{}),l=W(t,"onRoundStart",c);if(l===!1)return!1;e.lineIndex=f,e.controlIndex=u,e.isControl=o,e.isLine=s,er(t,r);var d=t.props,p=d.roundRelative,g=d.minRoundControls,h=g===void 0?[0,0]:g,m=t.state,x=m.width,b=m.height;e.isRound=!0,e.prevDist=[0,0];var D=We(t),C=Fe(D||"",x,b,h,!0)||[];return e.controlPoses=C,m.borderRadiusState=re(C,p,x,b).styles.join(" "),c},dragControl:function(t,r){var a=r.datas,e=a.controlPoses;if(!a.isRound||!a.isControl||!e.length)return!1;var n=a.controlIndex,i=Pt(r),o=i[0],s=i[1],u=[o,s],f=Y(u,a.prevDist),v=t.props.maxRoundControls,c=v===void 0?[4,4]:v,l=t.state,d=l.width,p=l.height,g=e[n],h=g.vertical,m=g.horizontal,x=e.map(function(D){var C=D.horizontal,S=D.vertical,E=[C*m*u[0],S*h*u[1]];if(C){if(c[0]===1)return E;if(c[0]<4&&C!==m)return E}else{if(c[1]===0)return E[1]=S*m*u[0]/d*p,E;if(h){if(c[1]===1)return E;if(c[1]<4&&S!==h)return E}}return[0,0]});x[n]=u;var b=e.map(function(D,C){return M(M({},D),{pos:tt(D.pos,x[C])})});return n<4?b.slice(0,n+1).forEach(function(D){D.virtual=!1}):b.slice(4,n+1).forEach(function(D){D.virtual=!1}),a.prevDist=[o,s],Ne(t,r,u,f,b)},dragControlEnd:function(t,r){var a=t.state;a.borderRadiusState="";var e=r.datas,n=r.isDouble;if(!e.isRound)return!1;var i=e.isControl,o=e.controlIndex,s=e.isLine,u=e.lineIndex,f=e.controlPoses,v=f.filter(function(m){var x=m.virtual;return x}).length,c=t.props.roundClickable,l=c===void 0?!0:c;if(n&&l){if(i&&(l===!0||l==="control"))Ws(f,o);else if(s&&(l===!0||l==="line")){var d=on(t,r),p=d[0],g=d[1];Fs(f,u,p,g)}v!==f.filter(function(m){var x=m.virtual;return x}).length&&Ne(t,r,[0,0],[0,0],f)}var h=Bt(t,r,{});return W(t,"onRoundEnd",h),a.borderRadiusState="",h},dragGroupControlStart:function(t,r){var a=this.dragControlStart(t,r);if(!a)return!1;var e=t.moveables,n=t.props.targets,i=wt(t,"roundable",r),o=M({targets:t.props.targets,events:i.map(function(s,u){return M(M({},s),{target:n[u],moveable:e[u],currentTarget:e[u]})})},a);return W(t,"onRoundGroupStart",o),a},dragGroupControl:function(t,r){var a=this.dragControl(t,r);if(!a)return!1;var e=t.moveables,n=t.props.targets,i=wt(t,"roundable",r),o=M({targets:t.props.targets,events:i.map(function(s,u){return M(M(M({},s),{target:n[u],moveable:e[u],currentTarget:e[u]}),Mt({borderRadius:a.borderRadius},s))})},a);return W(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,r){var a=t.moveables,e=t.props.targets,n=wt(t,"roundable",r);ia(t,"onRound",function(s){var u=M({targets:t.props.targets,events:n.map(function(f,v){return M(M(M({},f),{target:e[v],moveable:a[v],currentTarget:a[v]}),Mt({borderRadius:s.borderRadius},f))})},s);W(t,"onRoundGroup",u)});var i=this.dragControlEnd(t,r);if(!i)return!1;var o=M({targets:t.props.targets,events:n.map(function(s,u){var f;return M(M({},s),{target:e[u],moveable:a[u],currentTarget:a[u],lastEvent:(f=s.datas)===null||f===void 0?void 0:f.lastEvent})})},i);return W(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function Ls(t,r){var a=r?4:3,e=bt(a),n="matrix".concat(r?"3d":"","(").concat(e.join(","),")");return t===n||t==="matrix(1,0,0,1,0,0)"}var Qn={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,r){var a=t.state,e=a.is3d,n=a.target,i=a.targetMatrix,o=n==null?void 0:n.style.transform,s=e?"matrix3d(".concat(i.join(","),")"):"matrix(".concat($e(i,!0),")"),u=!o||o==="none"?s:o;r.datas.startTransforms=Ls(u,e)?[]:tr(u)},resetStyle:function(t){var r=t.datas;r.nextStyle={},r.nextTransforms=t.datas.startTransforms,r.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,r){return $(t,r,{setTransform:function(a){r.datas.startTransforms=Dt(a)?a:tr(a)},isPinch:!!r.isPinch})},fillDragParams:function(t,r){return $(t,r,{isPinch:!!r.isPinch})},dragStart:function(t,r){this.setTransform(t,r),this.resetStyle(r),W(t,"onBeforeRenderStart",this.fillDragStartParams(t,r))},drag:function(t,r){this.resetStyle(r),W(t,"onBeforeRender",$(t,r,{isPinch:!!r.isPinch}))},dragEnd:function(t,r){W(t,"onBeforeRenderEnd",$(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag}))},dragGroupStart:function(t,r){var a=this;this.dragStart(t,r);var e=wt(t,"beforeRenderable",r),n=t.moveables,i=e.map(function(o,s){var u=n[s];return a.setTransform(u,o),a.resetStyle(o),a.fillDragStartParams(u,o)});W(t,"onBeforeRenderGroupStart",$(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,r){var a=this;this.drag(t,r);var e=wt(t,"beforeRenderable",r),n=t.moveables,i=e.map(function(o,s){var u=n[s];return a.resetStyle(o),a.fillDragParams(u,o)});W(t,"onBeforeRenderGroup",$(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,r){this.dragEnd(t,r),W(t,"onBeforeRenderGroupEnd",$(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets}))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)}},ti={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,r){W(t,"onRenderStart",$(t,r,{isPinch:!!r.isPinch}))},drag:function(t,r){W(t,"onRender",this.fillDragParams(t,r))},dragAfter:function(t,r){if(r.resultCount)return this.drag(t,r)},dragEnd:function(t,r){W(t,"onRenderEnd",this.fillDragEndParams(t,r))},dragGroupStart:function(t,r){W(t,"onRenderGroupStart",$(t,r,{isPinch:!!r.isPinch,targets:t.props.targets}))},dragGroup:function(t,r){var a=this,e=wt(t,"beforeRenderable",r),n=t.moveables,i=e.map(function(o,s){var u=n[s];return a.fillDragParams(u,o)});W(t,"onRenderGroup",$(t,r,M(M({isPinch:!!r.isPinch,targets:t.props.targets,transform:_r(r)},Mt(Ar(r))),{events:i})))},dragGroupEnd:function(t,r){var a=this,e=wt(t,"beforeRenderable",r),n=t.moveables,i=e.map(function(o,s){var u=n[s];return a.fillDragEndParams(u,o)});W(t,"onRenderGroupEnd",$(t,r,M({isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets,events:i,transform:_r(r)},Mt(Ar(r)))))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlAfter:function(t,r){return this.dragAfter(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)},fillDragParams:function(t,r){return $(t,r,M({isPinch:!!r.isPinch,transform:_r(r)},Mt(Ar(r))))},fillDragEndParams:function(t,r){return $(t,r,M({isPinch:!!r.isPinch,isDrag:r.isDrag,transform:_r(r)},Mt(Ar(r))))}};function Cr(t,r,a,e,n,i,o){var s=n==="Start",u=t.state.target,f=i.isRequest;if(!u||s&&e.indexOf("Control")>-1&&!f&&t.areaElement===i.inputEvent.target)return!1;var v="".concat(a).concat(e).concat(n),c="".concat(a).concat(e,"Condition"),l=n==="End",d=n==="After",p=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());p&&t.updateRect(n,!0,!1),i.clientDistX=i.distX,i.clientDistY=i.distY,n===""&&!f&&On(t.state,i);var g=U([],t[r],!0);if(f){var h=i.requestAble;g.some(function(y){return y.name===h})||g.push.apply(g,t.props.ables.filter(function(y){return y.name===h}))}if(!g.length||g.every(function(y){return y.dragRelation}))return!1;var m=U(U([Qn],g,!0),[ti],!1).filter(function(y){return y[v]}),x=i.datas;p&&m.forEach(function(y){y.unset&&y.unset(t)});var b=i.inputEvent,D;l&&b&&(D=document.elementFromPoint(i.clientX,i.clientY)||b.target);var C=0,S=!1,E=function(){var y;S=!0,(y=i.stop)===null||y===void 0||y.call(i)},O=m.filter(function(y){var T=y.name,G=x[T]||(x[T]={});if(s&&(G.isEventStart=!y[c]||y[c](t,i)),G.isEventStart){var w=y[v](t,M(M({},i),{stop:E,resultCount:C,datas:G,originalDatas:x,inputTarget:D}));return t._emitter.off(),s&&w===!1&&(G.isEventStart=!1),C+=w||G.isEventStart?1:0,w}return!1}),R=O.length,z=!1;if(S&&(z=!0),!z&&s&&m.length&&!R&&(z=m.filter(function(y){var T=y.name,G=x[T];return G.isEventStart?y.dragRelation!=="strong":!1}).length),(l||z)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(y){y.state.gestos={}}),m.forEach(function(y){y.unset&&y.unset(t)})),s&&!z&&!f&&R&&(i==null||i.preventDefault()),t.isUnmounted||z)return!1;if(!s&&R&&!o||l){var B=t.props.flushSync||hn;B(function(){t.updateRect(l?n:"",!0,!1),t.forceUpdate()})}return!s&&!l&&!d&&R&&!o&&Cr(t,r,a,e,n+"After",i),!0}function Ia(t){return function(r){var a=t.props.dragTarget,e=r.inputEvent.target,n=t.areaElement;return a&&(e===a||a.contains(e))||e===n||!t.isMoveableElement(e)&&!t.controlBox.getElement().contains(e)||mt(e,"moveable-area")||mt(e,"moveable-padding")||mt(e,"moveable-edgeDraggable")}}function ri(t,r,a){var e=t.controlBox.getElement(),n=[],i=t.props.dragTarget;return n.push(e),(!t.props.dragArea||i)&&n.push(r),ee(t,n,"targetAbles",a,{dragStart:Ia(t),pinchStart:Ia(t)})}function ee(t,r,a,e,n){n===void 0&&(n={});var i=a==="targetAbles",o=t.props,s=o.pinchOutside,u=o.pinchThreshold,f=o.preventClickEventOnDrag,v=o.preventClickDefault,c=o.checkInput,l={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:u,pinchOutside:s,preventClickEventOnDrag:i?f:!1,preventClickEventOnDragStart:i?v:!1,preventClickEventByCondition:i?null:function(g){return t.controlBox.getElement().contains(g.target)},checkInput:i?c:!1},d=new Pi(r,l),p=e==="Control";return["drag","pinch"].forEach(function(g){["Start","","End"].forEach(function(h){d.on("".concat(g).concat(h),function(m){var x,b=m.eventType;if(n[b]&&!n[b](m)){m.stop();return}var D=Cr(t,a,g,e,h,m);D?(t.props.stopPropagation||h==="Start"&&p)&&((x=m==null?void 0:m.inputEvent)===null||x===void 0||x.stopPropagation()):m.stop()})})}),d}var Vs=function(){function t(a,e,n){var i=this;this.target=a,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(o){var s=i.eventName,u=i.moveable;u.state.disableNativeEvent||i.ables.forEach(function(f){f[s](u,{inputEvent:o})})},a.addEventListener(n.toLowerCase(),this._onEvent)}var r=t.prototype;return r.setAbles=function(a){this.ables=a},r.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Ys(t){if(t&&t.getRootNode){var r=t.getRootNode();if(r.nodeType===11)return r}}function He(t,r,a){for(var e=t,n=[],i=document.documentElement||document.body,o=!a&&t===r||t===i,s=o,u=!1,f=3,v,c,l,d=!1,p=yr(r,r,!0).offsetParent,g=1;e&&!s;){s=o;var h=getComputedStyle(e),m=h.position,x=mn(e,h),b=Oi(io(x)),D=m==="fixed",C={hasTransform:!1,fixedContainer:null};D&&(d=!0,C=fo(e),p=C.fixedContainer);var S=b.length;!u&&S===16&&(u=!0,f=4,Ma(n),l&&(l=Ft(l,3,4))),u&&S===9&&(b=Ft(b,3,4));var E=uo(e,t,h),O=E.tagName,R=E.hasOffset,z=E.isSVG,B=E.origin,y=E.targetOrigin,T=E.offset,G=T[0],w=T[1];O==="svg"&&l&&(n.push({type:"target",target:e,matrix:lo(e,f)}),n.push({type:"offset",target:e,matrix:bt(f)}));var P=void 0,F=!1,_=!1,A=parseFloat(h.zoom)||1;if(D)P=C.fixedContainer,F=!0;else{var I=yr(e,r,!1,!0,h),k=I.offsetZoom;if(P=I.offsetParent,F=I.isEnd,_=I.isStatic,g*=k,k!==1&&_)G-=P.offsetLeft,w-=P.offsetTop;else if(Ni){var j=I.parentSlotElement;if(j){for(var K=P,q=0,N=0;K&&Ys(K);)q+=K.offsetLeft,N+=K.offsetTop,K=K.offsetParent;G-=q,w-=N}}}an&&!Wi&&R&&!z&&_&&(m==="relative"||m==="static")&&(G-=P.offsetLeft,w-=P.offsetTop,o=o||F);var H=0,Z=0,J=0,at=0;if(D)R&&C.hasTransform&&(J=P.clientLeft,at=P.clientTop);else if(R&&p!==P&&(H=P.clientLeft,Z=P.clientTop),R&&P===i){var L=xn(e,!1,h);G+=L[0],w+=L[1]}if(n.push({type:"target",target:e,matrix:Ur(b,f,B)}),R){var V=e===t,et=V?0:e.scrollLeft,rt=V?0:e.scrollTop;n.push({type:"offset",target:e,matrix:Rr([G-et+H-J,w-rt+Z-at],f)})}else n.push({type:"offset",target:e,origin:B});if(A!==1&&n.push({type:"zoom",target:e,matrix:Ur(ka([A,A],f),f,[0,0])}),l||(l=b),v||(v=B),c||(c=y),s||D)break;e=P,o=F,(!a||e===i)&&(s=o)}return l||(l=bt(f)),v||(v=[0,0]),c||(c=[0,0]),{zoom:g,offsetContainer:p,matrixes:n,targetMatrix:l,transformOrigin:v,targetOrigin:c,is3d:u,hasFixed:d}}function Xs(t,r,a,e){var n;a===void 0&&(a=r);var i=He(t,r),o=i.matrixes,s=i.is3d,u=i.targetMatrix,f=i.transformOrigin,v=i.targetOrigin,c=i.offsetContainer,l=i.hasFixed,d=i.zoom,p=He(c,a,!0),g=p.matrixes,h=p.is3d,m=p.offsetContainer,x=p.zoom,b=e||h||s,D=b?4:3,C=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,S=u,E=bt(D),O=bt(D),R=bt(D),z=bt(D),B=o.length;g.reverse(),o.reverse(),!s&&b&&(S=Ft(S,3,4),Ma(o)),!h&&b&&Ma(g),g.forEach(function(_){O=xt(O,_.matrix,D)});var y=a||document.body,T=((n=g[0])===null||n===void 0?void 0:n.target)||yr(y,y,!0).offsetParent,G=g.slice(1).reduce(function(_,A){return xt(_,A.matrix,D)},bt(D));o.forEach(function(_,A){if(B-2===A&&(R=E.slice()),B-1===A&&(z=E.slice()),!_.matrix){var I=o[A+1],k=vo(_,I,T,D,xt(G,E,D));_.matrix=Rr(k,D)}E=xt(E,_.matrix,D)});var w=!C&&s;S||(S=bt(w?4:3));var P=na(C&&S.length===16?Ft(S,4,3):S,w),F=O;return O=Je(O,D,D),{hasZoom:d!==1||x!==1,hasFixed:l,rootMatrix:O,originalRootMatrix:F,beforeMatrix:R,offsetMatrix:z,allMatrix:E,targetMatrix:S,targetTransform:P,transformOrigin:f,targetOrigin:v,is3d:b,offsetContainer:c,offsetRootContainer:m}}function qs(t,r,a,e){a===void 0&&(a=r);var n=0,i=0,o=0,s={},u=bn(t);if(t&&(n=u.offsetWidth,i=u.offsetHeight),t){var f=Xs(t,r,a,e),v=ur(f.allMatrix,f.transformOrigin,n,i);s=M(M({},f),v);var c=ur(f.allMatrix,[50,50],100,100);o=Dn([c.pos1,c.pos2],c.direction)}var l=e?4:3;return M(M(M({hasZoom:!1,width:n,height:i,rotation:o},u),{originalRootMatrix:bt(l),rootMatrix:bt(l),beforeMatrix:bt(l),offsetMatrix:bt(l),allMatrix:bt(l),targetMatrix:bt(l),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!e,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),s)}function wa(t,r,a,e,n,i){i===void 0&&(i=[]);var o=1,s=[0,0],u=kr(),f=kr(),v=kr(),c=kr(),l=[0,0],d={},p=qs(r,a,n,!0);if(r){var g=getComputedStyle(r);i.forEach(function(y){d[y]=g[y]});var h=p.is3d?4:3,m=ur(p.offsetMatrix,tt(p.transformOrigin,Qe(p.targetMatrix,h)),p.width,p.height);o=m.direction,s=tt(m.origin,[m.left-p.left,m.top-p.top]),c=Dr(p.offsetRootContainer);var x=yr(e,e,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var b=ur(xt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),D=ur(p.originalRootMatrix,jr(getComputedStyle(x)).map(function(y){return parseFloat(y)}),x.offsetWidth,x.offsetHeight);if(u=da(b,c),v=da(D,c,x,!0),t){var C=b.left,S=b.top;f=da({left:C,top:S,bottom:S,right:S},c)}}else{u=Dr(r),v=Dr(x,!0),t&&(f=Dr(t));var E=v.left,O=v.top,R=v.clientLeft,z=v.clientTop,B=[u.left-E,u.top-O];l=Y(Qt(p.rootMatrix,B,4),[R+p.left,z+p.top])}}return M({targetClientRect:u,containerClientRect:v,moveableClientRect:f,rootContainerClientRect:c,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:r,style:d,offsetDelta:l},p)}function Le(t){var r=t.pos1,a=t.pos2,e=t.pos3,n=t.pos4;if(!r||!a||!e||!n)return null;var i=cr([r,a,e,n]),o=[i.minX,i.minY],s=Y(t.origin,o);return r=Y(r,o),a=Y(a,o),e=Y(e,o),n=Y(n,o),M(M({},t),{left:t.left,top:t.top,posDelta:o,pos1:r,pos2:a,pos3:e,pos4:n,origin:s,beforeOrigin:s,isPersisted:!0})}var pr=function(t){Br(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=M({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},wa(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new zi,e._prevTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._observer=null,e._observerId=0,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e.checkUpdateRect=function(){if(!e.isDragging()){var n=e.props.parentMoveable;if(n){n.checkUpdateRect();return}Mi(e._observerId),e._observerId=Ke(function(){e.isDragging()||e.updateRect()})}},e._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},e}var a=r.prototype;return a.render=function(){var e=this.props,n=this.getState(),i=e.parentPosition,o=e.className,s=e.target,u=e.zoom,f=e.cspNonce,v=e.translateZ,c=e.cssStyled,l=e.portalContainer,d=e.groupable;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=i||[0,0],g=p[0],h=p[1],m=n.left,x=n.top,b=n.target,D=n.direction,C=n.hasFixed,S=n.offsetDelta,E=e.targets,O=this.isDragging(),R={};this.getEnabledAbles().forEach(function(G){R["data-able-".concat(G.name.toLowerCase())]=!0});var z=this._getAbleClassName(),B=E&&E.length&&(b||d)||s||!this._hasFirstTarget&&this.state.isPersisted,y=this.controlBox||this.props.firstRenderState||this.props.persistData,T=[m-g,x-h];return!d&&e.useAccuratePosition&&(T[0]+=S[0],T[1]+=S[1]),Xt(c,M({cspNonce:f,ref:Jt(this,"controlBox"),className:"".concat(X("control-box",D===-1?"reverse":"",O?"dragging":"")," ").concat(z," ").concat(o)},R,{onClick:this._onPreventClick,portalContainer:l,style:{position:C?"fixed":"absolute",display:B?"block":"none",visibility:y?"visible":"hidden",transform:"translate3d(".concat(T[0],"px, ").concat(T[1],"px, ").concat(v,")"),"--zoom":u,"--zoompx":"".concat(u,"px")}}),this.renderAbles(),this._renderLines())},a.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1,this.controlBox.getElement();var e=this.props,n=e.parentMoveable,i=e.container,o=e.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!n&&!o&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},a.componentDidUpdate=function(e){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(e)},a.componentWillUnmount=function(){this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off();var e=this._viewContainer;e&&this._changeAbleViewClassNames([]),sr(this,"targetGesto"),sr(this,"controlGesto");var n=this.events;for(var i in n){var o=n[i];o&&o.destroy()}},a.getTargets=function(){var e=this.props.target;return e?[e]:[]},a.getAble=function(e){var n=this.props.ables||[];return Qr(n,function(i){return i.name===e})},a.getContainer=function(){var e=this.props,n=e.parentMoveable,i=e.wrapperMoveable,o=e.container;return o||i&&i.getContainer()||n&&n.getContainer()||this.controlBox.getElement().parentElement},a.isMoveableElement=function(e){var n;return e&&(((n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"class"))||"").indexOf(Na)>-1},a.dragStart=function(e){var n=this.targetGesto,i=this.controlGesto;return n&&Ia(this)({inputEvent:e})?n.isFlag()||n.triggerDragStart(e):i&&this.isMoveableElement(e.target)&&(i.isFlag()||i.triggerDragStart(e)),this},a.hitTest=function(e){var n=this.state,i=n.target,o=n.pos1,s=n.pos2,u=n.pos3,f=n.pos4,v=n.targetClientRect;if(!i)return 0;var c;if(e instanceof Element){var l=e.getBoundingClientRect();c={left:l.left,top:l.top,width:l.width,height:l.height}}else c=M({width:0,height:0},e);var d=c.left,p=c.top,g=c.width,h=c.height,m=he([o,s,f,u],v),x=Ti(m,[[d,p],[d+g,p],[d+g,p+h],[d,p+h]]),b=Gi(m);return!x||!b?0:Math.min(100,x/b*100)},a.isInside=function(e,n){var i=this.state,o=i.target,s=i.pos1,u=i.pos2,f=i.pos3,v=i.pos4,c=i.targetClientRect;return o?Ii([e,n],he([s,u,v,f],c)):!1},a.updateRect=function(e,n,i){i===void 0&&(i=!0);var o=this.props,s=o.parentMoveable,u=this.state,f=u.target||this.props.target,v=this.getContainer(),c=s?s._rootContainer:this._rootContainer,l=wa(this.controlBox&&this.controlBox.getElement(),f,v,v,c||v,this._getRequestStyles());if(!f&&this._hasFirstTarget&&o.persistData){var d=Le(o.persistData);for(var p in d)l[p]=d[p]}this.updateState(l,s?!1:i)},a.isDragging=function(e){var n,i,o=this.targetGesto,s=this.controlGesto;if(o!=null&&o.isFlag()){if(!e)return!0;var u=o.getEventData();return!!(!((n=u[e])===null||n===void 0)&&n.isEventStart)}if(s!=null&&s.isFlag()){if(!e)return!0;var u=s.getEventData();return!!(!((i=u[e])===null||i===void 0)&&i.isEventStart)}return!1},a.updateTarget=function(e){this.updateRect(e,!0)},a.getRect=function(){var e=this.state,n=Ot(this.state),i=n[0],o=n[1],s=n[2],u=n[3],f=Tt(n),v=e.width,c=e.height,l=f.width,d=f.height,p=f.left,g=f.top,h=[e.left,e.top],m=tt(h,e.origin),x=tt(h,e.beforeOrigin),b=e.transformOrigin;return{width:l,height:d,left:p,top:g,pos1:i,pos2:o,pos3:s,pos4:u,offsetWidth:v,offsetHeight:c,beforeOrigin:x,origin:m,transformOrigin:b,rotation:this.getRotation()}},a.getManager=function(){return this},a.stopDrag=function(e){var n,i;(!e||e==="target")&&((n=this.targetGesto)===null||n===void 0||n.stop()),(!e||e==="control")&&((i=this.controlGesto)===null||i===void 0||i.stop())},a.getRotation=function(){var e=this.state,n=e.pos1,i=e.pos2,o=e.direction;return Do(n,i,o)},a.request=function(e,n,i){n===void 0&&(n={});var o=this.props,s=o.ables,u=o.groupable,f=s.filter(function(h){return h.name===e})[0];if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var v=this,c=f.request(this),l=i||n.isInstant,d=c.isControl?"controlAbles":"targetAbles",p="".concat(u?"Group":"").concat(c.isControl?"Control":""),g={request:function(h){return Cr(v,d,"drag",p,"",M(M({},c.request(h)),{requestAble:e,isRequest:!0}),l),this},requestEnd:function(){return Cr(v,d,"drag",p,"End",M(M({},c.requestEnd()),{requestAble:e,isRequest:!0}),l),this}};return Cr(v,d,"drag",p,"Start",M(M({},c.requestStart(n)),{requestAble:e,isRequest:!0}),l),l?g.request(n).requestEnd():g},a.destroy=function(){this.componentWillUnmount()},a.updateRenderPoses=function(){var e=this.getState(),n=this.props,i=e.originalBeforeOrigin,o=e.transformOrigin,s=e.allMatrix,u=e.is3d,f=e.pos1,v=e.pos2,c=e.pos3,l=e.pos4,d=e.left,p=e.top,g=e.isPersisted,h=n.padding||{},m=h.left,x=m===void 0?0:m,b=h.top,D=b===void 0?0:b,C=h.bottom,S=C===void 0?0:C,E=h.right,O=E===void 0?0:E,R=u?4:3,z=[];g?z=o:this.controlBox&&n.groupable?z=i:z=tt(i,[d,p]),e.renderPoses=[tt(f,Nr(s,[-x,-D],o,z,R)),tt(v,Nr(s,[O,-D],o,z,R)),tt(c,Nr(s,[-x,S],o,z,R)),tt(l,Nr(s,[O,S],o,z,R))]},a.checkUpdate=function(){this._isPropTargetChanged=!1;var e=this.props,n=e.target,i=e.container,o=e.parentMoveable,s=this.state,u=s.target,f=s.container;if(!(!u&&!n)){this.updateAbles();var v=!Ra(u,n),c=v||!Ra(f,i);if(c){var l=i||this.controlBox;l&&this.unsetAbles(),this.updateState({target:n,container:i}),!o&&l&&this.updateRect("End",!1,!1),this._isPropTargetChanged=v}}},a.waitToChangeTarget=function(){return new Promise(function(){})},a.triggerEvent=function(e,n){this._emitter.trigger(e,n);var i=this.props[e];return i&&i(n)},a.useCSS=function(e,n){var i=this.props.customStyledMap,o=e+n;return i[o]||(i[o]=rn(e,n)),i[o]},a.getState=function(){var e,n=this.props;(n.target||!((e=n.targets)===null||e===void 0)&&e.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,o=n.persistData,s=n.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&o){var u=Le(o);if(u)return this.updateState(u,!1),this.state}return this.state.isPersisted=!1,this.state},a.updateSelectors=function(){},a.unsetAbles=function(){var e=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(e)})},a.updateAbles=function(e,n){e===void 0&&(e=this.props.ables),n===void 0&&(n="");var i=this.props,o=i.triggerAblesSimultaneously,s=this.getEnabledAbles(e),u="drag".concat(n,"Start"),f="pinch".concat(n,"Start"),v="drag".concat(n,"ControlStart"),c=Fr(s,[u,f],o),l=Fr(s,[v],o);this.enabledAbles=s,this.targetAbles=c,this.controlAbles=l},a.updateState=function(e,n){if(n){if(this.isUnmounted)return;this.setState(e)}else{var i=this.state;for(var o in e)i[o]=e[o]}},a.getEnabledAbles=function(e){e===void 0&&(e=this.props.ables);var n=this.props;return e.filter(function(i){return i&&(i.always&&n[i.name]!==!1||n[i.name])})},a.renderAbles=function(){var e=this,n=this.props,i=n.triggerAblesSimultaneously,o={createElement:Xt};return this.renderState={},mo(zn(Fr(this.getEnabledAbles(),["render"],i).map(function(s){var u=s.render;return u(e,o)||[]})).filter(function(s){return s}),function(s){var u=s.key;return u}).map(function(s){return s[0]})},a.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},a._getRequestStyles=function(){var e=this.getEnabledAbles().reduce(function(n,i){var o,s,u=(s=(o=i.requestStyle)===null||o===void 0?void 0:o.call(i))!==null&&s!==void 0?s:[];return U(U([],n,!0),u,!0)},[]);return e},a._updateObserver=function(e){var n,i=this.props,o=i.target;if(!window.ResizeObserver||!o||!i.useResizeObserver){(n=this._observer)===null||n===void 0||n.disconnect();return}if(!(e.target===o&&this._observer)){var s=new ResizeObserver(this.checkUpdateRect);s.observe(o,{box:"border-box"}),this._observer=s}},a._updateEvents=function(){var e=this.controlBox.getElement(),n=this.targetAbles.length,i=this.controlAbles.length,o=this.props,s=o.dragTarget||o.target,u=!n&&this.targetGesto||this._isTargetChanged(!0);u&&(sr(this,"targetGesto"),this.updateState({gesto:null})),i||sr(this,"controlGesto"),s&&n&&!this.targetGesto&&(this.targetGesto=ri(this,s,"")),!this.controlGesto&&i&&(this.controlGesto=ee(this,e,"controlAbles","Control"))},a._updateTargets=function(){var e=this.props;this._prevTarget=e.dragTarget||e.target,this._prevDragArea=e.dragArea},a._renderLines=function(){var e=this.props,n=e,i=n.zoom,o=n.hideDefaultLines,s=n.hideChildMoveableDefaultLines,u=n.parentMoveable;if(o||u&&s)return[];var f=this.getState().renderPoses,v={createElement:Xt};return[[0,1],[1,3],[3,2],[2,0]].map(function(c,l){var d=c[0],p=c[1];return zr(v,"",f[d],f[p],i,"render-line-".concat(l))})},a._isTargetChanged=function(e){var n=this.props,i=n.dragTarget||n.target,o=this._prevTarget,s=this._prevDragArea,u=n.dragArea,f=!u&&o!==i,v=(e||u)&&s!==u;return f||v},a._updateNativeEvents=function(){var e=this,n=this.props,i=n.dragArea?this.areaElement:this.state.target,o=this.events,s=hr(o);if(this._isTargetChanged())for(var u in o){var f=o[u];f&&f.destroy(),o[u]=null}if(i){var v=this.enabledAbles;s.forEach(function(c){var l=Fr(v,[c]),d=l.length>0,p=o[c];if(!d){p&&(p.destroy(),o[c]=null);return}p||(p=new Vs(i,e,c),o[c]=p),p.setAbles(l)})}},a._checkUpdateRootContainer=function(){var e=this.props.rootContainer;!this._rootContainer&&e&&(this._rootContainer=ar(e,!0))},a._checkUpdateViewContainer=function(){var e=this.props.viewContainer;!this._viewContainer&&e&&(this._viewContainer=ar(e,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(U(U([],this._getAbleViewClassNames(),!0),[this.isDragging()?Ds:""],!1))},a._changeAbleViewClassNames=function(e){var n=this._viewContainer,i=yn(e.filter(Boolean),function(v){return v}).map(function(v){var c=v[0];return c}),o=this._viewClassNames,s=gi(o,i),u=s.removed,f=s.added;u.forEach(function(v){Ze(n,o[v])}),f.forEach(function(v){je(n,i[v])}),this._viewClassNames=i},a._getAbleViewClassNames=function(){var e=this;return(this.getEnabledAbles().map(function(n){var i;return((i=n.viewClassName)===null||i===void 0?void 0:i.call(n,e))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},a._getAbleClassName=function(e){var n=this;e===void 0&&(e="");var i=this.getEnabledAbles(),o=this.targetGesto,s=this.controlGesto,u=o!=null&&o.isFlag()?o.getEventData():{},f=s!=null&&s.isFlag()?s.getEventData():{};return i.map(function(v){var c,l,d,p=v.name,g=((c=v.className)===null||c===void 0?void 0:c.call(v,n))||"";return(!((l=u[p])===null||l===void 0)&&l.isEventStart||!((d=f[p])===null||d===void 0)&&d.isEventStart)&&(g+=" ".concat(X("".concat(p).concat(e,"-dragging")))),g.trim()}).filter(Boolean).join(" ")},r.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:hn,firstRenderState:null,persistData:null,viewContainer:null,useAccuratePosition:!1},r}(tn),ne={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,groupableProps:Object,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,r){var a,e=t.props,n=e.targets||[];t.moveables=[];var i=t.getState(),o=i.left,s=i.top,u=i.isPersisted,f=[o,s],v=e.zoom||1,c=t.renderGroupRects,l=((a=e.persistData)===null||a===void 0?void 0:a.children)||[];return u?n=l.map(function(){return null}):l=[],U(U([],n.map(function(d,p){return r.createElement(pr,{key:"moveable"+p,ref:Ue(t,"moveables",p),target:d,origin:!1,cssStyled:e.cssStyled,customStyledMap:e.customStyledMap,useResizeObserver:e.useResizeObserver,hideChildMoveableDefaultLines:e.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:f,persistData:l[p],zoom:v})}),!0),zn(c.map(function(d,p){var g=d.pos1,h=d.pos2,m=d.pos3,x=d.pos4,b=[g,h,m,x];return[[0,1],[1,3],[3,2],[2,0]].map(function(D,C){var S=D[0],E=D[1];return zr(r,"",Y(b[S],f),Y(b[E],f),v,"group-rect-".concat(p,"-").concat(C))})})),!0)}},Us=Tr("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,r){r.datas.inputTarget=r.inputEvent&&r.inputEvent.target},dragEnd:function(t,r){var a=t.props.target,e=r.inputEvent,n=r.inputTarget,i=t.isMoveableElement(n),o=!i&&t.controlBox.getElement().contains(n);if(!(!e||!n||r.isDrag||t.isMoveableElement(n)||o)){var s=a.contains(n);W(t,"onClick",$(t,r,{isDouble:r.isDouble,inputTarget:n,isTarget:a===n,moveableTarget:t.props.target,containsTarget:s}))}},dragGroupEnd:function(t,r){var a=r.inputEvent,e=r.inputTarget;if(!(!a||!e||r.isDrag||t.isMoveableElement(e)||r.datas.inputTarget===e)){var n=t.props.targets,i=n.indexOf(e),o=i>-1,s=!1;i===-1&&(i=Mr(n,function(u){return u.contains(e)}),s=i>-1),W(t,"onClickGroup",$(t,r,{isDouble:r.isDouble,targets:n,inputTarget:e,targetIndex:i,isTarget:o,containsTarget:s,moveableTarget:n[i]}))}},dragControlEnd:function(t,r){this.dragEnd(t,r)},dragGroupControlEnd:function(t,r){this.dragEnd(t,r)}});function ir(t){var r=t.originalDatas.draggable;return r||(t.originalDatas.draggable={},r=t.originalDatas.draggable),M(M({},t),{datas:r})}var js=Tr("edgeDraggable",{css:[`.edge.edgeDraggable.line {
    cursor: move;
}`],render:function(t,r){var a=t.props,e=a.edgeDraggable;return e?Vn(r,"edgeDraggable",e,t.getState().renderPoses,a.zoom):[]},dragCondition:function(t,r){var a,e=t.props,n=(a=r.inputEvent)===null||a===void 0?void 0:a.target;return!e.edgeDraggable||!n?!1:!e.draggable&&mt(n,X("direction"))&&mt(n,X("edge"))&&mt(n,X("edgeDraggable"))},dragStart:function(t,r){return Ct.dragStart(t,ir(r))},drag:function(t,r){return Ct.drag(t,ir(r))},dragEnd:function(t,r){return Ct.dragEnd(t,ir(r))},dragGroupCondition:function(t,r){var a,e=t.props,n=(a=r.inputEvent)===null||a===void 0?void 0:a.target;return!e.edgeDraggable||!n?!1:!e.draggable&&mt(n,X("direction"))&&mt(n,X("line"))},dragGroupStart:function(t,r){return Ct.dragGroupStart(t,ir(r))},dragGroup:function(t,r){return Ct.dragGroup(t,ir(r))},dragGroupEnd:function(t,r){return Ct.dragGroupEnd(t,ir(r))},unset:function(t){return Ct.unset(t)}}),ai={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},ie=[Qn,Kn,cs,Mo,Ct,js,Ta,ms,Ss,hs,Ms,Rs,Es,ks,As,Hs,ne,ai,Us,jn,ti],Ks=ie.reduce(function(t,r){return M(M({},t),"events"in r?r.events:{})},{}),Zs=ie.reduce(function(t,r){return M(M({},t),r.props)},{}),$s=xo(Ks),vu=Object.keys($s),du=Object.keys(Zs);function Ve(t,r){var a=t[0],e=t[1],n=t[2];return(a*r[0]+e*r[1]+n)/Math.sqrt(a*a+e*e)}function Vr(t,r){var a=t[0],e=t[1];return-a*r[0]-e*r[1]}function Ye(t,r){return Math.max.apply(Math,t.map(function(a){var e=a[0],n=a[1],i=a[2],o=a[3];return Math.max(e[r],n[r],i[r],o[r])}))}function Xe(t,r){return Math.min.apply(Math,t.map(function(a){var e=a[0],n=a[1],i=a[2],o=a[3];return Math.min(e[r],n[r],i[r],o[r])}))}function Js(t,r){var a,e=[0,0],n=[0,0],i=[0,0],o=[0,0],s=0,u=0;if(!t.length)return{pos1:e,pos2:n,pos3:i,pos4:o,minX:0,minY:0,maxX:0,maxY:0,width:s,height:u,rotation:r};var f=st(r,yt);if(f%90){var v=f/180*Math.PI,c=Math.tan(v),l=-1/c,d=[Ea,me],p=[[0,0],[0,0]],g=[Ea,me],h=[[0,0],[0,0]];t.forEach(function(A){A.forEach(function(I){var k=Ve([-c,1,0],I),j=Ve([-l,1,0],I);d[0]>k&&(p[0]=I,d[0]=k),d[1]<k&&(p[1]=I,d[1]=k),g[0]>j&&(h[0]=I,g[0]=j),g[1]<j&&(h[1]=I,g[1]=j)})});var m=p[0],x=p[1],b=h[0],D=h[1],C=[-c,1,Vr([-c,1],m)],S=[-c,1,Vr([-c,1],x)],E=[-l,1,Vr([-l,1],b)],O=[-l,1,Vr([-l,1],D)];a=[[C,E],[C,O],[S,E],[S,O]].map(function(A){var I=A[0],k=A[1];return wi(I,k)[0]}),e=a[0],n=a[1],i=a[2],o=a[3],s=g[1]-g[0],u=d[1]-d[0]}else{var R=Xe(t,0),z=Xe(t,1),B=Ye(t,0),y=Ye(t,1);if(e=[R,z],n=[B,z],i=[R,y],o=[B,y],s=B-R,u=y-z,f%180){var T=[i,e,o,n];e=T[0],n=T[1],i=T[2],o=T[3],s=y-z,u=B-R}}if(f%360>180){var T=[o,i,n,e];e=T[0],n=T[1],i=T[2],o=T[3]}var G=cr([e,n,i,o]),w=G.minX,P=G.minY,F=G.maxX,_=G.maxY;return{pos1:e,pos2:n,pos3:i,pos4:o,width:s,height:u,minX:w,minY:P,maxX:F,maxY:_,rotation:r}}function ei(t,r){var a=r.map(function(e){if(Dt(e)){var n=ei(t,e),i=n.length;return i>1?n:i===1?n[0]:null}else{var o=Qr(t,function(s){var u=s.manager;return u.props.target===e});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return a.length===1&&Dt(a[0])?a[0]:a}var Qs=function(t){Br(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.differ=new qe,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}var a=r.prototype;return a.componentDidMount=function(){t.prototype.componentDidMount.call(this)},a.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},a.getTargets=function(){return this.props.targets},a.updateRect=function(e,n,i){var o;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;this.moveables.forEach(function(J){J.updateRect(e,!1,!1)});var u=this.props,f=this.moveables,v=s.target||u.target,c=f.map(function(J){return{finded:!1,manager:J}}),l=this.props.targetGroups||[],d=ei(c,l);d.push.apply(d,c.filter(function(J){var at=J.finded;return!at}).map(function(J){var at=J.manager;return at}));var p=[],g=!n||e!==""&&u.updateGroup,h=u.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(o=this.props.persistData)===null||o===void 0?void 0:o.rotation;m!=null&&(h=m)}function x(J,at,L){var V=J.map(function(Q){if(Dt(Q)){var it=x(Q,at),ot=[it.pos1,it.pos2,it.pos3,it.pos4];return p.push(it),{poses:ot,rotation:it.rotation}}else return{poses:Ot(Q.state),rotation:Q.getRotation()}}),et=V.map(function(Q){var it=Q.rotation;return it}),rt=0,pt=et[0],ut=et.every(function(Q){return Math.abs(pt-Q)<.1});g?rt=ut?pt:h:rt=!L&&ut?pt:at;var nt=V.map(function(Q){var it=Q.poses;return it}),lt=Js(nt,rt);return lt}var b=x(d,this.rotation,!0);g&&(this.rotation=b.rotation,this.transformOrigin=u.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=l,this.renderGroupRects=p;var D=this.transformOrigin,C=this.rotation,S=this.scale,E=b.width,O=b.height,R=b.minX,z=b.minY,B=Co([[0,0],[E,0],[0,O],[E,O]],Eo(D,E,O),this.rotation/180*Math.PI),y=cr(B.result),T=y.minX,G=y.minY,w=" rotate(".concat(C,"deg)")+" scale(".concat(S[0]>=0?1:-1,", ").concat(S[1]>=0?1:-1,")"),P="translate(".concat(-T,"px, ").concat(-G,"px)").concat(w);this.controlBox.getElement().style.transform="translate3d(".concat(R,"px, ").concat(z,"px, ").concat(this.props.translateZ||0,")"),v.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(D,";")+"width:".concat(E,"px;height:").concat(O,"px;")+"transform: ".concat(P),s.width=E,s.height=O;var F=this.getContainer(),_=wa(this.controlBox.getElement(),v,this.controlBox.getElement(),this.getContainer(),this._rootContainer||F,[]),A=[_.left,_.top],I=Ot(_),k=I[0],j=I[1],K=I[2],q=I[3],N=cr([k,j,K,q]),H=[N.minX,N.minY],Z=S[0]*S[1]>0?1:-1;_.pos1=Y(k,H),_.pos2=Y(j,H),_.pos3=Y(K,H),_.pos4=Y(q,H),_.left=R-_.left+H[0],_.top=z-_.top+H[1],_.origin=Y(tt(A,_.origin),H),_.beforeOrigin=Y(tt(A,_.beforeOrigin),H),_.originalBeforeOrigin=tt(A,_.originalBeforeOrigin),_.transformOrigin=Y(tt(A,_.transformOrigin),H),v.style.transform="translate(".concat(-T-H[0],"px, ").concat(-G-H[1],"px)")+w,this.updateState(M(M({},_),{posDelta:H,direction:Z,beforeDirection:Z}),i)},a.getRect=function(){return M(M({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},a.triggerEvent=function(e,n,i){if(i||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n);this._emitter.trigger(e,n)},a.updateAbles=function(){t.prototype.updateAbles.call(this,U(U([],this.props.ables,!0),[ne],!1),"Group")},a._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},a._updateEvents=function(){var e=this.state,n=this.props,i=this._prevTarget,o=n.dragTarget||this.areaElement;i!==o&&(sr(this,"targetGesto"),sr(this,"controlGesto"),e.target=null),e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block"),e.target&&(this.targetGesto||(this.targetGesto=ri(this,o,"Group")),this.controlGesto||(this.controlGesto=ee(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var s=!Ra(e.container,n.container);s&&(e.container=n.container);var u=n.targets,f=this.differ.update(u),v=f.added,c=f.changed,l=f.removed,d=v.length||l.length;(s||d||c.length||u.length&&!Gn(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!d},a._updateObserver=function(){},r.defaultProps=M(M({},pr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),r}(pr),tu=function(t){Br(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.moveables=[],e}var a=r.prototype;return a.render=function(){var e=this,n,i=this.props,o=i.cspNonce,s=i.cssStyled,u=i.persistData,f=i.targets||[],v=f.length,c=this.isUnmounted||!v,l=(n=u==null?void 0:u.children)!==null&&n!==void 0?n:[];return c&&!v&&l.length?f=l.map(function(){return null}):c||(l=[]),Xt(s,{cspNonce:o,ref:Jt(this,"controlBox"),className:X("control-box")},f.map(function(d,p){return Xt(pr,M({key:"moveable"+p,ref:Ue(e,"moveables",p)},e.props,{target:d,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:l[p]}))}))},a.componentDidUpdate=function(){},a.getTargets=function(){return this.props.targets},a.updateRect=function(e,n,i){i===void 0&&(i=!0),this.moveables.forEach(function(o){o.updateRect(e,n,i)})},a.getRect=function(){return M(M({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},a.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},a.dragStart=function(){return this},a.hitTest=function(){return 0},a.isInside=function(){return!1},a.isDragging=function(){return!1},a.updateRenderPoses=function(){},a.checkUpdate=function(){},a.triggerEvent=function(){},a.updateAbles=function(){},a._updateEvents=function(){},a._updateObserver=function(){},r}(pr);function ni(t,r){var a=[];return t.forEach(function(e){if(e){if(gr(e)){r[e]&&a.push.apply(a,r[e]);return}Dt(e)?a.push.apply(a,ni(e,r)):a.push(e)}}),a}function ii(t,r){var a=[];return t.forEach(function(e){if(e){if(gr(e)){r[e]&&a.push.apply(a,r[e]);return}Dt(e)?a.push(ii(e,r)):a.push(e)}}),a}function oi(t,r){return t.length!==r.length||t.some(function(a,e){var n=r[e];return!a&&!n?!1:a!=n?Dt(a)&&Dt(n)?oi(a,n):!0:!1})}var ru=function(t){Br(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new qe,e._elementTargets=[],e._onChangeTargets=null,e}var a=r.prototype;return r.makeStyled=function(){var e={},n=this.getTotalAbles();n.forEach(function(o){var s=o.css;s&&s.forEach(function(u){e[u]=!0})});var i=hr(e).join(`
`);this.defaultStyled=rn("div",mi(Na,Hi+i))},r.getTotalAbles=function(){return U([Kn,ne,ai,jn],this.defaultAbles,!0)},a.render=function(){var e,n=this.constructor;n.defaultStyled||n.makeStyled();var i=this.props,o=i.ables,s=i.props,u=_i(i,["ables","props"]),f=this._updateRefs(!0),v=ni(f,this.selectorMap),c=v.length>1,l=n.getTotalAbles(),d=U(U([],l,!0),o||[],!0),p=M(M(M({},u),s||{}),{ables:d,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=v;var g=null,h=this.moveable,m=u.persistData;if(m!=null&&m.children&&(c=!0),c){if(u.individualGroupable)return Xt(tu,M({key:"individual-group",ref:Jt(this,"moveable")},p,{target:null,targets:v}));var x=ii(f,this.selectorMap);if(h&&!h.props.groupable&&!h.props.individualGroupable){var b=h.props.target;b&&v.indexOf(b)>-1&&(g=M({},h.state))}return Xt(Qs,M({key:"group",ref:Jt(this,"moveable")},p,(e=u.groupableProps)!==null&&e!==void 0?e:{},{target:null,targets:v,targetGroups:x,firstRenderState:g}))}else{var D=v[0];if(h&&(h.props.groupable||h.props.individualGroupable)){var C=h.moveables||[],S=Qr(C,function(E){return E.props.target===D});S&&(g=M({},S.state))}return Xt(pr,M({key:"single",ref:Jt(this,"moveable")},p,{target:D,firstRenderState:g}))}},a.componentDidMount=function(){this._checkChangeTargets(),this._updateRefs()},a.componentDidUpdate=function(){this._checkChangeTargets()},a.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},a.getTargets=function(){var e,n;return(n=(e=this.moveable)===null||e===void 0?void 0:e.getTargets())!==null&&n!==void 0?n:[]},a.updateSelectors=function(){this.selectorMap={},this._updateRefs()},a.waitToChangeTarget=function(){var e=this,n;return this._onChangeTargets=function(){e._onChangeTargets=null,n()},new Promise(function(i){n=i})},a.waitToChangeTargets=function(){return this.waitToChangeTarget()},a.getManager=function(){return this.moveable},a._updateRefs=function(e){var n=this.refTargets,i=ja(this.props.target||this.props.targets),o=typeof document<"u",s=oi(n,i),u=this.selectorMap,f={};return this.refTargets.forEach(function v(c){if(gr(c)){var l=u[c];l?f[c]=u[c]:o&&(s=!0,f[c]=[].slice.call(document.querySelectorAll(c)))}else Dt(c)&&c.forEach(v)}),this.refTargets=i,this.selectorMap=f,!e&&s&&this.forceUpdate(),i},a._checkChangeTargets=function(){var e,n,i,o=this._differ.update(this._elementTargets),s=o.added,u=o.removed,f=s.length||u.length;f&&((n=(e=this.props).onChangeTargets)===null||n===void 0||n.call(e,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this)),this._updateRefs()},r.defaultAbles=[],r.customStyledMap={},r.defaultStyled=null,Ai([xi(Xi)],r.prototype,"moveable",void 0),r}(tn),au=function(t){Br(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.defaultAbles=ie,r}(ru),pu=au;export{du as M,Xi as a,vu as b,pu as c};
