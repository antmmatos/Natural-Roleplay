import{E as z}from"./@scena-e1e05698.js";import{r as h,h as v,n as R}from"./@daybrush-ae1f0580.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var x=function(r,e){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var t in i)i.hasOwnProperty(t)&&(n[t]=i[t])},x(r,e)};function H(r,e){x(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){return u=Object.assign||function(e){for(var n,i=1,t=arguments.length;i<t;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(this,arguments)};function J(r,e){var n=e[0]-r[0],i=e[1]-r[1],t=Math.atan2(i,n);return t>=0?t:t+Math.PI*2}function O(r){return J([r[0].clientX,r[0].clientY],[r[1].clientX,r[1].clientY])/Math.PI*180}function K(r){return r.touches&&r.touches.length>=2}function k(r){return r?r.touches?V(r.touches):[j(r)]:[]}function Q(r){return r&&(r.type.indexOf("mouse")>-1||"button"in r)}function q(r,e,n){var i=n.length,t=Y(r,i),a=t.clientX,l=t.clientY,g=t.originalClientX,E=t.originalClientY,f=Y(e,i),D=f.clientX,o=f.clientY,s=Y(n,i),c=s.clientX,d=s.clientY,p=a-D,_=l-o,y=a-c,C=l-d;return{clientX:g,clientY:E,deltaX:p,deltaY:_,distX:y,distY:C}}function b(r){return Math.sqrt(Math.pow(r[0].clientX-r[1].clientX,2)+Math.pow(r[0].clientY-r[1].clientY,2))}function V(r){for(var e=Math.min(r.length,2),n=[],i=0;i<e;++i)n.push(j(r[i]));return n}function j(r){return{clientX:r.clientX,clientY:r.clientY}}function Y(r,e){e===void 0&&(e=r.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},i=0;i<e;++i){var t=r[i];n.originalClientX+="originalClientX"in t?t.originalClientX:t.clientX,n.originalClientY+="originalClientY"in t?t.originalClientY:t.clientY,n.clientX+=t.clientX,n.clientY+=t.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var B=function(){function r(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return r.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),O(e)},r.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),O(e)-O(this.startClients)},r.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var i=q(e||this.prevClients,this.prevClients,this.startClients),t=i.deltaX,a=i.deltaY;return this.movement+=Math.sqrt(t*t+a*a),this.prevClients=e,i},r.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);var n=this.prevClients;return this.startClients.map(function(i,t){return q([e[t]],[n[t]],[i])})},r.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var i=Y(e,this.length),t=Y(this.prevClients,this.length),a=i.clientX-t.clientX,l=i.clientY-t.clientY;return Math.sqrt(a*a+l*l)+n},r.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),b(e)},r.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),b(e)/b(this.startClients)},r.prototype.move=function(e,n){this.startClients.forEach(function(i){i.clientX-=e,i.clientY-=n}),this.prevClients.forEach(function(i){i.clientX-=e,i.clientY-=n})},r}(),W=["textarea","input"],tt=function(r){H(e,r);function e(n,i){i===void 0&&(i={});var t=r.call(this)||this;t.options={},t.flag=!1,t.pinchFlag=!1,t.data={},t.isDrag=!1,t.isPinch=!1,t.isMouse=!1,t.isTouch=!1,t.clientStores=[],t.targets=[],t.prevTime=0,t.doubleFlag=!1,t._dragFlag=!1,t._isTrusted=!1,t._isMouseEvent=!1,t._isSecondaryButton=!1,t._preventMouseEvent=!1,t._prevInputEvent=null,t.onDragStart=function(o,s){if(s===void 0&&(s=!0),!(!t.flag&&o.cancelable===!1)){var c=t.options,d=c.container,p=c.pinchOutside,_=c.preventWheelClick,y=c.preventRightClick,C=c.preventDefault,M=c.checkInput,P=c.preventClickEventOnDragStart,w=c.preventClickEventOnDrag,T=c.preventClickEventByCondition,S=t.isTouch,F=!t.flag;if(t._isSecondaryButton=o.which===3||o.button===2,_&&(o.which===2||o.button===1)||y&&(o.which===3||o.button===2))return t.stop(),!1;if(F){var m=document.activeElement,X=o.target;if(X){var G=X.tagName.toLowerCase(),N=W.indexOf(G)>-1,I=X.isContentEditable;if(N||I){if(M||m===X||m&&I&&m.isContentEditable&&m.contains(X))return!1}else if((C||o.type==="touchstart")&&m){var L=m.tagName.toLowerCase();(m.isContentEditable||W.indexOf(L)>-1)&&m.blur()}(P||w||T)&&v(window,"click",t._onClick,!0)}t.clientStores=[new B(k(o))],t.flag=!0,t.isDrag=!1,t._isTrusted=s,t._dragFlag=!0,t._prevInputEvent=o,t.data={},t.doubleFlag=R()-t.prevTime<200,t._isMouseEvent=Q(o),!t._isMouseEvent&&t._preventMouseEvent&&(t._preventMouseEvent=!1);var U=t._preventMouseEvent||t.emit("dragStart",u(u({data:t.data,datas:t.data,inputEvent:o,isMouseEvent:t._isMouseEvent,isSecondaryButton:t._isSecondaryButton,isTrusted:s,isDouble:t.doubleFlag},t.getCurrentStore().getPosition()),{preventDefault:function(){o.preventDefault()},preventDrag:function(){t._dragFlag=!1}}));U===!1&&t.stop(),t._isMouseEvent&&t.flag&&C&&o.preventDefault()}if(!t.flag)return!1;var A=0;if(F?(t._attchDragEvent(),S&&p&&(A=setTimeout(function(){v(d,"touchstart",t.onDragStart,{passive:!1})}))):S&&p&&h(d,"touchstart",t.onDragStart),t.flag&&K(o)){if(clearTimeout(A),F&&o.touches.length!==o.changedTouches.length)return;t.pinchFlag||t.onPinchStart(o)}}},t.onDrag=function(o,s){if(t.flag){var c=t.options.preventDefault;!t._isMouseEvent&&c&&o.preventDefault(),t._prevInputEvent=o;var d=k(o),p=t.moveClients(d,o,!1);if(t._dragFlag){if(t.pinchFlag||p.deltaX||p.deltaY){var _=t._preventMouseEvent||t.emit("drag",u(u({},p),{isScroll:!!s,inputEvent:o}));if(_===!1){t.stop();return}}t.pinchFlag&&t.onPinch(o,d)}t.getCurrentStore().getPosition(d,!0)}},t.onDragEnd=function(o){if(t.flag){var s=t.options,c=s.pinchOutside,d=s.container,p=s.preventClickEventOnDrag,_=s.preventClickEventOnDragStart,y=s.preventClickEventByCondition,C=t.isDrag;(p||_||y)&&requestAnimationFrame(function(){t._allowClickEvent()}),!y&&!_&&p&&!C&&t._allowClickEvent(),t.isTouch&&c&&h(d,"touchstart",t.onDragStart),t.pinchFlag&&t.onPinchEnd(o);var M=o!=null&&o.touches?k(o):[],P=M.length;P===0||!t.options.keepDragging?t.flag=!1:t._addStore(new B(M));var w=t._getPosition(),T=R(),S=!C&&t.doubleFlag;t._prevInputEvent=null,t.prevTime=C||S?0:T,t.flag||(t._dettachDragEvent(),t._preventMouseEvent||t.emit("dragEnd",u({data:t.data,datas:t.data,isDouble:S,isDrag:C,isClick:!C,isMouseEvent:t._isMouseEvent,isSecondaryButton:t._isSecondaryButton,inputEvent:o,isTrusted:t._isTrusted},w)),t.clientStores=[],t._isMouseEvent||(t._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){t._preventMouseEvent=!1})})))}},t.onBlur=function(){t.onDragEnd()},t._allowClickEvent=function(){h(window,"click",t._onClick,!0)},t._onClick=function(o){t._allowClickEvent(),t._preventMouseEvent=!1;var s=t.options.preventClickEventByCondition;s!=null&&s(o)||(o.stopPropagation(),o.preventDefault())},t._onContextMenu=function(o){var s=t.options;s.preventRightClick?t.onDragEnd(o):o.preventDefault()},t._passCallback=function(){};var a=[].concat(n);t.options=u({checkInput:!1,container:a.length>1?window:a[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},i);var l=t.options,g=l.container,E=l.events,f=l.checkWindowBlur;if(t.isTouch=E.indexOf("touch")>-1,t.isMouse=E.indexOf("mouse")>-1,t.targets=a,t.isMouse&&(a.forEach(function(o){v(o,"mousedown",t.onDragStart),v(o,"mousemove",t._passCallback)}),v(g,"contextmenu",t._onContextMenu)),f&&v(window,"blur",t.onBlur),t.isTouch){var D={passive:!1};a.forEach(function(o){v(o,"touchstart",t.onDragStart,D),v(o,"touchmove",t._passCallback,D)})}return t}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(i,t){return i+t.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,i,t,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,i),a&&this.onDrag(t,!0))},e.prototype.move=function(n,i){var t=n[0],a=n[1],l=this.getCurrentStore(),g=l.prevClients;return this.moveClients(g.map(function(E){var f=E.clientX,D=E.clientY;return{clientX:f+t,clientY:D+a,originalClientX:f,originalClientY:D}}),i,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var i=this.data;for(var t in n)i[t]=n[t];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),u(u({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,i=this.targets,t=this.options.container;this.off(),h(window,"blur",this.onBlur),this.isMouse&&(i.forEach(function(a){h(a,"mousedown",n.onDragStart)}),h(t,"contextmenu",this._onContextMenu)),this.isTouch&&(i.forEach(function(a){h(a,"touchstart",n.onDragStart)}),h(t,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var t=new B(k(n));this.pinchFlag=!0,this._addStore(t);var a=this.emit("pinchStart",u(u({data:this.data,datas:this.data,angle:t.getAngle(),touches:this.getCurrentStore().getPositions()},t.getPosition()),{inputEvent:n,isTrusted:this._isTrusted}));a===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,i){if(!(!this.flag||!this.pinchFlag||i.length<2)){var t=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",u(u({data:this.data,datas:this.data,movement:this.getMovement(i),angle:t.getAngle(i),rotation:t.getRotation(i),touches:t.getPositions(i),scale:t.getScale(i),distance:t.getDistance(i)},t.getPosition(i)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var i=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var t=this.getCurrentStore();this.emit("pinchEnd",u(u({data:this.data,datas:this.data,isPinch:i,touches:t.getPositions()},t.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,i,t){var a=this._getPosition(n,t),l=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var g=!1;return!l&&this.isDrag&&(g=!0),u(u({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:i,isTrusted:this._isTrusted,isFirstDrag:g})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,i){var t=this.getCurrentStore(),a=t.getPosition(n,i),l=this.clientStores.slice(1).reduce(function(f,D){var o=D.getPosition();return f.distX+=o.distX,f.distY+=o.distY,f},a),g=l.distX,E=l.distY;return u(u({},a),{distX:g,distY:E})},e.prototype._attchDragEvent=function(){var n=this.options.container,i={passive:!1};this.isMouse&&(v(n,"mousemove",this.onDrag),v(n,"mouseup",this.onDragEnd)),this.isTouch&&(v(n,"touchmove",this.onDrag,i),v(n,"touchend",this.onDragEnd,i),v(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this.options.container;this.isMouse&&(h(n,"mousemove",this.onDrag),h(n,"mouseup",this.onDragEnd)),this.isTouch&&(h(n,"touchstart",this.onDragStart),h(n,"touchmove",this.onDrag),h(n,"touchend",this.onDragEnd),h(n,"touchcancel",this.onDragEnd))},e}(z);export{tt as G};
